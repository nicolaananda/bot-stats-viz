import{j as e,u as Ne,a as Db,b as zn,Q as Ob,c as Mb}from"./tanstack-lyGMcX69.js";import{a as wr,r as m,o as G,v as Mu,R as Lu,u as Lb,N as Gc,b as yn,c as xl,B as Fb,d as $b,e as Fe}from"./react-5nkoHZI4.js";import{c as Fu,s as Bb,R as Re,L as rn,C as De,X as Oe,Y as Me,T as _e,a as as,B as kt,b as dt,d as Xc,e as $s,A as is,f as Ot,g as jn,P as js,h as ws,S as Ub,i as zb}from"./recharts-CapEJ0Fz.js";import{X as pl,P as Wb,C as ut,S as ys,a as Ja,H as Hb,U as Ve,b as gl,c as Ns,d as qe,T as $e,B as $u,e as Ss,f as ka,D as Ft,A as ft,g as nn,h as Bu,i as an,j as Uu,k as zu,l as wn,M as qb,m as Kb,n as Ht,o as Wu,R as Vb,p as hr,F as bl,W as on,q as Nt,r as br,E as vl,s as Nn,t as ur,u as yi,v as Hu,w as vr,x as yl,y as qu,z as Gb,G as Ca,I as ln,J as jl,K as Ku,L as Xb,N as Ra,O as cn,Q as Yb,V as dn,Y as Qa,Z as Jb,_ as Qb,$ as Yc,a0 as _a,a1 as ji,a2 as Zb,a3 as Vu,a4 as ev,a5 as wi,a6 as tv,a7 as Jc,a8 as Qc,a9 as Zc,aa as Ko,ab as Gu,ac as sv,ad as ed,ae as rv,af as Xu,ag as nv,ah as av,ai as td,aj as sd,ak as ov,al as rd}from"./lucide-DNpVEMRq.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Yu,nd=wr;Yu=nd.createRoot,nd.hydrateRoot;const iv=1,lv=1e6;let Vo=0;function cv(){return Vo=(Vo+1)%Number.MAX_SAFE_INTEGER,Vo.toString()}const Go=new Map,ad=t=>{if(Go.has(t))return;const s=setTimeout(()=>{Go.delete(t),Zr({type:"REMOVE_TOAST",toastId:t})},lv);Go.set(t,s)},dv=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,iv)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?ad(r):t.toasts.forEach(n=>{ad(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},la=[];let ca={toasts:[]};function Zr(t){ca=dv(ca,t),la.forEach(s=>{s(ca)})}function uv({...t}){const s=cv(),r=a=>Zr({type:"UPDATE_TOAST",toast:{...a,id:s}}),n=()=>Zr({type:"DISMISS_TOAST",toastId:s});return Zr({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:a=>{a||n()}}}),{id:s,dismiss:n,update:r}}function Sn(){const[t,s]=m.useState(ca);return m.useEffect(()=>(la.push(s),()=>{const r=la.indexOf(s);r>-1&&la.splice(r,1)}),[t]),{...t,toast:uv,dismiss:r=>Zr({type:"DISMISS_TOAST",toastId:r})}}function J(t,s,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function od(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Za(...t){return s=>{let r=!1;const n=t.map(a=>{const o=od(a,s);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():od(t[a],null)}}}}function Ce(...t){return m.useCallback(Za(...t),t)}function mv(t,s){const r=m.createContext(s),n=o=>{const{children:i,...l}=o,c=m.useMemo(()=>l,Object.values(l));return e.jsx(r.Provider,{value:c,children:i})};n.displayName=t+"Provider";function a(o){const i=m.useContext(r);if(i)return i;if(s!==void 0)return s;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[n,a]}function at(t,s=[]){let r=[];function n(o,i){const l=m.createContext(i),c=r.length;r=[...r,i];const d=h=>{var y;const{scope:x,children:f,...b}=h,g=((y=x==null?void 0:x[t])==null?void 0:y[c])||l,p=m.useMemo(()=>b,Object.values(b));return e.jsx(g.Provider,{value:p,children:f})};d.displayName=o+"Provider";function u(h,x){var g;const f=((g=x==null?void 0:x[t])==null?void 0:g[c])||l,b=m.useContext(f);if(b)return b;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[d,u]}const a=()=>{const o=r.map(i=>m.createContext(i));return function(l){const c=(l==null?void 0:l[t])||o;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,hv(a,...s)]}function hv(...t){const s=t[0];if(t.length===1)return s;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const i=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(o)[`__scope${d}`];return{...l,...h}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:i}),[i])}};return r.scopeName=s.scopeName,r}function Bs(t){const s=fv(t),r=m.forwardRef((n,a)=>{const{children:o,...i}=n,l=m.Children.toArray(o),c=l.find(pv);if(c){const d=c.props.children,u=l.map(h=>h===c?m.Children.count(d)>1?m.Children.only(null):m.isValidElement(d)?d.props.children:null:h);return e.jsx(s,{...i,ref:a,children:m.isValidElement(d)?m.cloneElement(d,void 0,u):null})}return e.jsx(s,{...i,ref:a,children:o})});return r.displayName=`${t}.Slot`,r}var Nr=Bs("Slot");function fv(t){const s=m.forwardRef((r,n)=>{const{children:a,...o}=r;if(m.isValidElement(a)){const i=bv(a),l=gv(o,a.props);return a.type!==m.Fragment&&(l.ref=n?Za(n,i):i),m.cloneElement(a,l)}return m.Children.count(a)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Ju=Symbol("radix.slottable");function xv(t){const s=({children:r})=>e.jsx(e.Fragment,{children:r});return s.displayName=`${t}.Slottable`,s.__radixId=Ju,s}function pv(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ju}function gv(t,s){const r={...s};for(const n in s){const a=t[n],o=s[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...l)=>{const c=o(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...o}:n==="className"&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...t,...r}}function bv(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function eo(t){const s=t+"CollectionProvider",[r,n]=at(s),[a,o]=r(s,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:p,children:y}=g,v=G.useRef(null),j=G.useRef(new Map).current;return e.jsx(a,{scope:p,itemMap:j,collectionRef:v,children:y})};i.displayName=s;const l=t+"CollectionSlot",c=Bs(l),d=G.forwardRef((g,p)=>{const{scope:y,children:v}=g,j=o(l,y),w=Ce(p,j.collectionRef);return e.jsx(c,{ref:w,children:v})});d.displayName=l;const u=t+"CollectionItemSlot",h="data-radix-collection-item",x=Bs(u),f=G.forwardRef((g,p)=>{const{scope:y,children:v,...j}=g,w=G.useRef(null),k=Ce(p,w),R=o(u,y);return G.useEffect(()=>(R.itemMap.set(w,{ref:w,...j}),()=>void R.itemMap.delete(w))),e.jsx(x,{[h]:"",ref:k,children:v})});f.displayName=u;function b(g){const p=o(t+"CollectionConsumer",g);return G.useCallback(()=>{const v=p.collectionRef.current;if(!v)return[];const j=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(p.itemMap.values()).sort((R,C)=>j.indexOf(R.ref.current)-j.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:d,ItemSlot:f},b,n]}var vv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oe=vv.reduce((t,s)=>{const r=Bs(`Primitive.${s}`),n=m.forwardRef((a,o)=>{const{asChild:i,...l}=a,c=i?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${s}`,{...t,[s]:n}},{});function wl(t,s){t&&wr.flushSync(()=>t.dispatchEvent(s))}function nt(t){const s=m.useRef(t);return m.useEffect(()=>{s.current=t}),m.useMemo(()=>(...r)=>{var n;return(n=s.current)==null?void 0:n.call(s,...r)},[])}function yv(t,s=globalThis==null?void 0:globalThis.document){const r=nt(t);m.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return s.addEventListener("keydown",n,{capture:!0}),()=>s.removeEventListener("keydown",n,{capture:!0})},[r,s])}var jv="DismissableLayer",Ni="dismissableLayer.update",wv="dismissableLayer.pointerDownOutside",Nv="dismissableLayer.focusOutside",id,Qu=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sr=m.forwardRef((t,s)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=t,d=m.useContext(Qu),[u,h]=m.useState(null),x=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=m.useState({}),b=Ce(s,C=>h(C)),g=Array.from(d.layers),[p]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(p),v=u?g.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,w=v>=y,k=kv(C=>{const E=C.target,M=[...d.branches].some(B=>B.contains(E));!w||M||(a==null||a(C),i==null||i(C),C.defaultPrevented||l==null||l())},x),R=Cv(C=>{const E=C.target;[...d.branches].some(B=>B.contains(E))||(o==null||o(C),i==null||i(C),C.defaultPrevented||l==null||l())},x);return yv(C=>{v===d.layers.size-1&&(n==null||n(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},x),m.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(id=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),ld(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=id)}},[u,x,r,d]),m.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),ld())},[u,d]),m.useEffect(()=>{const C=()=>f({});return document.addEventListener(Ni,C),()=>document.removeEventListener(Ni,C)},[]),e.jsx(oe.div,{...c,ref:b,style:{pointerEvents:j?w?"auto":"none":void 0,...t.style},onFocusCapture:J(t.onFocusCapture,R.onFocusCapture),onBlurCapture:J(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:J(t.onPointerDownCapture,k.onPointerDownCapture)})});Sr.displayName=jv;var Sv="DismissableLayerBranch",Zu=m.forwardRef((t,s)=>{const r=m.useContext(Qu),n=m.useRef(null),a=Ce(s,n);return m.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),e.jsx(oe.div,{...t,ref:a})});Zu.displayName=Sv;function kv(t,s=globalThis==null?void 0:globalThis.document){const r=nt(t),n=m.useRef(!1),a=m.useRef(()=>{});return m.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){em(wv,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(s.removeEventListener("click",a.current),a.current=c,s.addEventListener("click",a.current,{once:!0})):c()}else s.removeEventListener("click",a.current);n.current=!1},i=window.setTimeout(()=>{s.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(i),s.removeEventListener("pointerdown",o),s.removeEventListener("click",a.current)}},[s,r]),{onPointerDownCapture:()=>n.current=!0}}function Cv(t,s=globalThis==null?void 0:globalThis.document){const r=nt(t),n=m.useRef(!1);return m.useEffect(()=>{const a=o=>{o.target&&!n.current&&em(Nv,r,{originalEvent:o},{discrete:!1})};return s.addEventListener("focusin",a),()=>s.removeEventListener("focusin",a)},[s,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function ld(){const t=new CustomEvent(Ni);document.dispatchEvent(t)}function em(t,s,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?wl(a,o):a.dispatchEvent(o)}var Rv=Sr,_v=Zu,Be=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},Av="Portal",kn=m.forwardRef((t,s)=>{var l;const{container:r,...n}=t,[a,o]=m.useState(!1);Be(()=>o(!0),[]);const i=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?Mu.createPortal(e.jsx(oe.div,{...n,ref:s}),i):null});kn.displayName=Av;function Ev(t,s){return m.useReducer((r,n)=>s[r][n]??r,t)}var Rt=t=>{const{present:s,children:r}=t,n=Tv(s),a=typeof r=="function"?r({present:n.isPresent}):m.Children.only(r),o=Ce(n.ref,Pv(a));return typeof r=="function"||n.isPresent?m.cloneElement(a,{ref:o}):null};Rt.displayName="Presence";function Tv(t){const[s,r]=m.useState(),n=m.useRef(null),a=m.useRef(t),o=m.useRef("none"),i=t?"mounted":"unmounted",[l,c]=Ev(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const d=Wn(n.current);o.current=l==="mounted"?d:"none"},[l]),Be(()=>{const d=n.current,u=a.current;if(u!==t){const x=o.current,f=Wn(d);t?c("MOUNT"):f==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&x!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),Be(()=>{if(s){let d;const u=s.ownerDocument.defaultView??window,h=f=>{const g=Wn(n.current).includes(f.animationName);if(f.target===s&&g&&(c("ANIMATION_END"),!a.current)){const p=s.style.animationFillMode;s.style.animationFillMode="forwards",d=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=p)})}},x=f=>{f.target===s&&(o.current=Wn(n.current))};return s.addEventListener("animationstart",x),s.addEventListener("animationcancel",h),s.addEventListener("animationend",h),()=>{u.clearTimeout(d),s.removeEventListener("animationstart",x),s.removeEventListener("animationcancel",h),s.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[s,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function Wn(t){return(t==null?void 0:t.animationName)||"none"}function Pv(t){var n,a;let s=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?t.ref:(s=(a=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:a.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Iv=Lu[" useInsertionEffect ".trim().toString()]||Be;function Xt({prop:t,defaultProp:s,onChange:r=()=>{},caller:n}){const[a,o,i]=Dv({defaultProp:s,onChange:r}),l=t!==void 0,c=l?t:a;{const u=m.useRef(t!==void 0);m.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=m.useCallback(u=>{var h;if(l){const x=Ov(u)?u(t):u;x!==t&&((h=i.current)==null||h.call(i,x))}else o(u)},[l,t,o,i]);return[c,d]}function Dv({defaultProp:t,onChange:s}){const[r,n]=m.useState(t),a=m.useRef(r),o=m.useRef(s);return Iv(()=>{o.current=s},[s]),m.useEffect(()=>{var i;a.current!==r&&((i=o.current)==null||i.call(o,r),a.current=r)},[r,a]),[r,n,o]}function Ov(t){return typeof t=="function"}var tm=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Mv="VisuallyHidden",to=m.forwardRef((t,s)=>e.jsx(oe.span,{...t,ref:s,style:{...tm,...t.style}}));to.displayName=Mv;var Lv=to,Nl="ToastProvider",[Sl,Fv,$v]=eo("Toast"),[sm,eA]=at("Toast",[$v]),[Bv,so]=sm(Nl),rm=t=>{const{__scopeToast:s,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:o=50,children:i}=t,[l,c]=m.useState(null),[d,u]=m.useState(0),h=m.useRef(!1),x=m.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Nl}\`. Expected non-empty \`string\`.`),e.jsx(Sl.Provider,{scope:s,children:e.jsx(Bv,{scope:s,label:r,duration:n,swipeDirection:a,swipeThreshold:o,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>u(f=>f+1),[]),onToastRemove:m.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:x,children:i})})};rm.displayName=Nl;var nm="ToastViewport",Uv=["F8"],Si="toast.viewportPause",ki="toast.viewportResume",am=m.forwardRef((t,s)=>{const{__scopeToast:r,hotkey:n=Uv,label:a="Notifications ({hotkey})",...o}=t,i=so(nm,r),l=Fv(r),c=m.useRef(null),d=m.useRef(null),u=m.useRef(null),h=m.useRef(null),x=Ce(s,h,i.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=i.toastCount>0;m.useEffect(()=>{const p=y=>{var j;n.length!==0&&n.every(w=>y[w]||y.code===w)&&((j=h.current)==null||j.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n]),m.useEffect(()=>{const p=c.current,y=h.current;if(b&&p&&y){const v=()=>{if(!i.isClosePausedRef.current){const R=new CustomEvent(Si);y.dispatchEvent(R),i.isClosePausedRef.current=!0}},j=()=>{if(i.isClosePausedRef.current){const R=new CustomEvent(ki);y.dispatchEvent(R),i.isClosePausedRef.current=!1}},w=R=>{!p.contains(R.relatedTarget)&&j()},k=()=>{p.contains(document.activeElement)||j()};return p.addEventListener("focusin",v),p.addEventListener("focusout",w),p.addEventListener("pointermove",v),p.addEventListener("pointerleave",k),window.addEventListener("blur",v),window.addEventListener("focus",j),()=>{p.removeEventListener("focusin",v),p.removeEventListener("focusout",w),p.removeEventListener("pointermove",v),p.removeEventListener("pointerleave",k),window.removeEventListener("blur",v),window.removeEventListener("focus",j)}}},[b,i.isClosePausedRef]);const g=m.useCallback(({tabbingDirection:p})=>{const v=l().map(j=>{const w=j.ref.current,k=[w,...e0(w)];return p==="forwards"?k:k.reverse()});return(p==="forwards"?v.reverse():v).flat()},[l]);return m.useEffect(()=>{const p=h.current;if(p){const y=v=>{var k,R,C;const j=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!j){const E=document.activeElement,M=v.shiftKey;if(v.target===p&&M){(k=d.current)==null||k.focus();return}const I=g({tabbingDirection:M?"backwards":"forwards"}),te=I.findIndex(W=>W===E);Xo(I.slice(te+1))?v.preventDefault():M?(R=d.current)==null||R.focus():(C=u.current)==null||C.focus()}};return p.addEventListener("keydown",y),()=>p.removeEventListener("keydown",y)}},[l,g]),e.jsxs(_v,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&e.jsx(Ci,{ref:d,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});Xo(p)}}),e.jsx(Sl.Slot,{scope:r,children:e.jsx(oe.ol,{tabIndex:-1,...o,ref:x})}),b&&e.jsx(Ci,{ref:u,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});Xo(p)}})]})});am.displayName=nm;var om="ToastFocusProxy",Ci=m.forwardRef((t,s)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,o=so(om,r);return e.jsx(to,{"aria-hidden":!0,tabIndex:0,...a,ref:s,style:{position:"fixed"},onFocus:i=>{var d;const l=i.relatedTarget;!((d=o.viewport)!=null&&d.contains(l))&&n()}})});Ci.displayName=om;var Cn="Toast",zv="toast.swipeStart",Wv="toast.swipeMove",Hv="toast.swipeCancel",qv="toast.swipeEnd",im=m.forwardRef((t,s)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:o,...i}=t,[l,c]=Xt({prop:n,defaultProp:a??!0,onChange:o,caller:Cn});return e.jsx(Rt,{present:r||l,children:e.jsx(Gv,{open:l,...i,ref:s,onClose:()=>c(!1),onPause:nt(t.onPause),onResume:nt(t.onResume),onSwipeStart:J(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:J(t.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:J(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:J(t.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});im.displayName=Cn;var[Kv,Vv]=sm(Cn,{onClose(){}}),Gv=m.forwardRef((t,s)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:x,onSwipeEnd:f,...b}=t,g=so(Cn,r),[p,y]=m.useState(null),v=Ce(s,W=>y(W)),j=m.useRef(null),w=m.useRef(null),k=a||g.duration,R=m.useRef(0),C=m.useRef(k),E=m.useRef(0),{onToastAdd:M,onToastRemove:B}=g,q=nt(()=>{var z;(p==null?void 0:p.contains(document.activeElement))&&((z=g.viewport)==null||z.focus()),i()}),I=m.useCallback(W=>{!W||W===1/0||(window.clearTimeout(E.current),R.current=new Date().getTime(),E.current=window.setTimeout(q,W))},[q]);m.useEffect(()=>{const W=g.viewport;if(W){const z=()=>{I(C.current),d==null||d()},K=()=>{const $=new Date().getTime()-R.current;C.current=C.current-$,window.clearTimeout(E.current),c==null||c()};return W.addEventListener(Si,K),W.addEventListener(ki,z),()=>{W.removeEventListener(Si,K),W.removeEventListener(ki,z)}}},[g.viewport,k,c,d,I]),m.useEffect(()=>{o&&!g.isClosePausedRef.current&&I(k)},[o,k,g.isClosePausedRef,I]),m.useEffect(()=>(M(),()=>B()),[M,B]);const te=m.useMemo(()=>p?fm(p):null,[p]);return g.viewport?e.jsxs(e.Fragment,{children:[te&&e.jsx(Xv,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:te}),e.jsx(Kv,{scope:r,onClose:q,children:wr.createPortal(e.jsx(Sl.ItemSlot,{scope:r,children:e.jsx(Rv,{asChild:!0,onEscapeKeyDown:J(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||q(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(oe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...b,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:J(t.onKeyDown,W=>{W.key==="Escape"&&(l==null||l(W.nativeEvent),W.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,q()))}),onPointerDown:J(t.onPointerDown,W=>{W.button===0&&(j.current={x:W.clientX,y:W.clientY})}),onPointerMove:J(t.onPointerMove,W=>{if(!j.current)return;const z=W.clientX-j.current.x,K=W.clientY-j.current.y,$=!!w.current,D=["left","right"].includes(g.swipeDirection),A=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Q=D?A(0,z):0,ee=D?0:A(0,K),T=W.pointerType==="touch"?10:2,Y={x:Q,y:ee},se={originalEvent:W,delta:Y};$?(w.current=Y,Hn(Wv,h,se,{discrete:!1})):cd(Y,g.swipeDirection,T)?(w.current=Y,Hn(zv,u,se,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(z)>T||Math.abs(K)>T)&&(j.current=null)}),onPointerUp:J(t.onPointerUp,W=>{const z=w.current,K=W.target;if(K.hasPointerCapture(W.pointerId)&&K.releasePointerCapture(W.pointerId),w.current=null,j.current=null,z){const $=W.currentTarget,D={originalEvent:W,delta:z};cd(z,g.swipeDirection,g.swipeThreshold)?Hn(qv,f,D,{discrete:!0}):Hn(Hv,x,D,{discrete:!0}),$.addEventListener("click",A=>A.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Xv=t=>{const{__scopeToast:s,children:r,...n}=t,a=so(Cn,s),[o,i]=m.useState(!1),[l,c]=m.useState(!1);return Qv(()=>i(!0)),m.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:e.jsx(kn,{asChild:!0,children:e.jsx(to,{...n,children:o&&e.jsxs(e.Fragment,{children:[a.label," ",r]})})})},Yv="ToastTitle",lm=m.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(oe.div,{...n,ref:s})});lm.displayName=Yv;var Jv="ToastDescription",cm=m.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t;return e.jsx(oe.div,{...n,ref:s})});cm.displayName=Jv;var dm="ToastAction",um=m.forwardRef((t,s)=>{const{altText:r,...n}=t;return r.trim()?e.jsx(hm,{altText:r,asChild:!0,children:e.jsx(kl,{...n,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${dm}\`. Expected non-empty \`string\`.`),null)});um.displayName=dm;var mm="ToastClose",kl=m.forwardRef((t,s)=>{const{__scopeToast:r,...n}=t,a=Vv(mm,r);return e.jsx(hm,{asChild:!0,children:e.jsx(oe.button,{type:"button",...n,ref:s,onClick:J(t.onClick,a.onClose)})})});kl.displayName=mm;var hm=m.forwardRef((t,s)=>{const{__scopeToast:r,altText:n,...a}=t;return e.jsx(oe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:s})});function fm(t){const s=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&s.push(n.textContent),Zv(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!a)if(o){const i=n.dataset.radixToastAnnounceAlt;i&&s.push(i)}else s.push(...fm(n))}}),s}function Hn(t,s,r,{discrete:n}){const a=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});s&&a.addEventListener(t,s,{once:!0}),n?wl(a,o):a.dispatchEvent(o)}var cd=(t,s,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),o=n>a;return s==="left"||s==="right"?o&&n>r:!o&&a>r};function Qv(t=()=>{}){const s=nt(t);Be(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[s])}function Zv(t){return t.nodeType===t.ELEMENT_NODE}function e0(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Xo(t){const s=document.activeElement;return t.some(r=>r===s?!0:(r.focus(),document.activeElement!==s))}var t0=rm,xm=am,pm=im,gm=lm,bm=cm,vm=um,ym=kl;const dd=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ud=Fu,kr=(t,s)=>r=>{var n;if((s==null?void 0:s.variants)==null)return ud(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:o}=s,i=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],h=o==null?void 0:o[d];if(u===null)return null;const x=dd(u)||dd(h);return a[d][x]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,x]=u;return x===void 0||(d[h]=x),d},{}),c=s==null||(n=s.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:x,...f}=u;return Object.entries(f).every(b=>{let[g,p]=b;return Array.isArray(p)?p.includes({...o,...l}[g]):{...o,...l}[g]===p})?[...d,h,x]:d},[]);return ud(t,i,c,r==null?void 0:r.class,r==null?void 0:r.className)},Cl="-",s0=t=>{const s=n0(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:i=>{const l=i.split(Cl);return l[0]===""&&l.length!==1&&l.shift(),jm(l,s)||r0(i)},getConflictingClassGroupIds:(i,l)=>{const c=r[i]||[];return l&&n[i]?[...c,...n[i]]:c}}},jm=(t,s)=>{var i;if(t.length===0)return s.classGroupId;const r=t[0],n=s.nextPart.get(r),a=n?jm(t.slice(1),n):void 0;if(a)return a;if(s.validators.length===0)return;const o=t.join(Cl);return(i=s.validators.find(({validator:l})=>l(o)))==null?void 0:i.classGroupId},md=/^\[(.+)\]$/,r0=t=>{if(md.test(t)){const s=md.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},n0=t=>{const{theme:s,prefix:r}=t,n={nextPart:new Map,validators:[]};return o0(Object.entries(t.classGroups),r).forEach(([o,i])=>{Ri(i,n,o,s)}),n},Ri=(t,s,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const o=a===""?s:hd(s,a);o.classGroupId=r;return}if(typeof a=="function"){if(a0(a)){Ri(a(n),s,r,n);return}s.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([o,i])=>{Ri(i,hd(s,o),r,n)})})},hd=(t,s)=>{let r=t;return s.split(Cl).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},a0=t=>t.isThemeGetter,o0=(t,s)=>s?t.map(([r,n])=>{const a=n.map(o=>typeof o=="string"?s+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,l])=>[s+i,l])):o);return[r,a]}):t,i0=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,n=new Map;const a=(o,i)=>{r.set(o,i),s++,s>t&&(s=0,n=r,r=new Map)};return{get(o){let i=r.get(o);if(i!==void 0)return i;if((i=n.get(o))!==void 0)return a(o,i),i},set(o,i){r.has(o)?r.set(o,i):a(o,i)}}},wm="!",l0=t=>{const{separator:s,experimentalParseClassName:r}=t,n=s.length===1,a=s[0],o=s.length,i=l=>{const c=[];let d=0,u=0,h;for(let p=0;p<l.length;p++){let y=l[p];if(d===0){if(y===a&&(n||l.slice(p,p+o)===s)){c.push(l.slice(u,p)),u=p+o;continue}if(y==="/"){h=p;continue}}y==="["?d++:y==="]"&&d--}const x=c.length===0?l:l.substring(u),f=x.startsWith(wm),b=f?x.substring(1):x,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:b,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:i}):i},c0=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(n=>{n[0]==="["?(s.push(...r.sort(),n),r=[]):r.push(n)}),s.push(...r.sort()),s},d0=t=>({cache:i0(t.cacheSize),parseClassName:l0(t),...s0(t)}),u0=/\s+/,m0=(t,s)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=s,o=[],i=t.trim().split(u0);let l="";for(let c=i.length-1;c>=0;c-=1){const d=i[c],{modifiers:u,hasImportantModifier:h,baseClassName:x,maybePostfixModifierPosition:f}=r(d);let b=!!f,g=n(b?x.substring(0,f):x);if(!g){if(!b){l=d+(l.length>0?" "+l:l);continue}if(g=n(x),!g){l=d+(l.length>0?" "+l:l);continue}b=!1}const p=c0(u).join(":"),y=h?p+wm:p,v=y+g;if(o.includes(v))continue;o.push(v);const j=a(g,b);for(let w=0;w<j.length;++w){const k=j[w];o.push(y+k)}l=d+(l.length>0?" "+l:l)}return l};function h0(){let t=0,s,r,n="";for(;t<arguments.length;)(s=arguments[t++])&&(r=Nm(s))&&(n&&(n+=" "),n+=r);return n}const Nm=t=>{if(typeof t=="string")return t;let s,r="";for(let n=0;n<t.length;n++)t[n]&&(s=Nm(t[n]))&&(r&&(r+=" "),r+=s);return r};function f0(t,...s){let r,n,a,o=i;function i(c){const d=s.reduce((u,h)=>h(u),t());return r=d0(d),n=r.cache.get,a=r.cache.set,o=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=m0(c,r);return a(c,u),u}return function(){return o(h0.apply(null,arguments))}}const Ie=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},Sm=/^\[(?:([a-z-]+):)?(.+)\]$/i,x0=/^\d+\/\d+$/,p0=new Set(["px","full","screen"]),g0=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,b0=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,v0=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,y0=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,j0=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zt=t=>fr(t)||p0.has(t)||x0.test(t),xs=t=>Cr(t,"length",A0),fr=t=>!!t&&!Number.isNaN(Number(t)),Yo=t=>Cr(t,"number",fr),Lr=t=>!!t&&Number.isInteger(Number(t)),w0=t=>t.endsWith("%")&&fr(t.slice(0,-1)),ye=t=>Sm.test(t),ps=t=>g0.test(t),N0=new Set(["length","size","percentage"]),S0=t=>Cr(t,N0,km),k0=t=>Cr(t,"position",km),C0=new Set(["image","url"]),R0=t=>Cr(t,C0,T0),_0=t=>Cr(t,"",E0),Fr=()=>!0,Cr=(t,s,r)=>{const n=Sm.exec(t);return n?n[1]?typeof s=="string"?n[1]===s:s.has(n[1]):r(n[2]):!1},A0=t=>b0.test(t)&&!v0.test(t),km=()=>!1,E0=t=>y0.test(t),T0=t=>j0.test(t),P0=()=>{const t=Ie("colors"),s=Ie("spacing"),r=Ie("blur"),n=Ie("brightness"),a=Ie("borderColor"),o=Ie("borderRadius"),i=Ie("borderSpacing"),l=Ie("borderWidth"),c=Ie("contrast"),d=Ie("grayscale"),u=Ie("hueRotate"),h=Ie("invert"),x=Ie("gap"),f=Ie("gradientColorStops"),b=Ie("gradientColorStopPositions"),g=Ie("inset"),p=Ie("margin"),y=Ie("opacity"),v=Ie("padding"),j=Ie("saturate"),w=Ie("scale"),k=Ie("sepia"),R=Ie("skew"),C=Ie("space"),E=Ie("translate"),M=()=>["auto","contain","none"],B=()=>["auto","hidden","clip","visible","scroll"],q=()=>["auto",ye,s],I=()=>[ye,s],te=()=>["",Zt,xs],W=()=>["auto",fr,ye],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],K=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],A=()=>["","0",ye],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[fr,ye];return{cacheSize:500,separator:":",theme:{colors:[Fr],spacing:[Zt,xs],blur:["none","",ps,ye],brightness:ee(),borderColor:[t],borderRadius:["none","","full",ps,ye],borderSpacing:I(),borderWidth:te(),contrast:ee(),grayscale:A(),hueRotate:ee(),invert:A(),gap:I(),gradientColorStops:[t],gradientColorStopPositions:[w0,xs],inset:q(),margin:q(),opacity:ee(),padding:I(),saturate:ee(),scale:ee(),sepia:A(),skew:ee(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[ps]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),ye]}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lr,ye]}],basis:[{basis:q()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:A()}],shrink:[{shrink:A()}],order:[{order:["first","last","none",Lr,ye]}],"grid-cols":[{"grid-cols":[Fr]}],"col-start-end":[{col:["auto",{span:["full",Lr,ye]},ye]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Fr]}],"row-start-end":[{row:["auto",{span:[Lr,ye]},ye]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,s]}],"min-w":[{"min-w":[ye,s,"min","max","fit"]}],"max-w":[{"max-w":[ye,s,"none","full","min","max","fit","prose",{screen:[ps]},ps]}],h:[{h:[ye,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,s,"auto","min","max","fit"]}],"font-size":[{text:["base",ps,xs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yo]}],"font-family":[{font:[Fr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",fr,Yo]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zt,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zt,xs]}],"underline-offset":[{"underline-offset":["auto",Zt,ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),k0]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",S0]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},R0]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...K(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:K()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...K()]}],"outline-offset":[{"outline-offset":[Zt,ye]}],"outline-w":[{outline:[Zt,xs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Zt,xs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ps,_0]}],"shadow-color":[{shadow:[Fr]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ps,ye]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[j]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Lr,ye]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Zt,xs,Yo]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},I0=f0(P0);function O(...t){return I0(Fu(t))}function ke(t){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t)}function Cm(t,s="short"){const r=new Date(t);return s==="short"?r.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"}):r.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Rm(t){return new Date(t).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1})}function D0(t){return!t||t==="unknown"||t==="undefined"||t==="null"||t===""?"Not specified":t}function O0(t){return!t||t==="unknown"||t==="undefined"||t==="null"||t===""?"Anonymous User":t}function rs(t){const s=t.user_name||t.user;return O0(s)}function ns(t){const s=t.payment_method||t.metodeBayar;return D0(s)}function Qe(t){const s=t.order_id||t.reffId;return!s||s==="unknown"||s==="undefined"||s==="null"||s===""?"N/A":s}function _i(t){return!t||t==="unknown"||t==="undefined"||t==="null"||t===""?"outline":{DANA:"default",OVO:"secondary",GOPAY:"outline",QRIS:"destructive",SALDO:"default",CASH:"secondary",BANK_TRANSFER:"outline",CREDIT_CARD:"destructive",DEBIT_CARD:"outline",E_WALLET:"secondary",BANK:"outline",TRANSFER:"outline"}[t]||"secondary"}const M0=t0,_m=m.forwardRef(({className:t,...s},r)=>e.jsx(xm,{ref:r,className:O("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));_m.displayName=xm.displayName;const L0=kr("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Am=m.forwardRef(({className:t,variant:s,...r},n)=>e.jsx(pm,{ref:n,className:O(L0({variant:s}),t),...r}));Am.displayName=pm.displayName;const F0=m.forwardRef(({className:t,...s},r)=>e.jsx(vm,{ref:r,className:O("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));F0.displayName=vm.displayName;const Em=m.forwardRef(({className:t,...s},r)=>e.jsx(ym,{ref:r,className:O("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(pl,{className:"h-4 w-4"})}));Em.displayName=ym.displayName;const Tm=m.forwardRef(({className:t,...s},r)=>e.jsx(gm,{ref:r,className:O("text-sm font-semibold",t),...s}));Tm.displayName=gm.displayName;const Pm=m.forwardRef(({className:t,...s},r)=>e.jsx(bm,{ref:r,className:O("text-sm opacity-90",t),...s}));Pm.displayName=bm.displayName;function $0(){const{toasts:t}=Sn();return e.jsxs(M0,{children:[t.map(function({id:s,title:r,description:n,action:a,...o}){return e.jsxs(Am,{...o,children:[e.jsxs("div",{className:"grid gap-1",children:[r&&e.jsx(Tm,{children:r}),n&&e.jsx(Pm,{children:n})]}),a,e.jsx(Em,{})]},s)}),e.jsx(_m,{})]})}var fd=["light","dark"],B0="(prefers-color-scheme: dark)",U0=m.createContext(void 0),z0={setTheme:t=>{},themes:[]},W0=()=>{var t;return(t=m.useContext(U0))!=null?t:z0};m.memo(({forcedTheme:t,storageKey:s,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:o,value:i,attrs:l,nonce:c})=>{let d=o==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(b=>`'${b}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=a?fd.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",x=(b,g=!1,p=!0)=>{let y=i?i[b]:b,v=g?b+"|| ''":`'${y}'`,j="";return a&&p&&!g&&fd.includes(b)&&(j+=`d.style.colorScheme = '${b}';`),r==="class"?g||y?j+=`c.add(${v})`:j+="null":y&&(j+=`d[s](n,${v})`),j},f=t?`!function(){${u}${x(t)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${s}');if('system'===e||(!e&&${d})){var t='${B0}',m=window.matchMedia(t);if(m.media!==t||m.matches){${x("dark")}}else{${x("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${x(i?"x[e]":"e",!0)}}${d?"":"else{"+x(o,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${s}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${x(i?"x[e]":"e",!0)}}else{${x(o,!1,!1)};}${h}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var H0=t=>{switch(t){case"success":return V0;case"info":return X0;case"warning":return G0;case"error":return Y0;default:return null}},q0=Array(12).fill(0),K0=({visible:t,className:s})=>G.createElement("div",{className:["sonner-loading-wrapper",s].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},q0.map((r,n)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),V0=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),G0=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),X0=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Y0=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),J0=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Q0=()=>{let[t,s]=G.useState(document.hidden);return G.useEffect(()=>{let r=()=>{s(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Ai=1,Z0=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let s=this.subscribers.indexOf(t);this.subscribers.splice(s,1)}),this.publish=t=>{this.subscribers.forEach(s=>s(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var s;let{message:r,...n}=t,a=typeof(t==null?void 0:t.id)=="number"||((s=t.id)==null?void 0:s.length)>0?t.id:Ai++,o=this.toasts.find(l=>l.id===a),i=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...t,id:a,title:r}),{...l,...t,id:a,dismissible:i,title:r}):l):this.addToast({title:r,...n,dismissible:i,id:a}),a},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(s=>{this.subscribers.forEach(r=>r({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:t,dismiss:!0})),t),this.message=(t,s)=>this.create({...s,message:t}),this.error=(t,s)=>this.create({...s,message:t,type:"error"}),this.success=(t,s)=>this.create({...s,type:"success",message:t}),this.info=(t,s)=>this.create({...s,type:"info",message:t}),this.warning=(t,s)=>this.create({...s,type:"warning",message:t}),this.loading=(t,s)=>this.create({...s,type:"loading",message:t}),this.promise=(t,s)=>{if(!s)return;let r;s.loading!==void 0&&(r=this.create({...s,promise:t,type:"loading",message:s.loading,description:typeof s.description!="function"?s.description:void 0}));let n=t instanceof Promise?t:t(),a=r!==void 0,o,i=n.then(async c=>{if(o=["resolve",c],G.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(ty(c)&&!c.ok){a=!1;let d=typeof s.error=="function"?await s.error(`HTTP error! status: ${c.status}`):s.error,u=typeof s.description=="function"?await s.description(`HTTP error! status: ${c.status}`):s.description;this.create({id:r,type:"error",message:d,description:u})}else if(s.success!==void 0){a=!1;let d=typeof s.success=="function"?await s.success(c):s.success,u=typeof s.description=="function"?await s.description(c):s.description;this.create({id:r,type:"success",message:d,description:u})}}).catch(async c=>{if(o=["reject",c],s.error!==void 0){a=!1;let d=typeof s.error=="function"?await s.error(c):s.error,u=typeof s.description=="function"?await s.description(c):s.description;this.create({id:r,type:"error",message:d,description:u})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=s.finally)==null||c.call(s)}),l=()=>new Promise((c,d)=>i.then(()=>o[0]==="reject"?d(o[1]):c(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,s)=>{let r=(s==null?void 0:s.id)||Ai++;return this.create({jsx:t(r),id:r,...s}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},it=new Z0,ey=(t,s)=>{let r=(s==null?void 0:s.id)||Ai++;return it.addToast({title:t,...s,id:r}),r},ty=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",sy=ey,ry=()=>it.toasts,ny=()=>it.getActiveToasts();Object.assign(sy,{success:it.success,info:it.info,warning:it.warning,error:it.error,custom:it.custom,message:it.message,promise:it.promise,dismiss:it.dismiss,loading:it.loading},{getHistory:ry,getToasts:ny});function ay(t,{insertAt:s}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",s==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}ay(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function qn(t){return t.label!==void 0}var oy=3,iy="32px",ly="16px",xd=4e3,cy=356,dy=14,uy=20,my=200;function Tt(...t){return t.filter(Boolean).join(" ")}function hy(t){let[s,r]=t.split("-"),n=[];return s&&n.push(s),r&&n.push(r),n}var fy=t=>{var s,r,n,a,o,i,l,c,d,u,h;let{invert:x,toast:f,unstyled:b,interacting:g,setHeights:p,visibleToasts:y,heights:v,index:j,toasts:w,expanded:k,removeToast:R,defaultRichColors:C,closeButton:E,style:M,cancelButtonStyle:B,actionButtonStyle:q,className:I="",descriptionClassName:te="",duration:W,position:z,gap:K,loadingIcon:$,expandByDefault:D,classNames:A,icons:Q,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:T}=t,[Y,se]=G.useState(null),[H,ne]=G.useState(null),[U,le]=G.useState(!1),[je,ce]=G.useState(!1),[ae,de]=G.useState(!1),[Je,yt]=G.useState(!1),[As,us]=G.useState(!1),[Es,Or]=G.useState(0),[Qs,zc]=G.useState(0),Mr=G.useRef(f.duration||W||xd),Wc=G.useRef(null),Ts=G.useRef(null),kb=j===0,Cb=j+1<=y,jt=f.type,Zs=f.dismissible!==!1,Rb=f.className||"",_b=f.descriptionClassName||"",Un=G.useMemo(()=>v.findIndex(be=>be.toastId===f.id)||0,[v,f.id]),Ab=G.useMemo(()=>{var be;return(be=f.closeButton)!=null?be:E},[f.closeButton,E]),Hc=G.useMemo(()=>f.duration||W||xd,[f.duration,W]),Ho=G.useRef(0),er=G.useRef(0),qc=G.useRef(0),tr=G.useRef(null),[Eb,Tb]=z.split("-"),Kc=G.useMemo(()=>v.reduce((be,Te,Le)=>Le>=Un?be:be+Te.height,0),[v,Un]),Vc=Q0(),Pb=f.invert||x,qo=jt==="loading";er.current=G.useMemo(()=>Un*K+Kc,[Un,Kc]),G.useEffect(()=>{Mr.current=Hc},[Hc]),G.useEffect(()=>{le(!0)},[]),G.useEffect(()=>{let be=Ts.current;if(be){let Te=be.getBoundingClientRect().height;return zc(Te),p(Le=>[{toastId:f.id,height:Te,position:f.position},...Le]),()=>p(Le=>Le.filter(_t=>_t.toastId!==f.id))}},[p,f.id]),G.useLayoutEffect(()=>{if(!U)return;let be=Ts.current,Te=be.style.height;be.style.height="auto";let Le=be.getBoundingClientRect().height;be.style.height=Te,zc(Le),p(_t=>_t.find(At=>At.toastId===f.id)?_t.map(At=>At.toastId===f.id?{...At,height:Le}:At):[{toastId:f.id,height:Le,position:f.position},..._t])},[U,f.title,f.description,p,f.id]);let ms=G.useCallback(()=>{ce(!0),Or(er.current),p(be=>be.filter(Te=>Te.toastId!==f.id)),setTimeout(()=>{R(f)},my)},[f,R,p,er]);G.useEffect(()=>{if(f.promise&&jt==="loading"||f.duration===1/0||f.type==="loading")return;let be;return k||g||T&&Vc?(()=>{if(qc.current<Ho.current){let Te=new Date().getTime()-Ho.current;Mr.current=Mr.current-Te}qc.current=new Date().getTime()})():Mr.current!==1/0&&(Ho.current=new Date().getTime(),be=setTimeout(()=>{var Te;(Te=f.onAutoClose)==null||Te.call(f,f),ms()},Mr.current)),()=>clearTimeout(be)},[k,g,f,jt,T,Vc,ms]),G.useEffect(()=>{f.delete&&ms()},[ms,f.delete]);function Ib(){var be,Te,Le;return Q!=null&&Q.loading?G.createElement("div",{className:Tt(A==null?void 0:A.loader,(be=f==null?void 0:f.classNames)==null?void 0:be.loader,"sonner-loader"),"data-visible":jt==="loading"},Q.loading):$?G.createElement("div",{className:Tt(A==null?void 0:A.loader,(Te=f==null?void 0:f.classNames)==null?void 0:Te.loader,"sonner-loader"),"data-visible":jt==="loading"},$):G.createElement(K0,{className:Tt(A==null?void 0:A.loader,(Le=f==null?void 0:f.classNames)==null?void 0:Le.loader),visible:jt==="loading"})}return G.createElement("li",{tabIndex:0,ref:Ts,className:Tt(I,Rb,A==null?void 0:A.toast,(s=f==null?void 0:f.classNames)==null?void 0:s.toast,A==null?void 0:A.default,A==null?void 0:A[jt],(r=f==null?void 0:f.classNames)==null?void 0:r[jt]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:C,"data-styled":!(f.jsx||f.unstyled||b),"data-mounted":U,"data-promise":!!f.promise,"data-swiped":As,"data-removed":je,"data-visible":Cb,"data-y-position":Eb,"data-x-position":Tb,"data-index":j,"data-front":kb,"data-swiping":ae,"data-dismissible":Zs,"data-type":jt,"data-invert":Pb,"data-swipe-out":Je,"data-swipe-direction":H,"data-expanded":!!(k||D&&U),style:{"--index":j,"--toasts-before":j,"--z-index":w.length-j,"--offset":`${je?Es:er.current}px`,"--initial-height":D?"auto":`${Qs}px`,...M,...f.style},onDragEnd:()=>{de(!1),se(null),tr.current=null},onPointerDown:be=>{qo||!Zs||(Wc.current=new Date,Or(er.current),be.target.setPointerCapture(be.pointerId),be.target.tagName!=="BUTTON"&&(de(!0),tr.current={x:be.clientX,y:be.clientY}))},onPointerUp:()=>{var be,Te,Le,_t;if(Je||!Zs)return;tr.current=null;let At=Number(((be=Ts.current)==null?void 0:be.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),hs=Number(((Te=Ts.current)==null?void 0:Te.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ps=new Date().getTime()-((Le=Wc.current)==null?void 0:Le.getTime()),Et=Y==="x"?At:hs,fs=Math.abs(Et)/Ps;if(Math.abs(Et)>=uy||fs>.11){Or(er.current),(_t=f.onDismiss)==null||_t.call(f,f),ne(Y==="x"?At>0?"right":"left":hs>0?"down":"up"),ms(),yt(!0),us(!1);return}de(!1),se(null)},onPointerMove:be=>{var Te,Le,_t,At;if(!tr.current||!Zs||((Te=window.getSelection())==null?void 0:Te.toString().length)>0)return;let hs=be.clientY-tr.current.y,Ps=be.clientX-tr.current.x,Et=(Le=t.swipeDirections)!=null?Le:hy(z);!Y&&(Math.abs(Ps)>1||Math.abs(hs)>1)&&se(Math.abs(Ps)>Math.abs(hs)?"x":"y");let fs={x:0,y:0};Y==="y"?(Et.includes("top")||Et.includes("bottom"))&&(Et.includes("top")&&hs<0||Et.includes("bottom")&&hs>0)&&(fs.y=hs):Y==="x"&&(Et.includes("left")||Et.includes("right"))&&(Et.includes("left")&&Ps<0||Et.includes("right")&&Ps>0)&&(fs.x=Ps),(Math.abs(fs.x)>0||Math.abs(fs.y)>0)&&us(!0),(_t=Ts.current)==null||_t.style.setProperty("--swipe-amount-x",`${fs.x}px`),(At=Ts.current)==null||At.style.setProperty("--swipe-amount-y",`${fs.y}px`)}},Ab&&!f.jsx?G.createElement("button",{"aria-label":ee,"data-disabled":qo,"data-close-button":!0,onClick:qo||!Zs?()=>{}:()=>{var be;ms(),(be=f.onDismiss)==null||be.call(f,f)},className:Tt(A==null?void 0:A.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(o=Q==null?void 0:Q.close)!=null?o:J0):null,f.jsx||m.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:G.createElement(G.Fragment,null,jt||f.icon||f.promise?G.createElement("div",{"data-icon":"",className:Tt(A==null?void 0:A.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Ib():null,f.type!=="loading"?f.icon||(Q==null?void 0:Q[jt])||H0(jt):null):null,G.createElement("div",{"data-content":"",className:Tt(A==null?void 0:A.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},G.createElement("div",{"data-title":"",className:Tt(A==null?void 0:A.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?G.createElement("div",{"data-description":"",className:Tt(te,_b,A==null?void 0:A.description,(d=f==null?void 0:f.classNames)==null?void 0:d.description)},typeof f.description=="function"?f.description():f.description):null),m.isValidElement(f.cancel)?f.cancel:f.cancel&&qn(f.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||B,onClick:be=>{var Te,Le;qn(f.cancel)&&Zs&&((Le=(Te=f.cancel).onClick)==null||Le.call(Te,be),ms())},className:Tt(A==null?void 0:A.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,m.isValidElement(f.action)?f.action:f.action&&qn(f.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||q,onClick:be=>{var Te,Le;qn(f.action)&&((Le=(Te=f.action).onClick)==null||Le.call(Te,be),!be.defaultPrevented&&ms())},className:Tt(A==null?void 0:A.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function pd(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function xy(t,s){let r={};return[t,s].forEach((n,a)=>{let o=a===1,i=o?"--mobile-offset":"--offset",l=o?ly:iy;function c(d){["top","right","bottom","left"].forEach(u=>{r[`${i}-${u}`]=typeof d=="number"?`${d}px`:d})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(d=>{n[d]===void 0?r[`${i}-${d}`]=l:r[`${i}-${d}`]=typeof n[d]=="number"?`${n[d]}px`:n[d]}):c(l)}),r}var py=m.forwardRef(function(t,s){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:o,closeButton:i,className:l,offset:c,mobileOffset:d,theme:u="light",richColors:h,duration:x,style:f,visibleToasts:b=oy,toastOptions:g,dir:p=pd(),gap:y=dy,loadingIcon:v,icons:j,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:k}=t,[R,C]=G.useState([]),E=G.useMemo(()=>Array.from(new Set([n].concat(R.filter(T=>T.position).map(T=>T.position)))),[R,n]),[M,B]=G.useState([]),[q,I]=G.useState(!1),[te,W]=G.useState(!1),[z,K]=G.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=G.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),A=G.useRef(null),Q=G.useRef(!1),ee=G.useCallback(T=>{C(Y=>{var se;return(se=Y.find(H=>H.id===T.id))!=null&&se.delete||it.dismiss(T.id),Y.filter(({id:H})=>H!==T.id)})},[]);return G.useEffect(()=>it.subscribe(T=>{if(T.dismiss){C(Y=>Y.map(se=>se.id===T.id?{...se,delete:!0}:se));return}setTimeout(()=>{Mu.flushSync(()=>{C(Y=>{let se=Y.findIndex(H=>H.id===T.id);return se!==-1?[...Y.slice(0,se),{...Y[se],...T},...Y.slice(se+1)]:[T,...Y]})})})}),[]),G.useEffect(()=>{if(u!=="system"){K(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?K("dark"):K("light")),typeof window>"u")return;let T=window.matchMedia("(prefers-color-scheme: dark)");try{T.addEventListener("change",({matches:Y})=>{K(Y?"dark":"light")})}catch{T.addListener(({matches:se})=>{try{K(se?"dark":"light")}catch(H){console.error(H)}})}},[u]),G.useEffect(()=>{R.length<=1&&I(!1)},[R]),G.useEffect(()=>{let T=Y=>{var se,H;a.every(ne=>Y[ne]||Y.code===ne)&&(I(!0),(se=$.current)==null||se.focus()),Y.code==="Escape"&&(document.activeElement===$.current||(H=$.current)!=null&&H.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[a]),G.useEffect(()=>{if($.current)return()=>{A.current&&(A.current.focus({preventScroll:!0}),A.current=null,Q.current=!1)}},[$.current]),G.createElement("section",{ref:s,"aria-label":`${w} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((T,Y)=>{var se;let[H,ne]=T.split("-");return R.length?G.createElement("ol",{key:T,dir:p==="auto"?pd():p,tabIndex:-1,ref:$,className:l,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":H,"data-lifted":q&&R.length>1&&!o,"data-x-position":ne,style:{"--front-toast-height":`${((se=M[0])==null?void 0:se.height)||0}px`,"--width":`${cy}px`,"--gap":`${y}px`,...f,...xy(c,d)},onBlur:U=>{Q.current&&!U.currentTarget.contains(U.relatedTarget)&&(Q.current=!1,A.current&&(A.current.focus({preventScroll:!0}),A.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,A.current=U.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{te||I(!1)},onDragEnd:()=>I(!1),onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},R.filter(U=>!U.position&&Y===0||U.position===T).map((U,le)=>{var je,ce;return G.createElement(fy,{key:U.id,icons:j,index:le,toast:U,defaultRichColors:h,duration:(je=g==null?void 0:g.duration)!=null?je:x,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:b,closeButton:(ce=g==null?void 0:g.closeButton)!=null?ce:i,interacting:te,position:T,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:ee,toasts:R.filter(ae=>ae.position==U.position),heights:M.filter(ae=>ae.position==U.position),setHeights:B,expandByDefault:o,gap:y,loadingIcon:v,expanded:q,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const gy=({...t})=>{const{theme:s="system"}=W0();return e.jsx(py,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var by=Lu[" useId ".trim().toString()]||(()=>{}),vy=0;function Dt(t){const[s,r]=m.useState(by());return Be(()=>{t||r(n=>n??String(vy++))},[t]),t||(s?`radix-${s}`:"")}const yy=["top","right","bottom","left"],ks=Math.min,bt=Math.max,Aa=Math.round,Kn=Math.floor,Gt=t=>({x:t,y:t}),jy={left:"right",right:"left",bottom:"top",top:"bottom"},wy={start:"end",end:"start"};function Ei(t,s,r){return bt(t,ks(s,r))}function ls(t,s){return typeof t=="function"?t(s):t}function cs(t){return t.split("-")[0]}function Rr(t){return t.split("-")[1]}function Rl(t){return t==="x"?"y":"x"}function _l(t){return t==="y"?"height":"width"}const Ny=new Set(["top","bottom"]);function Kt(t){return Ny.has(cs(t))?"y":"x"}function Al(t){return Rl(Kt(t))}function Sy(t,s,r){r===void 0&&(r=!1);const n=Rr(t),a=Al(t),o=_l(a);let i=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return s.reference[o]>s.floating[o]&&(i=Ea(i)),[i,Ea(i)]}function ky(t){const s=Ea(t);return[Ti(t),s,Ti(s)]}function Ti(t){return t.replace(/start|end/g,s=>wy[s])}const gd=["left","right"],bd=["right","left"],Cy=["top","bottom"],Ry=["bottom","top"];function _y(t,s,r){switch(t){case"top":case"bottom":return r?s?bd:gd:s?gd:bd;case"left":case"right":return s?Cy:Ry;default:return[]}}function Ay(t,s,r,n){const a=Rr(t);let o=_y(cs(t),r==="start",n);return a&&(o=o.map(i=>i+"-"+a),s&&(o=o.concat(o.map(Ti)))),o}function Ea(t){return t.replace(/left|right|bottom|top/g,s=>jy[s])}function Ey(t){return{top:0,right:0,bottom:0,left:0,...t}}function Im(t){return typeof t!="number"?Ey(t):{top:t,right:t,bottom:t,left:t}}function Ta(t){const{x:s,y:r,width:n,height:a}=t;return{width:n,height:a,top:r,left:s,right:s+n,bottom:r+a,x:s,y:r}}function vd(t,s,r){let{reference:n,floating:a}=t;const o=Kt(s),i=Al(s),l=_l(i),c=cs(s),d=o==="y",u=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,x=n[l]/2-a[l]/2;let f;switch(c){case"top":f={x:u,y:n.y-a.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:h};break;case"left":f={x:n.x-a.width,y:h};break;default:f={x:n.x,y:n.y}}switch(Rr(s)){case"start":f[i]-=x*(r&&d?-1:1);break;case"end":f[i]+=x*(r&&d?-1:1);break}return f}const Ty=async(t,s,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(s));let d=await i.getElementRects({reference:t,floating:s,strategy:a}),{x:u,y:h}=vd(d,n,c),x=n,f={},b=0;for(let g=0;g<l.length;g++){const{name:p,fn:y}=l[g],{x:v,y:j,data:w,reset:k}=await y({x:u,y:h,initialPlacement:n,placement:x,strategy:a,middlewareData:f,rects:d,platform:i,elements:{reference:t,floating:s}});u=v??u,h=j??h,f={...f,[p]:{...f[p],...w}},k&&b<=50&&(b++,typeof k=="object"&&(k.placement&&(x=k.placement),k.rects&&(d=k.rects===!0?await i.getElementRects({reference:t,floating:s,strategy:a}):k.rects),{x:u,y:h}=vd(d,x,c)),g=-1)}return{x:u,y:h,placement:x,strategy:a,middlewareData:f}};async function un(t,s){var r;s===void 0&&(s={});const{x:n,y:a,platform:o,rects:i,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:x=!1,padding:f=0}=ls(s,t),b=Im(f),p=l[x?h==="floating"?"reference":"floating":h],y=Ta(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(p)))==null||r?p:p.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=h==="floating"?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),w=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},k=Ta(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:j,strategy:c}):v);return{top:(y.top-k.top+b.top)/w.y,bottom:(k.bottom-y.bottom+b.bottom)/w.y,left:(y.left-k.left+b.left)/w.x,right:(k.right-y.right+b.right)/w.x}}const Py=t=>({name:"arrow",options:t,async fn(s){const{x:r,y:n,placement:a,rects:o,platform:i,elements:l,middlewareData:c}=s,{element:d,padding:u=0}=ls(t,s)||{};if(d==null)return{};const h=Im(u),x={x:r,y:n},f=Al(a),b=_l(f),g=await i.getDimensions(d),p=f==="y",y=p?"top":"left",v=p?"bottom":"right",j=p?"clientHeight":"clientWidth",w=o.reference[b]+o.reference[f]-x[f]-o.floating[b],k=x[f]-o.reference[f],R=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let C=R?R[j]:0;(!C||!await(i.isElement==null?void 0:i.isElement(R)))&&(C=l.floating[j]||o.floating[b]);const E=w/2-k/2,M=C/2-g[b]/2-1,B=ks(h[y],M),q=ks(h[v],M),I=B,te=C-g[b]-q,W=C/2-g[b]/2+E,z=Ei(I,W,te),K=!c.arrow&&Rr(a)!=null&&W!==z&&o.reference[b]/2-(W<I?B:q)-g[b]/2<0,$=K?W<I?W-I:W-te:0;return{[f]:x[f]+$,data:{[f]:z,centerOffset:W-z-$,...K&&{alignmentOffset:$}},reset:K}}}),Iy=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var r,n;const{placement:a,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:d}=s,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:x,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:g=!0,...p}=ls(t,s);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=cs(a),v=Kt(l),j=cs(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),k=x||(j||!g?[Ea(l)]:ky(l)),R=b!=="none";!x&&R&&k.push(...Ay(l,g,b,w));const C=[l,...k],E=await un(s,p),M=[];let B=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&M.push(E[y]),h){const W=Sy(a,i,w);M.push(E[W[0]],E[W[1]])}if(B=[...B,{placement:a,overflows:M}],!M.every(W=>W<=0)){var q,I;const W=(((q=o.flip)==null?void 0:q.index)||0)+1,z=C[W];if(z&&(!(h==="alignment"?v!==Kt(z):!1)||B.every(D=>D.overflows[0]>0&&Kt(D.placement)===v)))return{data:{index:W,overflows:B},reset:{placement:z}};let K=(I=B.filter($=>$.overflows[0]<=0).sort(($,D)=>$.overflows[1]-D.overflows[1])[0])==null?void 0:I.placement;if(!K)switch(f){case"bestFit":{var te;const $=(te=B.filter(D=>{if(R){const A=Kt(D.placement);return A===v||A==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(A=>A>0).reduce((A,Q)=>A+Q,0)]).sort((D,A)=>D[1]-A[1])[0])==null?void 0:te[0];$&&(K=$);break}case"initialPlacement":K=l;break}if(a!==K)return{reset:{placement:K}}}return{}}}};function yd(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function jd(t){return yy.some(s=>t[s]>=0)}const Dy=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:r}=s,{strategy:n="referenceHidden",...a}=ls(t,s);switch(n){case"referenceHidden":{const o=await un(s,{...a,elementContext:"reference"}),i=yd(o,r.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:jd(i)}}}case"escaped":{const o=await un(s,{...a,altBoundary:!0}),i=yd(o,r.floating);return{data:{escapedOffsets:i,escaped:jd(i)}}}default:return{}}}}},Dm=new Set(["left","top"]);async function Oy(t,s){const{placement:r,platform:n,elements:a}=t,o=await(n.isRTL==null?void 0:n.isRTL(a.floating)),i=cs(r),l=Rr(r),c=Kt(r)==="y",d=Dm.has(i)?-1:1,u=o&&c?-1:1,h=ls(s,t);let{mainAxis:x,crossAxis:f,alignmentAxis:b}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof b=="number"&&(f=l==="end"?b*-1:b),c?{x:f*u,y:x*d}:{x:x*d,y:f*u}}const My=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var r,n;const{x:a,y:o,placement:i,middlewareData:l}=s,c=await Oy(s,t);return i===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:o+c.y,data:{...c,placement:i}}}}},Ly=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:r,y:n,placement:a}=s,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:p=>{let{x:y,y:v}=p;return{x:y,y:v}}},...c}=ls(t,s),d={x:r,y:n},u=await un(s,c),h=Kt(cs(a)),x=Rl(h);let f=d[x],b=d[h];if(o){const p=x==="y"?"top":"left",y=x==="y"?"bottom":"right",v=f+u[p],j=f-u[y];f=Ei(v,f,j)}if(i){const p=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=b+u[p],j=b-u[y];b=Ei(v,b,j)}const g=l.fn({...s,[x]:f,[h]:b});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[x]:o,[h]:i}}}}}},Fy=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:r,y:n,placement:a,rects:o,middlewareData:i}=s,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=ls(t,s),u={x:r,y:n},h=Kt(a),x=Rl(h);let f=u[x],b=u[h];const g=ls(l,s),p=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const j=x==="y"?"height":"width",w=o.reference[x]-o.floating[j]+p.mainAxis,k=o.reference[x]+o.reference[j]-p.mainAxis;f<w?f=w:f>k&&(f=k)}if(d){var y,v;const j=x==="y"?"width":"height",w=Dm.has(cs(a)),k=o.reference[h]-o.floating[j]+(w&&((y=i.offset)==null?void 0:y[h])||0)+(w?0:p.crossAxis),R=o.reference[h]+o.reference[j]+(w?0:((v=i.offset)==null?void 0:v[h])||0)-(w?p.crossAxis:0);b<k?b=k:b>R&&(b=R)}return{[x]:f,[h]:b}}}},$y=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var r,n;const{placement:a,rects:o,platform:i,elements:l}=s,{apply:c=()=>{},...d}=ls(t,s),u=await un(s,d),h=cs(a),x=Rr(a),f=Kt(a)==="y",{width:b,height:g}=o.floating;let p,y;h==="top"||h==="bottom"?(p=h,y=x===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,p=x==="end"?"top":"bottom");const v=g-u.top-u.bottom,j=b-u.left-u.right,w=ks(g-u[p],v),k=ks(b-u[y],j),R=!s.middlewareData.shift;let C=w,E=k;if((r=s.middlewareData.shift)!=null&&r.enabled.x&&(E=j),(n=s.middlewareData.shift)!=null&&n.enabled.y&&(C=v),R&&!x){const B=bt(u.left,0),q=bt(u.right,0),I=bt(u.top,0),te=bt(u.bottom,0);f?E=b-2*(B!==0||q!==0?B+q:bt(u.left,u.right)):C=g-2*(I!==0||te!==0?I+te:bt(u.top,u.bottom))}await c({...s,availableWidth:E,availableHeight:C});const M=await i.getDimensions(l.floating);return b!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function ro(){return typeof window<"u"}function _r(t){return Om(t)?(t.nodeName||"").toLowerCase():"#document"}function vt(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Qt(t){var s;return(s=(Om(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function Om(t){return ro()?t instanceof Node||t instanceof vt(t).Node:!1}function Mt(t){return ro()?t instanceof Element||t instanceof vt(t).Element:!1}function Yt(t){return ro()?t instanceof HTMLElement||t instanceof vt(t).HTMLElement:!1}function wd(t){return!ro()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vt(t).ShadowRoot}const By=new Set(["inline","contents"]);function Rn(t){const{overflow:s,overflowX:r,overflowY:n,display:a}=Lt(t);return/auto|scroll|overlay|hidden|clip/.test(s+n+r)&&!By.has(a)}const Uy=new Set(["table","td","th"]);function zy(t){return Uy.has(_r(t))}const Wy=[":popover-open",":modal"];function no(t){return Wy.some(s=>{try{return t.matches(s)}catch{return!1}})}const Hy=["transform","translate","scale","rotate","perspective"],qy=["transform","translate","scale","rotate","perspective","filter"],Ky=["paint","layout","strict","content"];function El(t){const s=Tl(),r=Mt(t)?Lt(t):t;return Hy.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!s&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!s&&(r.filter?r.filter!=="none":!1)||qy.some(n=>(r.willChange||"").includes(n))||Ky.some(n=>(r.contain||"").includes(n))}function Vy(t){let s=Cs(t);for(;Yt(s)&&!yr(s);){if(El(s))return s;if(no(s))return null;s=Cs(s)}return null}function Tl(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Gy=new Set(["html","body","#document"]);function yr(t){return Gy.has(_r(t))}function Lt(t){return vt(t).getComputedStyle(t)}function ao(t){return Mt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Cs(t){if(_r(t)==="html")return t;const s=t.assignedSlot||t.parentNode||wd(t)&&t.host||Qt(t);return wd(s)?s.host:s}function Mm(t){const s=Cs(t);return yr(s)?t.ownerDocument?t.ownerDocument.body:t.body:Yt(s)&&Rn(s)?s:Mm(s)}function mn(t,s,r){var n;s===void 0&&(s=[]),r===void 0&&(r=!0);const a=Mm(t),o=a===((n=t.ownerDocument)==null?void 0:n.body),i=vt(a);if(o){const l=Pi(i);return s.concat(i,i.visualViewport||[],Rn(a)?a:[],l&&r?mn(l):[])}return s.concat(a,mn(a,[],r))}function Pi(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Lm(t){const s=Lt(t);let r=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const a=Yt(t),o=a?t.offsetWidth:r,i=a?t.offsetHeight:n,l=Aa(r)!==o||Aa(n)!==i;return l&&(r=o,n=i),{width:r,height:n,$:l}}function Pl(t){return Mt(t)?t:t.contextElement}function xr(t){const s=Pl(t);if(!Yt(s))return Gt(1);const r=s.getBoundingClientRect(),{width:n,height:a,$:o}=Lm(s);let i=(o?Aa(r.width):r.width)/n,l=(o?Aa(r.height):r.height)/a;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Xy=Gt(0);function Fm(t){const s=vt(t);return!Tl()||!s.visualViewport?Xy:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function Yy(t,s,r){return s===void 0&&(s=!1),!r||s&&r!==vt(t)?!1:s}function Us(t,s,r,n){s===void 0&&(s=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),o=Pl(t);let i=Gt(1);s&&(n?Mt(n)&&(i=xr(n)):i=xr(t));const l=Yy(o,r,n)?Fm(o):Gt(0);let c=(a.left+l.x)/i.x,d=(a.top+l.y)/i.y,u=a.width/i.x,h=a.height/i.y;if(o){const x=vt(o),f=n&&Mt(n)?vt(n):n;let b=x,g=Pi(b);for(;g&&n&&f!==b;){const p=xr(g),y=g.getBoundingClientRect(),v=Lt(g),j=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*p.x,w=y.top+(g.clientTop+parseFloat(v.paddingTop))*p.y;c*=p.x,d*=p.y,u*=p.x,h*=p.y,c+=j,d+=w,b=vt(g),g=Pi(b)}}return Ta({width:u,height:h,x:c,y:d})}function Il(t,s){const r=ao(t).scrollLeft;return s?s.left+r:Us(Qt(t)).left+r}function $m(t,s,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),a=n.left+s.scrollLeft-(r?0:Il(t,n)),o=n.top+s.scrollTop;return{x:a,y:o}}function Jy(t){let{elements:s,rect:r,offsetParent:n,strategy:a}=t;const o=a==="fixed",i=Qt(n),l=s?no(s.floating):!1;if(n===i||l&&o)return r;let c={scrollLeft:0,scrollTop:0},d=Gt(1);const u=Gt(0),h=Yt(n);if((h||!h&&!o)&&((_r(n)!=="body"||Rn(i))&&(c=ao(n)),Yt(n))){const f=Us(n);d=xr(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const x=i&&!h&&!o?$m(i,c,!0):Gt(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+x.x,y:r.y*d.y-c.scrollTop*d.y+u.y+x.y}}function Qy(t){return Array.from(t.getClientRects())}function Zy(t){const s=Qt(t),r=ao(t),n=t.ownerDocument.body,a=bt(s.scrollWidth,s.clientWidth,n.scrollWidth,n.clientWidth),o=bt(s.scrollHeight,s.clientHeight,n.scrollHeight,n.clientHeight);let i=-r.scrollLeft+Il(t);const l=-r.scrollTop;return Lt(n).direction==="rtl"&&(i+=bt(s.clientWidth,n.clientWidth)-a),{width:a,height:o,x:i,y:l}}function ej(t,s){const r=vt(t),n=Qt(t),a=r.visualViewport;let o=n.clientWidth,i=n.clientHeight,l=0,c=0;if(a){o=a.width,i=a.height;const d=Tl();(!d||d&&s==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:o,height:i,x:l,y:c}}const tj=new Set(["absolute","fixed"]);function sj(t,s){const r=Us(t,!0,s==="fixed"),n=r.top+t.clientTop,a=r.left+t.clientLeft,o=Yt(t)?xr(t):Gt(1),i=t.clientWidth*o.x,l=t.clientHeight*o.y,c=a*o.x,d=n*o.y;return{width:i,height:l,x:c,y:d}}function Nd(t,s,r){let n;if(s==="viewport")n=ej(t,r);else if(s==="document")n=Zy(Qt(t));else if(Mt(s))n=sj(s,r);else{const a=Fm(t);n={x:s.x-a.x,y:s.y-a.y,width:s.width,height:s.height}}return Ta(n)}function Bm(t,s){const r=Cs(t);return r===s||!Mt(r)||yr(r)?!1:Lt(r).position==="fixed"||Bm(r,s)}function rj(t,s){const r=s.get(t);if(r)return r;let n=mn(t,[],!1).filter(l=>Mt(l)&&_r(l)!=="body"),a=null;const o=Lt(t).position==="fixed";let i=o?Cs(t):t;for(;Mt(i)&&!yr(i);){const l=Lt(i),c=El(i);!c&&l.position==="fixed"&&(a=null),(o?!c&&!a:!c&&l.position==="static"&&!!a&&tj.has(a.position)||Rn(i)&&!c&&Bm(t,i))?n=n.filter(u=>u!==i):a=l,i=Cs(i)}return s.set(t,n),n}function nj(t){let{element:s,boundary:r,rootBoundary:n,strategy:a}=t;const i=[...r==="clippingAncestors"?no(s)?[]:rj(s,this._c):[].concat(r),n],l=i[0],c=i.reduce((d,u)=>{const h=Nd(s,u,a);return d.top=bt(h.top,d.top),d.right=ks(h.right,d.right),d.bottom=ks(h.bottom,d.bottom),d.left=bt(h.left,d.left),d},Nd(s,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function aj(t){const{width:s,height:r}=Lm(t);return{width:s,height:r}}function oj(t,s,r){const n=Yt(s),a=Qt(s),o=r==="fixed",i=Us(t,!0,o,s);let l={scrollLeft:0,scrollTop:0};const c=Gt(0);function d(){c.x=Il(a)}if(n||!n&&!o)if((_r(s)!=="body"||Rn(a))&&(l=ao(s)),n){const f=Us(s,!0,o,s);c.x=f.x+s.clientLeft,c.y=f.y+s.clientTop}else a&&d();o&&!n&&a&&d();const u=a&&!n&&!o?$m(a,l):Gt(0),h=i.left+l.scrollLeft-c.x-u.x,x=i.top+l.scrollTop-c.y-u.y;return{x:h,y:x,width:i.width,height:i.height}}function Jo(t){return Lt(t).position==="static"}function Sd(t,s){if(!Yt(t)||Lt(t).position==="fixed")return null;if(s)return s(t);let r=t.offsetParent;return Qt(t)===r&&(r=r.ownerDocument.body),r}function Um(t,s){const r=vt(t);if(no(t))return r;if(!Yt(t)){let a=Cs(t);for(;a&&!yr(a);){if(Mt(a)&&!Jo(a))return a;a=Cs(a)}return r}let n=Sd(t,s);for(;n&&zy(n)&&Jo(n);)n=Sd(n,s);return n&&yr(n)&&Jo(n)&&!El(n)?r:n||Vy(t)||r}const ij=async function(t){const s=this.getOffsetParent||Um,r=this.getDimensions,n=await r(t.floating);return{reference:oj(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function lj(t){return Lt(t).direction==="rtl"}const cj={convertOffsetParentRelativeRectToViewportRelativeRect:Jy,getDocumentElement:Qt,getClippingRect:nj,getOffsetParent:Um,getElementRects:ij,getClientRects:Qy,getDimensions:aj,getScale:xr,isElement:Mt,isRTL:lj};function zm(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function dj(t,s){let r=null,n;const a=Qt(t);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const d=t.getBoundingClientRect(),{left:u,top:h,width:x,height:f}=d;if(l||s(),!x||!f)return;const b=Kn(h),g=Kn(a.clientWidth-(u+x)),p=Kn(a.clientHeight-(h+f)),y=Kn(u),j={rootMargin:-b+"px "+-g+"px "+-p+"px "+-y+"px",threshold:bt(0,ks(1,c))||1};let w=!0;function k(R){const C=R[0].intersectionRatio;if(C!==c){if(!w)return i();C?i(!1,C):n=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!zm(d,t.getBoundingClientRect())&&i(),w=!1}try{r=new IntersectionObserver(k,{...j,root:a.ownerDocument})}catch{r=new IntersectionObserver(k,j)}r.observe(t)}return i(!0),o}function uj(t,s,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Pl(t),u=a||o?[...d?mn(d):[],...mn(s)]:[];u.forEach(y=>{a&&y.addEventListener("scroll",r,{passive:!0}),o&&y.addEventListener("resize",r)});const h=d&&l?dj(d,r):null;let x=-1,f=null;i&&(f=new ResizeObserver(y=>{let[v]=y;v&&v.target===d&&f&&(f.unobserve(s),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var j;(j=f)==null||j.observe(s)})),r()}),d&&!c&&f.observe(d),f.observe(s));let b,g=c?Us(t):null;c&&p();function p(){const y=Us(t);g&&!zm(g,y)&&r(),g=y,b=requestAnimationFrame(p)}return r(),()=>{var y;u.forEach(v=>{a&&v.removeEventListener("scroll",r),o&&v.removeEventListener("resize",r)}),h==null||h(),(y=f)==null||y.disconnect(),f=null,c&&cancelAnimationFrame(b)}}const mj=My,hj=Ly,fj=Iy,xj=$y,pj=Dy,kd=Py,gj=Fy,bj=(t,s,r)=>{const n=new Map,a={platform:cj,...r},o={...a.platform,_c:n};return Ty(t,s,{...a,platform:o})};var vj=typeof document<"u",yj=function(){},da=vj?m.useLayoutEffect:yj;function Pa(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let r,n,a;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==s.length)return!1;for(n=r;n--!==0;)if(!Pa(t[n],s[n]))return!1;return!0}if(a=Object.keys(t),r=a.length,r!==Object.keys(s).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(s,a[n]))return!1;for(n=r;n--!==0;){const o=a[n];if(!(o==="_owner"&&t.$$typeof)&&!Pa(t[o],s[o]))return!1}return!0}return t!==t&&s!==s}function Wm(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Cd(t,s){const r=Wm(t);return Math.round(s*r)/r}function Qo(t){const s=m.useRef(t);return da(()=>{s.current=t}),s}function jj(t){t===void 0&&(t={});const{placement:s="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[u,h]=m.useState({x:0,y:0,strategy:r,placement:s,middlewareData:{},isPositioned:!1}),[x,f]=m.useState(n);Pa(x,n)||f(n);const[b,g]=m.useState(null),[p,y]=m.useState(null),v=m.useCallback(D=>{D!==R.current&&(R.current=D,g(D))},[]),j=m.useCallback(D=>{D!==C.current&&(C.current=D,y(D))},[]),w=o||b,k=i||p,R=m.useRef(null),C=m.useRef(null),E=m.useRef(u),M=c!=null,B=Qo(c),q=Qo(a),I=Qo(d),te=m.useCallback(()=>{if(!R.current||!C.current)return;const D={placement:s,strategy:r,middleware:x};q.current&&(D.platform=q.current),bj(R.current,C.current,D).then(A=>{const Q={...A,isPositioned:I.current!==!1};W.current&&!Pa(E.current,Q)&&(E.current=Q,wr.flushSync(()=>{h(Q)}))})},[x,s,r,q,I]);da(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[d]);const W=m.useRef(!1);da(()=>(W.current=!0,()=>{W.current=!1}),[]),da(()=>{if(w&&(R.current=w),k&&(C.current=k),w&&k){if(B.current)return B.current(w,k,te);te()}},[w,k,te,B,M]);const z=m.useMemo(()=>({reference:R,floating:C,setReference:v,setFloating:j}),[v,j]),K=m.useMemo(()=>({reference:w,floating:k}),[w,k]),$=m.useMemo(()=>{const D={position:r,left:0,top:0};if(!K.floating)return D;const A=Cd(K.floating,u.x),Q=Cd(K.floating,u.y);return l?{...D,transform:"translate("+A+"px, "+Q+"px)",...Wm(K.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:A,top:Q}},[r,l,K.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:te,refs:z,elements:K,floatingStyles:$}),[u,te,z,K,$])}const wj=t=>{function s(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:a}=typeof t=="function"?t(r):t;return n&&s(n)?n.current!=null?kd({element:n.current,padding:a}).fn(r):{}:n?kd({element:n,padding:a}).fn(r):{}}}},Nj=(t,s)=>({...mj(t),options:[t,s]}),Sj=(t,s)=>({...hj(t),options:[t,s]}),kj=(t,s)=>({...gj(t),options:[t,s]}),Cj=(t,s)=>({...fj(t),options:[t,s]}),Rj=(t,s)=>({...xj(t),options:[t,s]}),_j=(t,s)=>({...pj(t),options:[t,s]}),Aj=(t,s)=>({...wj(t),options:[t,s]});var Ej="Arrow",Hm=m.forwardRef((t,s)=>{const{children:r,width:n=10,height:a=5,...o}=t;return e.jsx(oe.svg,{...o,ref:s,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Hm.displayName=Ej;var Tj=Hm;function Dl(t){const[s,r]=m.useState(void 0);return Be(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,d=Array.isArray(c)?c[0]:c;i=d.inlineSize,l=d.blockSize}else i=t.offsetWidth,l=t.offsetHeight;r({width:i,height:l})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),s}var Ol="Popper",[qm,Ar]=at(Ol),[Pj,Km]=qm(Ol),Vm=t=>{const{__scopePopper:s,children:r}=t,[n,a]=m.useState(null);return e.jsx(Pj,{scope:s,anchor:n,onAnchorChange:a,children:r})};Vm.displayName=Ol;var Gm="PopperAnchor",Xm=m.forwardRef((t,s)=>{const{__scopePopper:r,virtualRef:n,...a}=t,o=Km(Gm,r),i=m.useRef(null),l=Ce(s,i);return m.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||i.current)}),n?null:e.jsx(oe.div,{...a,ref:l})});Xm.displayName=Gm;var Ml="PopperContent",[Ij,Dj]=qm(Ml),Ym=m.forwardRef((t,s)=>{var U,le,je,ce,ae,de;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:x=!1,updatePositionStrategy:f="optimized",onPlaced:b,...g}=t,p=Km(Ml,r),[y,v]=m.useState(null),j=Ce(s,Je=>v(Je)),[w,k]=m.useState(null),R=Dl(w),C=(R==null?void 0:R.width)??0,E=(R==null?void 0:R.height)??0,M=n+(o!=="center"?"-"+o:""),B=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},q=Array.isArray(d)?d:[d],I=q.length>0,te={padding:B,boundary:q.filter(Mj),altBoundary:I},{refs:W,floatingStyles:z,placement:K,isPositioned:$,middlewareData:D}=jj({strategy:"fixed",placement:M,whileElementsMounted:(...Je)=>uj(...Je,{animationFrame:f==="always"}),elements:{reference:p.anchor},middleware:[Nj({mainAxis:a+E,alignmentAxis:i}),c&&Sj({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?kj():void 0,...te}),c&&Cj({...te}),Rj({...te,apply:({elements:Je,rects:yt,availableWidth:As,availableHeight:us})=>{const{width:Es,height:Or}=yt.reference,Qs=Je.floating.style;Qs.setProperty("--radix-popper-available-width",`${As}px`),Qs.setProperty("--radix-popper-available-height",`${us}px`),Qs.setProperty("--radix-popper-anchor-width",`${Es}px`),Qs.setProperty("--radix-popper-anchor-height",`${Or}px`)}}),w&&Aj({element:w,padding:l}),Lj({arrowWidth:C,arrowHeight:E}),x&&_j({strategy:"referenceHidden",...te})]}),[A,Q]=Zm(K),ee=nt(b);Be(()=>{$&&(ee==null||ee())},[$,ee]);const T=(U=D.arrow)==null?void 0:U.x,Y=(le=D.arrow)==null?void 0:le.y,se=((je=D.arrow)==null?void 0:je.centerOffset)!==0,[H,ne]=m.useState();return Be(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),e.jsx("div",{ref:W.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:$?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(ce=D.transformOrigin)==null?void 0:ce.x,(ae=D.transformOrigin)==null?void 0:ae.y].join(" "),...((de=D.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Ij,{scope:r,placedSide:A,onArrowChange:k,arrowX:T,arrowY:Y,shouldHideArrow:se,children:e.jsx(oe.div,{"data-side":A,"data-align":Q,...g,ref:j,style:{...g.style,animation:$?void 0:"none"}})})})});Ym.displayName=Ml;var Jm="PopperArrow",Oj={top:"bottom",right:"left",bottom:"top",left:"right"},Qm=m.forwardRef(function(s,r){const{__scopePopper:n,...a}=s,o=Dj(Jm,n),i=Oj[o.placedSide];return e.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:e.jsx(Tj,{...a,ref:r,style:{...a.style,display:"block"}})})});Qm.displayName=Jm;function Mj(t){return t!==null}var Lj=t=>({name:"transformOrigin",options:t,fn(s){var p,y,v;const{placement:r,rects:n,middlewareData:a}=s,i=((p=a.arrow)==null?void 0:p.centerOffset)!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[d,u]=Zm(r),h={start:"0%",center:"50%",end:"100%"}[u],x=(((y=a.arrow)==null?void 0:y.x)??0)+l/2,f=(((v=a.arrow)==null?void 0:v.y)??0)+c/2;let b="",g="";return d==="bottom"?(b=i?h:`${x}px`,g=`${-c}px`):d==="top"?(b=i?h:`${x}px`,g=`${n.floating.height+c}px`):d==="right"?(b=`${-c}px`,g=i?h:`${f}px`):d==="left"&&(b=`${n.floating.width+c}px`,g=i?h:`${f}px`),{data:{x:b,y:g}}}});function Zm(t){const[s,r="center"]=t.split("-");return[s,r]}var Ll=Vm,Fl=Xm,$l=Ym,Bl=Qm,[oo,tA]=at("Tooltip",[Ar]),io=Ar(),eh="TooltipProvider",Fj=700,Ii="tooltip.open",[$j,Ul]=oo(eh),th=t=>{const{__scopeTooltip:s,delayDuration:r=Fj,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:o}=t,i=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),e.jsx($j,{scope:s,isOpenDelayedRef:i,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:o})};th.displayName=eh;var hn="Tooltip",[Bj,lo]=oo(hn),sh=t=>{const{__scopeTooltip:s,children:r,open:n,defaultOpen:a,onOpenChange:o,disableHoverableContent:i,delayDuration:l}=t,c=Ul(hn,t.__scopeTooltip),d=io(s),[u,h]=m.useState(null),x=Dt(),f=m.useRef(0),b=i??c.disableHoverableContent,g=l??c.delayDuration,p=m.useRef(!1),[y,v]=Xt({prop:n,defaultProp:a??!1,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ii))):c.onClose(),o==null||o(C)},caller:hn}),j=m.useMemo(()=>y?p.current?"delayed-open":"instant-open":"closed",[y]),w=m.useCallback(()=>{window.clearTimeout(f.current),f.current=0,p.current=!1,v(!0)},[v]),k=m.useCallback(()=>{window.clearTimeout(f.current),f.current=0,v(!1)},[v]),R=m.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{p.current=!0,v(!0),f.current=0},g)},[g,v]);return m.useEffect(()=>()=>{f.current&&(window.clearTimeout(f.current),f.current=0)},[]),e.jsx(Ll,{...d,children:e.jsx(Bj,{scope:s,contentId:x,open:y,stateAttribute:j,trigger:u,onTriggerChange:h,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?R():w()},[c.isOpenDelayedRef,R,w]),onTriggerLeave:m.useCallback(()=>{b?k():(window.clearTimeout(f.current),f.current=0)},[k,b]),onOpen:w,onClose:k,disableHoverableContent:b,children:r})})};sh.displayName=hn;var Di="TooltipTrigger",rh=m.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=lo(Di,r),o=Ul(Di,r),i=io(r),l=m.useRef(null),c=Ce(s,l,a.onTriggerChange),d=m.useRef(!1),u=m.useRef(!1),h=m.useCallback(()=>d.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),e.jsx(Fl,{asChild:!0,...i,children:e.jsx(oe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:J(t.onPointerMove,x=>{x.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:J(t.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:J(t.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:J(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:J(t.onBlur,a.onClose),onClick:J(t.onClick,a.onClose)})})});rh.displayName=Di;var Uj="TooltipPortal",[sA,zj]=oo(Uj,{forceMount:void 0}),jr="TooltipContent",nh=m.forwardRef((t,s)=>{const r=zj(jr,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...o}=t,i=lo(jr,t.__scopeTooltip);return e.jsx(Rt,{present:n||i.open,children:i.disableHoverableContent?e.jsx(ah,{side:a,...o,ref:s}):e.jsx(Wj,{side:a,...o,ref:s})})}),Wj=m.forwardRef((t,s)=>{const r=lo(jr,t.__scopeTooltip),n=Ul(jr,t.__scopeTooltip),a=m.useRef(null),o=Ce(s,a),[i,l]=m.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:h}=n,x=m.useCallback(()=>{l(null),h(!1)},[h]),f=m.useCallback((b,g)=>{const p=b.currentTarget,y={x:b.clientX,y:b.clientY},v=Gj(y,p.getBoundingClientRect()),j=Xj(y,v),w=Yj(g.getBoundingClientRect()),k=Qj([...j,...w]);l(k),h(!0)},[h]);return m.useEffect(()=>()=>x(),[x]),m.useEffect(()=>{if(c&&u){const b=p=>f(p,u),g=p=>f(p,c);return c.addEventListener("pointerleave",b),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",b),u.removeEventListener("pointerleave",g)}}},[c,u,f,x]),m.useEffect(()=>{if(i){const b=g=>{const p=g.target,y={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(p))||(u==null?void 0:u.contains(p)),j=!Jj(y,i);v?x():j&&(x(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,u,i,d,x]),e.jsx(ah,{...t,ref:o})}),[Hj,qj]=oo(hn,{isInside:!1}),Kj=xv("TooltipContent"),ah=m.forwardRef((t,s)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=t,c=lo(jr,r),d=io(r),{onClose:u}=c;return m.useEffect(()=>(document.addEventListener(Ii,u),()=>document.removeEventListener(Ii,u)),[u]),m.useEffect(()=>{if(c.trigger){const h=x=>{const f=x.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),e.jsx(Sr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:e.jsxs($l,{"data-state":c.stateAttribute,...d,...l,ref:s,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Kj,{children:n}),e.jsx(Hj,{scope:r,isInside:!0,children:e.jsx(Lv,{id:c.contentId,role:"tooltip",children:a||n})})]})})});nh.displayName=jr;var oh="TooltipArrow",Vj=m.forwardRef((t,s)=>{const{__scopeTooltip:r,...n}=t,a=io(r);return qj(oh,r).isInside?null:e.jsx(Bl,{...a,...n,ref:s})});Vj.displayName=oh;function Gj(t,s){const r=Math.abs(s.top-t.y),n=Math.abs(s.bottom-t.y),a=Math.abs(s.right-t.x),o=Math.abs(s.left-t.x);switch(Math.min(r,n,a,o)){case o:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Xj(t,s,r=5){const n=[];switch(s){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function Yj(t){const{top:s,right:r,bottom:n,left:a}=t;return[{x:a,y:s},{x:r,y:s},{x:r,y:n},{x:a,y:n}]}function Jj(t,s){const{x:r,y:n}=t;let a=!1;for(let o=0,i=s.length-1;o<s.length;i=o++){const l=s[o],c=s[i],d=l.x,u=l.y,h=c.x,x=c.y;u>n!=x>n&&r<(h-d)*(n-u)/(x-u)+d&&(a=!a)}return a}function Qj(t){const s=t.slice();return s.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),Zj(s)}function Zj(t){if(t.length<=1)return t.slice();const s=[];for(let n=0;n<t.length;n++){const a=t[n];for(;s.length>=2;){const o=s[s.length-1],i=s[s.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))s.pop();else break}s.push(a)}s.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const o=r[r.length-1],i=r[r.length-2];if((o.x-i.x)*(a.y-i.y)>=(o.y-i.y)*(a.x-i.x))r.pop();else break}r.push(a)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var ew=th,tw=sh,sw=rh,ih=nh;const lh=ew,rw=tw,nw=sw,ch=m.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(ih,{ref:n,sideOffset:s,className:O("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));ch.displayName=ih.displayName;const Zo=768;function aw(){const[t,s]=m.useState(void 0);return m.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Zo-1}px)`),n=()=>{s(window.innerWidth<Zo)};return r.addEventListener("change",n),s(window.innerWidth<Zo),()=>r.removeEventListener("change",n)},[]),!!t}const ow=kr("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors transition-transform active:scale-[0.98] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-200 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2 rounded-lg",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),Z=m.forwardRef(({className:t,variant:s,size:r,asChild:n=!1,...a},o)=>{const i=n?Nr:"button";return e.jsx(i,{className:O(ow({variant:s,size:r,className:t})),ref:o,...a})});Z.displayName="Button";const st=m.forwardRef(({className:t,type:s,...r},n)=>e.jsx("input",{type:s,className:O("flex h-10 w-full rounded-lg border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));st.displayName="Input";var iw="Separator",Rd="horizontal",lw=["horizontal","vertical"],dh=m.forwardRef((t,s)=>{const{decorative:r,orientation:n=Rd,...a}=t,o=cw(n)?n:Rd,l=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return e.jsx(oe.div,{"data-orientation":o,...l,...a,ref:s})});dh.displayName=iw;function cw(t){return lw.includes(t)}var uh=dh;const ss=m.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...n},a)=>e.jsx(uh,{ref:a,decorative:r,orientation:s,className:O("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));ss.displayName=uh.displayName;var ei="focusScope.autoFocusOnMount",ti="focusScope.autoFocusOnUnmount",_d={bubbles:!1,cancelable:!0},dw="FocusScope",co=m.forwardRef((t,s)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=t,[l,c]=m.useState(null),d=nt(a),u=nt(o),h=m.useRef(null),x=Ce(s,g=>c(g)),f=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(n){let g=function(j){if(f.paused||!l)return;const w=j.target;l.contains(w)?h.current=w:vs(h.current,{select:!0})},p=function(j){if(f.paused||!l)return;const w=j.relatedTarget;w!==null&&(l.contains(w)||vs(h.current,{select:!0}))},y=function(j){if(document.activeElement===document.body)for(const k of j)k.removedNodes.length>0&&vs(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",p);const v=new MutationObserver(y);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",p),v.disconnect()}}},[n,l,f.paused]),m.useEffect(()=>{if(l){Ed.add(f);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(ei,_d);l.addEventListener(ei,d),l.dispatchEvent(y),y.defaultPrevented||(uw(pw(mh(l)),{select:!0}),document.activeElement===g&&vs(l))}return()=>{l.removeEventListener(ei,d),setTimeout(()=>{const y=new CustomEvent(ti,_d);l.addEventListener(ti,u),l.dispatchEvent(y),y.defaultPrevented||vs(g??document.body,{select:!0}),l.removeEventListener(ti,u),Ed.remove(f)},0)}}},[l,d,u,f]);const b=m.useCallback(g=>{if(!r&&!n||f.paused)return;const p=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(p&&y){const v=g.currentTarget,[j,w]=mw(v);j&&w?!g.shiftKey&&y===w?(g.preventDefault(),r&&vs(j,{select:!0})):g.shiftKey&&y===j&&(g.preventDefault(),r&&vs(w,{select:!0})):y===v&&g.preventDefault()}},[r,n,f.paused]);return e.jsx(oe.div,{tabIndex:-1,...i,ref:x,onKeyDown:b})});co.displayName=dw;function uw(t,{select:s=!1}={}){const r=document.activeElement;for(const n of t)if(vs(n,{select:s}),document.activeElement!==r)return}function mw(t){const s=mh(t),r=Ad(s,t),n=Ad(s.reverse(),t);return[r,n]}function mh(t){const s=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)s.push(r.currentNode);return s}function Ad(t,s){for(const r of t)if(!hw(r,{upTo:s}))return r}function hw(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function fw(t){return t instanceof HTMLInputElement&&"select"in t}function vs(t,{select:s=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&fw(t)&&s&&t.select()}}var Ed=xw();function xw(){let t=[];return{add(s){const r=t[0];s!==r&&(r==null||r.pause()),t=Td(t,s),t.unshift(s)},remove(s){var r;t=Td(t,s),(r=t[0])==null||r.resume()}}}function Td(t,s){const r=[...t],n=r.indexOf(s);return n!==-1&&r.splice(n,1),r}function pw(t){return t.filter(s=>s.tagName!=="A")}var si=0;function zl(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Pd()),document.body.insertAdjacentElement("beforeend",t[1]??Pd()),si++,()=>{si===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),si--}},[])}function Pd(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var qt=function(){return qt=Object.assign||function(s){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o])}return s},qt.apply(this,arguments)};function hh(t,s){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)s.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function gw(t,s,r){if(r||arguments.length===2)for(var n=0,a=s.length,o;n<a;n++)(o||!(n in s))&&(o||(o=Array.prototype.slice.call(s,0,n)),o[n]=s[n]);return t.concat(o||Array.prototype.slice.call(s))}var ua="right-scroll-bar-position",ma="width-before-scroll-bar",bw="with-scroll-bars-hidden",vw="--removed-body-scroll-bar-size";function ri(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function yw(t,s){var r=m.useState(function(){return{value:t,callback:s,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=s,r.facade}var jw=typeof window<"u"?m.useLayoutEffect:m.useEffect,Id=new WeakMap;function ww(t,s){var r=yw(null,function(n){return t.forEach(function(a){return ri(a,n)})});return jw(function(){var n=Id.get(r);if(n){var a=new Set(n),o=new Set(t),i=r.current;a.forEach(function(l){o.has(l)||ri(l,null)}),o.forEach(function(l){a.has(l)||ri(l,i)})}Id.set(r,t)},[t]),r}function Nw(t){return t}function Sw(t,s){s===void 0&&(s=Nw);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var i=s(o,n);return r.push(i),function(){r=r.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(n=!0;r.length;){var i=r;r=[],i.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var i=[];if(r.length){var l=r;r=[],l.forEach(o),i=r}var c=function(){var u=i;i=[],u.forEach(o)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){i.push(u),d()},filter:function(u){return i=i.filter(u),r}}}};return a}function kw(t){t===void 0&&(t={});var s=Sw(null);return s.options=qt({async:!0,ssr:!1},t),s}var fh=function(t){var s=t.sideCar,r=hh(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=s.read();if(!n)throw new Error("Sidecar medium not found");return m.createElement(n,qt({},r))};fh.isSideCarExport=!0;function Cw(t,s){return t.useMedium(s),fh}var xh=kw(),ni=function(){},uo=m.forwardRef(function(t,s){var r=m.useRef(null),n=m.useState({onScrollCapture:ni,onWheelCapture:ni,onTouchMoveCapture:ni}),a=n[0],o=n[1],i=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,x=t.sideCar,f=t.noRelative,b=t.noIsolation,g=t.inert,p=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,j=t.gapMode,w=hh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=x,R=ww([r,s]),C=qt(qt({},w),a);return m.createElement(m.Fragment,null,u&&m.createElement(k,{sideCar:xh,removeScrollBar:d,shards:h,noRelative:f,noIsolation:b,inert:g,setCallbacks:o,allowPinchZoom:!!p,lockRef:r,gapMode:j}),i?m.cloneElement(m.Children.only(l),qt(qt({},C),{ref:R})):m.createElement(v,qt({},C,{className:c,ref:R}),l))});uo.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};uo.classNames={fullWidth:ma,zeroRight:ua};var Rw=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _w(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=Rw();return s&&t.setAttribute("nonce",s),t}function Aw(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function Ew(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var Tw=function(){var t=0,s=null;return{add:function(r){t==0&&(s=_w())&&(Aw(s,r),Ew(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},Pw=function(){var t=Tw();return function(s,r){m.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&r])}},ph=function(){var t=Pw(),s=function(r){var n=r.styles,a=r.dynamic;return t(n,a),null};return s},Iw={left:0,top:0,right:0,gap:0},ai=function(t){return parseInt(t||"",10)||0},Dw=function(t){var s=window.getComputedStyle(document.body),r=s[t==="padding"?"paddingLeft":"marginLeft"],n=s[t==="padding"?"paddingTop":"marginTop"],a=s[t==="padding"?"paddingRight":"marginRight"];return[ai(r),ai(n),ai(a)]},Ow=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Iw;var s=Dw(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,n-r+s[2]-s[0])}},Mw=ph(),pr="data-scroll-locked",Lw=function(t,s,r,n){var a=t.left,o=t.top,i=t.right,l=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(bw,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(pr,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([s&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ua,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ma,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(ua," .").concat(ua,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ma," .").concat(ma,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(pr,`] {
    `).concat(vw,": ").concat(l,`px;
  }
`)},Dd=function(){var t=parseInt(document.body.getAttribute(pr)||"0",10);return isFinite(t)?t:0},Fw=function(){m.useEffect(function(){return document.body.setAttribute(pr,(Dd()+1).toString()),function(){var t=Dd()-1;t<=0?document.body.removeAttribute(pr):document.body.setAttribute(pr,t.toString())}},[])},$w=function(t){var s=t.noRelative,r=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;Fw();var o=m.useMemo(function(){return Ow(a)},[a]);return m.createElement(Mw,{styles:Lw(o,!s,a,r?"":"!important")})},Oi=!1;if(typeof window<"u")try{var Vn=Object.defineProperty({},"passive",{get:function(){return Oi=!0,!0}});window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{Oi=!1}var sr=Oi?{passive:!1}:!1,Bw=function(t){return t.tagName==="TEXTAREA"},gh=function(t,s){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[s]!=="hidden"&&!(r.overflowY===r.overflowX&&!Bw(t)&&r[s]==="visible")},Uw=function(t){return gh(t,"overflowY")},zw=function(t){return gh(t,"overflowX")},Od=function(t,s){var r=s.ownerDocument,n=s;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=bh(t,n);if(a){var o=vh(t,n),i=o[1],l=o[2];if(i>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Ww=function(t){var s=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[s,r,n]},Hw=function(t){var s=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[s,r,n]},bh=function(t,s){return t==="v"?Uw(s):zw(s)},vh=function(t,s){return t==="v"?Ww(s):Hw(s)},qw=function(t,s){return t==="h"&&s==="rtl"?-1:1},Kw=function(t,s,r,n,a){var o=qw(t,window.getComputedStyle(s).direction),i=o*n,l=r.target,c=s.contains(l),d=!1,u=i>0,h=0,x=0;do{if(!l)break;var f=vh(t,l),b=f[0],g=f[1],p=f[2],y=g-p-o*b;(b||y)&&bh(t,l)&&(h+=y,x+=b);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(s.contains(l)||s===l));return(u&&(Math.abs(h)<1||!a)||!u&&(Math.abs(x)<1||!a))&&(d=!0),d},Gn=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Md=function(t){return[t.deltaX,t.deltaY]},Ld=function(t){return t&&"current"in t?t.current:t},Vw=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Gw=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Xw=0,rr=[];function Yw(t){var s=m.useRef([]),r=m.useRef([0,0]),n=m.useRef(),a=m.useState(Xw++)[0],o=m.useState(ph)[0],i=m.useRef(t);m.useEffect(function(){i.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var g=gw([t.lockRef.current],(t.shards||[]).map(Ld),!0).filter(Boolean);return g.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(g,p){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var y=Gn(g),v=r.current,j="deltaX"in g?g.deltaX:v[0]-y[0],w="deltaY"in g?g.deltaY:v[1]-y[1],k,R=g.target,C=Math.abs(j)>Math.abs(w)?"h":"v";if("touches"in g&&C==="h"&&R.type==="range")return!1;var E=Od(C,R);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=Od(C,R)),!E)return!1;if(!n.current&&"changedTouches"in g&&(j||w)&&(n.current=k),!k)return!0;var M=n.current||k;return Kw(M,p,g,M==="h"?j:w,!0)},[]),c=m.useCallback(function(g){var p=g;if(!(!rr.length||rr[rr.length-1]!==o)){var y="deltaY"in p?Md(p):Gn(p),v=s.current.filter(function(k){return k.name===p.type&&(k.target===p.target||p.target===k.shadowParent)&&Vw(k.delta,y)})[0];if(v&&v.should){p.cancelable&&p.preventDefault();return}if(!v){var j=(i.current.shards||[]).map(Ld).filter(Boolean).filter(function(k){return k.contains(p.target)}),w=j.length>0?l(p,j[0]):!i.current.noIsolation;w&&p.cancelable&&p.preventDefault()}}},[]),d=m.useCallback(function(g,p,y,v){var j={name:g,delta:p,target:y,should:v,shadowParent:Jw(y)};s.current.push(j),setTimeout(function(){s.current=s.current.filter(function(w){return w!==j})},1)},[]),u=m.useCallback(function(g){r.current=Gn(g),n.current=void 0},[]),h=m.useCallback(function(g){d(g.type,Md(g),g.target,l(g,t.lockRef.current))},[]),x=m.useCallback(function(g){d(g.type,Gn(g),g.target,l(g,t.lockRef.current))},[]);m.useEffect(function(){return rr.push(o),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:x}),document.addEventListener("wheel",c,sr),document.addEventListener("touchmove",c,sr),document.addEventListener("touchstart",u,sr),function(){rr=rr.filter(function(g){return g!==o}),document.removeEventListener("wheel",c,sr),document.removeEventListener("touchmove",c,sr),document.removeEventListener("touchstart",u,sr)}},[]);var f=t.removeScrollBar,b=t.inert;return m.createElement(m.Fragment,null,b?m.createElement(o,{styles:Gw(a)}):null,f?m.createElement($w,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Jw(t){for(var s=null;t!==null;)t instanceof ShadowRoot&&(s=t.host,t=t.host),t=t.parentNode;return s}const Qw=Cw(xh,Yw);var mo=m.forwardRef(function(t,s){return m.createElement(uo,qt({},t,{ref:s,sideCar:Qw}))});mo.classNames=uo.classNames;var Zw=function(t){if(typeof document>"u")return null;var s=Array.isArray(t)?t[0]:t;return s.ownerDocument.body},nr=new WeakMap,Xn=new WeakMap,Yn={},oi=0,yh=function(t){return t&&(t.host||yh(t.parentNode))},eN=function(t,s){return s.map(function(r){if(t.contains(r))return r;var n=yh(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},tN=function(t,s,r,n){var a=eN(s,Array.isArray(t)?t:[t]);Yn[r]||(Yn[r]=new WeakMap);var o=Yn[r],i=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(x){if(l.has(x))u(x);else try{var f=x.getAttribute(n),b=f!==null&&f!=="false",g=(nr.get(x)||0)+1,p=(o.get(x)||0)+1;nr.set(x,g),o.set(x,p),i.push(x),g===1&&b&&Xn.set(x,!0),p===1&&x.setAttribute(r,"true"),b||x.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",x,y)}})};return u(s),l.clear(),oi++,function(){i.forEach(function(h){var x=nr.get(h)-1,f=o.get(h)-1;nr.set(h,x),o.set(h,f),x||(Xn.has(h)||h.removeAttribute(n),Xn.delete(h)),f||h.removeAttribute(r)}),oi--,oi||(nr=new WeakMap,nr=new WeakMap,Xn=new WeakMap,Yn={})}},Wl=function(t,s,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=Zw(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),tN(n,a,r,"aria-hidden")):function(){return null}},ho="Dialog",[jh,rA]=at(ho),[sN,$t]=jh(ho),wh=t=>{const{__scopeDialog:s,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!0}=t,l=m.useRef(null),c=m.useRef(null),[d,u]=Xt({prop:n,defaultProp:a??!1,onChange:o,caller:ho});return e.jsx(sN,{scope:s,triggerRef:l,contentRef:c,contentId:Dt(),titleId:Dt(),descriptionId:Dt(),open:d,onOpenChange:u,onOpenToggle:m.useCallback(()=>u(h=>!h),[u]),modal:i,children:r})};wh.displayName=ho;var Nh="DialogTrigger",Sh=m.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=$t(Nh,r),o=Ce(s,a.triggerRef);return e.jsx(oe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Kl(a.open),...n,ref:o,onClick:J(t.onClick,a.onOpenToggle)})});Sh.displayName=Nh;var Hl="DialogPortal",[rN,kh]=jh(Hl,{forceMount:void 0}),Ch=t=>{const{__scopeDialog:s,forceMount:r,children:n,container:a}=t,o=$t(Hl,s);return e.jsx(rN,{scope:s,forceMount:r,children:m.Children.map(n,i=>e.jsx(Rt,{present:r||o.open,children:e.jsx(kn,{asChild:!0,container:a,children:i})}))})};Ch.displayName=Hl;var Ia="DialogOverlay",Rh=m.forwardRef((t,s)=>{const r=kh(Ia,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,o=$t(Ia,t.__scopeDialog);return o.modal?e.jsx(Rt,{present:n||o.open,children:e.jsx(aN,{...a,ref:s})}):null});Rh.displayName=Ia;var nN=Bs("DialogOverlay.RemoveScroll"),aN=m.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=$t(Ia,r);return e.jsx(mo,{as:nN,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(oe.div,{"data-state":Kl(a.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),zs="DialogContent",_h=m.forwardRef((t,s)=>{const r=kh(zs,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,o=$t(zs,t.__scopeDialog);return e.jsx(Rt,{present:n||o.open,children:o.modal?e.jsx(oN,{...a,ref:s}):e.jsx(iN,{...a,ref:s})})});_h.displayName=zs;var oN=m.forwardRef((t,s)=>{const r=$t(zs,t.__scopeDialog),n=m.useRef(null),a=Ce(s,r.contentRef,n);return m.useEffect(()=>{const o=n.current;if(o)return Wl(o)},[]),e.jsx(Ah,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:J(t.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=r.triggerRef.current)==null||i.focus()}),onPointerDownOutside:J(t.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:J(t.onFocusOutside,o=>o.preventDefault())})}),iN=m.forwardRef((t,s)=>{const r=$t(zs,t.__scopeDialog),n=m.useRef(!1),a=m.useRef(!1);return e.jsx(Ah,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=t.onCloseAutoFocus)==null||i.call(t,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const i=o.target;((d=r.triggerRef.current)==null?void 0:d.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),Ah=m.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=t,l=$t(zs,r),c=m.useRef(null),d=Ce(s,c);return zl(),e.jsxs(e.Fragment,{children:[e.jsx(co,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:e.jsx(Sr,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Kl(l.open),...i,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(lN,{titleId:l.titleId}),e.jsx(dN,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ql="DialogTitle",Eh=m.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=$t(ql,r);return e.jsx(oe.h2,{id:a.titleId,...n,ref:s})});Eh.displayName=ql;var Th="DialogDescription",Ph=m.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=$t(Th,r);return e.jsx(oe.p,{id:a.descriptionId,...n,ref:s})});Ph.displayName=Th;var Ih="DialogClose",Dh=m.forwardRef((t,s)=>{const{__scopeDialog:r,...n}=t,a=$t(Ih,r);return e.jsx(oe.button,{type:"button",...n,ref:s,onClick:J(t.onClick,()=>a.onOpenChange(!1))})});Dh.displayName=Ih;function Kl(t){return t?"open":"closed"}var Oh="DialogTitleWarning",[nA,Mh]=mv(Oh,{contentName:zs,titleName:ql,docsSlug:"dialog"}),lN=({titleId:t})=>{const s=Mh(Oh),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},cN="DialogDescriptionWarning",dN=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Mh(cN).contentName}}.`;return m.useEffect(()=>{var o;const a=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");s&&a&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},Lh=wh,uN=Sh,Fh=Ch,fo=Rh,xo=_h,po=Eh,go=Ph,$h=Dh;const mN=Lh,hN=Fh,Bh=m.forwardRef(({className:t,...s},r)=>e.jsx(fo,{className:O("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));Bh.displayName=fo.displayName;const fN=kr("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Uh=m.forwardRef(({side:t="right",className:s,children:r,...n},a)=>e.jsxs(hN,{children:[e.jsx(Bh,{}),e.jsxs(xo,{ref:a,className:O(fN({side:t}),s),...n,children:[r,e.jsxs($h,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(pl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Uh.displayName=xo.displayName;const xN=m.forwardRef(({className:t,...s},r)=>e.jsx(po,{ref:r,className:O("text-lg font-semibold text-foreground",t),...s}));xN.displayName=po.displayName;const pN=m.forwardRef(({className:t,...s},r)=>e.jsx(go,{ref:r,className:O("text-sm text-muted-foreground",t),...s}));pN.displayName=go.displayName;function tt({className:t,...s}){return e.jsx("div",{className:O("animate-pulse rounded-md bg-muted",t),...s})}const gN="sidebar:state",bN=60*60*24*7,vN="16rem",yN="18rem",jN="3rem",wN="b",zh=m.createContext(null);function _n(){const t=m.useContext(zh);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const Wh=m.forwardRef(({defaultOpen:t=!0,open:s,onOpenChange:r,className:n,style:a,children:o,...i},l)=>{const c=aw(),[d,u]=m.useState(!1),[h,x]=m.useState(t),f=s??h,b=m.useCallback(v=>{const j=typeof v=="function"?v(f):v;r?r(j):x(j),document.cookie=`${gN}=${j}; path=/; max-age=${bN}`},[r,f]),g=m.useCallback(()=>c?u(v=>!v):b(v=>!v),[c,b,u]);m.useEffect(()=>{const v=j=>{j.key===wN&&(j.metaKey||j.ctrlKey)&&(j.preventDefault(),g())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g]);const p=f?"expanded":"collapsed",y=m.useMemo(()=>({state:p,open:f,setOpen:b,isMobile:c,openMobile:d,setOpenMobile:u,toggleSidebar:g}),[p,f,b,c,d,u,g]);return e.jsx(zh.Provider,{value:y,children:e.jsx(lh,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":vN,"--sidebar-width-icon":jN,...a},className:O("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:l,...i,children:o})})})});Wh.displayName="SidebarProvider";const Hh=m.forwardRef(({side:t="left",variant:s="sidebar",collapsible:r="offcanvas",className:n,children:a,...o},i)=>{const{isMobile:l,state:c,openMobile:d,setOpenMobile:u}=_n();return r==="none"?e.jsx("div",{className:O("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:i,...o,children:a}):l?e.jsx(mN,{open:d,onOpenChange:u,...o,children:e.jsx(Uh,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":yN},side:t,children:e.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):e.jsxs("div",{ref:i,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?r:"","data-variant":s,"data-side":t,children:[e.jsx("div",{className:O("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",s==="floating"||s==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:O("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",s==="floating"||s==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...o,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});Hh.displayName="Sidebar";const qh=m.forwardRef(({className:t,onClick:s,...r},n)=>{const{toggleSidebar:a}=_n();return e.jsxs(Z,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:O("h-7 w-7",t),onClick:o=>{s==null||s(o),a()},...r,children:[e.jsx(Wb,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});qh.displayName="SidebarTrigger";const NN=m.forwardRef(({className:t,...s},r)=>{const{toggleSidebar:n}=_n();return e.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:O("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...s})});NN.displayName="SidebarRail";const SN=m.forwardRef(({className:t,...s},r)=>e.jsx("main",{ref:r,className:O("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...s}));SN.displayName="SidebarInset";const kN=m.forwardRef(({className:t,...s},r)=>e.jsx(st,{ref:r,"data-sidebar":"input",className:O("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...s}));kN.displayName="SidebarInput";const CN=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,"data-sidebar":"header",className:O("flex flex-col gap-2 p-2",t),...s}));CN.displayName="SidebarHeader";const RN=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,"data-sidebar":"footer",className:O("flex flex-col gap-2 p-2",t),...s}));RN.displayName="SidebarFooter";const _N=m.forwardRef(({className:t,...s},r)=>e.jsx(ss,{ref:r,"data-sidebar":"separator",className:O("mx-2 w-auto bg-sidebar-border",t),...s}));_N.displayName="SidebarSeparator";const Kh=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,"data-sidebar":"content",className:O("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s}));Kh.displayName="SidebarContent";const Mi=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,"data-sidebar":"group",className:O("relative flex w-full min-w-0 flex-col p-2",t),...s}));Mi.displayName="SidebarGroup";const Li=m.forwardRef(({className:t,asChild:s=!1,...r},n)=>{const a=s?Nr:"div";return e.jsx(a,{ref:n,"data-sidebar":"group-label",className:O("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...r})});Li.displayName="SidebarGroupLabel";const AN=m.forwardRef(({className:t,asChild:s=!1,...r},n)=>{const a=s?Nr:"button";return e.jsx(a,{ref:n,"data-sidebar":"group-action",className:O("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...r})});AN.displayName="SidebarGroupAction";const Fi=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,"data-sidebar":"group-content",className:O("w-full text-sm",t),...s}));Fi.displayName="SidebarGroupContent";const $i=m.forwardRef(({className:t,...s},r)=>e.jsx("ul",{ref:r,"data-sidebar":"menu",className:O("flex w-full min-w-0 flex-col gap-1",t),...s}));$i.displayName="SidebarMenu";const Bi=m.forwardRef(({className:t,...s},r)=>e.jsx("li",{ref:r,"data-sidebar":"menu-item",className:O("group/menu-item relative",t),...s}));Bi.displayName="SidebarMenuItem";const EN=kr("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),Ui=m.forwardRef(({asChild:t=!1,isActive:s=!1,variant:r="default",size:n="default",tooltip:a,className:o,...i},l)=>{const c=t?Nr:"button",{isMobile:d,state:u}=_n(),h=e.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":n,"data-active":s,className:O(EN({variant:r,size:n}),o),...i});return a?(typeof a=="string"&&(a={children:a}),e.jsxs(rw,{children:[e.jsx(nw,{asChild:!0,children:h}),e.jsx(ch,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):h});Ui.displayName="SidebarMenuButton";const TN=m.forwardRef(({className:t,asChild:s=!1,showOnHover:r=!1,...n},a)=>{const o=s?Nr:"button";return e.jsx(o,{ref:a,"data-sidebar":"menu-action",className:O("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...n})});TN.displayName="SidebarMenuAction";const PN=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:O("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...s}));PN.displayName="SidebarMenuBadge";const IN=m.forwardRef(({className:t,showIcon:s=!1,...r},n)=>{const a=m.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:O("rounded-md h-8 flex gap-2 px-2 items-center",t),...r,children:[s&&e.jsx(tt,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(tt,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});IN.displayName="SidebarMenuSkeleton";const DN=m.forwardRef(({className:t,...s},r)=>e.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:O("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...s}));DN.displayName="SidebarMenuSub";const ON=m.forwardRef(({...t},s)=>e.jsx("li",{ref:s,...t}));ON.displayName="SidebarMenuSubItem";const MN=m.forwardRef(({asChild:t=!1,size:s="md",isActive:r,className:n,...a},o)=>{const i=t?Nr:"a";return e.jsx(i,{ref:o,"data-sidebar":"menu-sub-button","data-size":s,"data-active":r,className:O("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",s==="sm"&&"text-xs",s==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...a})});MN.displayName="SidebarMenuSubButton";function LN(){return Bb.useSyncExternalStore(FN,()=>!0,()=>!1)}function FN(){return()=>{}}var Vl="Avatar",[$N,aA]=at(Vl),[BN,Vh]=$N(Vl),Gh=m.forwardRef((t,s)=>{const{__scopeAvatar:r,...n}=t,[a,o]=m.useState("idle");return e.jsx(BN,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:o,children:e.jsx(oe.span,{...n,ref:s})})});Gh.displayName=Vl;var Xh="AvatarImage",Yh=m.forwardRef((t,s)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...o}=t,i=Vh(Xh,r),l=UN(n,o),c=nt(d=>{a(d),i.onImageLoadingStatusChange(d)});return Be(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?e.jsx(oe.img,{...o,ref:s,src:n}):null});Yh.displayName=Xh;var Jh="AvatarFallback",Qh=m.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:n,...a}=t,o=Vh(Jh,r),[i,l]=m.useState(n===void 0);return m.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),i&&o.imageLoadingStatus!=="loaded"?e.jsx(oe.span,{...a,ref:s}):null});Qh.displayName=Jh;function Fd(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function UN(t,{referrerPolicy:s,crossOrigin:r}){const n=LN(),a=m.useRef(null),o=n?(a.current||(a.current=new window.Image),a.current):null,[i,l]=m.useState(()=>Fd(o,t));return Be(()=>{l(Fd(o,t))},[o,t]),Be(()=>{const c=h=>()=>{l(h)};if(!o)return;const d=c("loaded"),u=c("error");return o.addEventListener("load",d),o.addEventListener("error",u),s&&(o.referrerPolicy=s),typeof r=="string"&&(o.crossOrigin=r),()=>{o.removeEventListener("load",d),o.removeEventListener("error",u)}},[o,r,s]),i}var Zh=Gh,ef=Yh,tf=Qh;const Gl=m.forwardRef(({className:t,...s},r)=>e.jsx(Zh,{ref:r,className:O("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Gl.displayName=Zh.displayName;const Xl=m.forwardRef(({className:t,...s},r)=>e.jsx(ef,{ref:r,className:O("aspect-square h-full w-full",t),...s}));Xl.displayName=ef.displayName;const Yl=m.forwardRef(({className:t,...s},r)=>e.jsx(tf,{ref:r,className:O("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Yl.displayName=tf.displayName;const zN=[{title:"Overview",url:"/",icon:Hb},{title:"Charts",url:"/charts",icon:ut},{title:"Users",url:"/users",icon:Ve},{title:"Products",url:"/products",icon:gl},{title:"Stock",url:"/products-stock",icon:Ns},{title:"Transactions",url:"/transactions",icon:qe},{title:"Analytics",url:"/analytics",icon:$e}],WN=[{title:"Advanced",url:"/advanced-analytics",icon:$u},{title:"Performance",url:"/product-performance",icon:Ss},{title:"Behavior",url:"/user-behavior",icon:ka},{title:"Financial",url:"/financial-analytics",icon:Ft},{title:"Real-time",url:"/realtime-dashboard",icon:ft},{title:"Predictive",url:"/predictive-analytics",icon:nn}];function HN(){const{state:t}=_n(),r=Lb().pathname,n=t==="collapsed",a=i=>i==="/"?r==="/":r.startsWith(i),o=i=>{const l="w-full justify-start transition-all duration-300 rounded-xl px-3 py-2.5 mb-1 group relative overflow-hidden";return a(i)?O(l,"bg-primary text-primary-foreground shadow-md font-medium"):O(l,"text-muted-foreground hover:text-foreground hover:bg-secondary/50")};return e.jsx(Hh,{className:O("border-r-0 bg-transparent transition-all duration-300 ease-in-out py-4 pl-4",n?"w-20":"w-72"),children:e.jsx("div",{className:O("h-full rounded-2xl border border-border/50 shadow-xl overflow-hidden flex flex-col transition-all duration-300","bg-card/80 backdrop-blur-xl supports-[backdrop-filter]:bg-card/60"),children:e.jsxs(Kh,{className:"flex flex-col h-full scrollbar-hide",children:[e.jsx("div",{className:"p-6 pb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-accent rounded-xl flex items-center justify-center shadow-lg shadow-primary/20 shrink-0",children:e.jsx(ut,{className:"w-5 h-5 text-white"})}),!n&&e.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-500",children:[e.jsx("h2",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-accent",children:"Dash"}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Analytics Pro"})]})]})}),!n&&e.jsx("div",{className:"px-4 py-4 animate-in fade-in zoom-in-95 duration-500 delay-100",children:e.jsxs("div",{className:"relative group",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors"}),e.jsx(st,{placeholder:"Search...",className:"pl-10 bg-secondary/50 border-transparent focus:bg-background focus:border-primary/20 transition-all duration-300 rounded-xl h-10"}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-medium text-muted-foreground bg-background/50 px-1.5 py-0.5 rounded border border-border/50",children:"K"})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto py-2 px-3 space-y-6 scrollbar-thin scrollbar-thumb-secondary scrollbar-track-transparent",children:[e.jsxs(Mi,{children:[e.jsx(Li,{className:"text-[10px] uppercase tracking-widest text-muted-foreground/70 font-bold px-4 mb-2",children:"Main Menu"}),e.jsx(Fi,{children:e.jsx($i,{children:zN.map(i=>e.jsx(Bi,{children:e.jsx(Ui,{asChild:!0,tooltip:i.title,children:e.jsxs(Gc,{to:i.url,className:o(i.url),children:[e.jsx(i.icon,{className:O("mr-3 h-5 w-5 transition-transform duration-300 group-hover:scale-110",a(i.url)?"text-white":"text-muted-foreground group-hover:text-primary")}),!n&&e.jsx("span",{children:i.title}),a(i.url)&&!n&&e.jsx("div",{className:"absolute right-2 w-1.5 h-1.5 rounded-full bg-white animate-pulse"})]})})},i.title))})})]}),e.jsxs(Mi,{children:[e.jsx(Li,{className:"text-[10px] uppercase tracking-widest text-muted-foreground/70 font-bold px-4 mb-2",children:"Intelligence"}),e.jsx(Fi,{children:e.jsx($i,{children:WN.map(i=>e.jsx(Bi,{children:e.jsx(Ui,{asChild:!0,tooltip:i.title,children:e.jsxs(Gc,{to:i.url,className:o(i.url),children:[e.jsx(i.icon,{className:O("mr-3 h-5 w-5 transition-transform duration-300 group-hover:scale-110",a(i.url)?"text-white":"text-muted-foreground group-hover:text-primary")}),!n&&e.jsx("span",{children:i.title})]})})},i.title))})})]})]}),e.jsx("div",{className:"p-4 mt-auto",children:e.jsxs("div",{className:O("flex items-center gap-3 p-3 rounded-xl transition-all duration-300 cursor-pointer hover:bg-secondary/80 group border border-transparent hover:border-border/50",n?"justify-center":""),children:[e.jsxs(Gl,{className:"h-9 w-9 ring-2 ring-background shadow-sm transition-transform duration-300 group-hover:scale-105",children:[e.jsx(Xl,{src:"/avatars/01.png",alt:"Rizal Fakhri"}),e.jsx(Yl,{className:"bg-gradient-to-br from-primary to-accent text-white text-xs font-bold",children:"RF"})]}),!n&&e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate group-hover:text-primary transition-colors",children:"Rizal Fakhri"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"rizal@example.com"})]}),!n&&e.jsx(Ja,{className:"h-4 w-4 text-muted-foreground group-hover:text-foreground transition-colors"})]})})]})})})}var qN=m.createContext(void 0);function An(t){const s=m.useContext(qN);return t||s||"ltr"}var ii="rovingFocusGroup.onEntryFocus",KN={bubbles:!1,cancelable:!0},En="RovingFocusGroup",[zi,sf,VN]=eo(En),[GN,Er]=at(En,[VN]),[XN,YN]=GN(En),rf=m.forwardRef((t,s)=>e.jsx(zi.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(zi.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(JN,{...t,ref:s})})}));rf.displayName=En;var JN=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=t,x=m.useRef(null),f=Ce(s,x),b=An(o),[g,p]=Xt({prop:i,defaultProp:l??null,onChange:c,caller:En}),[y,v]=m.useState(!1),j=nt(d),w=sf(r),k=m.useRef(!1),[R,C]=m.useState(0);return m.useEffect(()=>{const E=x.current;if(E)return E.addEventListener(ii,j),()=>E.removeEventListener(ii,j)},[j]),e.jsx(XN,{scope:r,orientation:n,dir:b,loop:a,currentTabStopId:g,onItemFocus:m.useCallback(E=>p(E),[p]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:m.useCallback(()=>C(E=>E-1),[]),children:e.jsx(oe.div,{tabIndex:y||R===0?-1:0,"data-orientation":n,...h,ref:f,style:{outline:"none",...t.style},onMouseDown:J(t.onMouseDown,()=>{k.current=!0}),onFocus:J(t.onFocus,E=>{const M=!k.current;if(E.target===E.currentTarget&&M&&!y){const B=new CustomEvent(ii,KN);if(E.currentTarget.dispatchEvent(B),!B.defaultPrevented){const q=w().filter(K=>K.focusable),I=q.find(K=>K.active),te=q.find(K=>K.id===g),z=[I,te,...q].filter(Boolean).map(K=>K.ref.current);of(z,u)}}k.current=!1}),onBlur:J(t.onBlur,()=>v(!1))})})}),nf="RovingFocusGroupItem",af=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:o,children:i,...l}=t,c=Dt(),d=o||c,u=YN(nf,r),h=u.currentTabStopId===d,x=sf(r),{onFocusableItemAdd:f,onFocusableItemRemove:b,currentTabStopId:g}=u;return m.useEffect(()=>{if(n)return f(),()=>b()},[n,f,b]),e.jsx(zi.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:e.jsx(oe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:s,onMouseDown:J(t.onMouseDown,p=>{n?u.onItemFocus(d):p.preventDefault()}),onFocus:J(t.onFocus,()=>u.onItemFocus(d)),onKeyDown:J(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){u.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const y=eS(p,u.orientation,u.dir);if(y!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let j=x().filter(w=>w.focusable).map(w=>w.ref.current);if(y==="last")j.reverse();else if(y==="prev"||y==="next"){y==="prev"&&j.reverse();const w=j.indexOf(p.currentTarget);j=u.loop?tS(j,w+1):j.slice(w+1)}setTimeout(()=>of(j))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});af.displayName=nf;var QN={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ZN(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function eS(t,s,r){const n=ZN(t.key,r);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return QN[n]}function of(t,s=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:s}),document.activeElement!==r))return}function tS(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var Jl=rf,Ql=af,Wi=["Enter"," "],sS=["ArrowDown","PageUp","Home"],lf=["ArrowUp","PageDown","End"],rS=[...sS,...lf],nS={ltr:[...Wi,"ArrowRight"],rtl:[...Wi,"ArrowLeft"]},aS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Tn="Menu",[fn,oS,iS]=eo(Tn),[Vs,cf]=at(Tn,[iS,Ar,Er]),bo=Ar(),df=Er(),[lS,Gs]=Vs(Tn),[cS,Pn]=Vs(Tn),uf=t=>{const{__scopeMenu:s,open:r=!1,children:n,dir:a,onOpenChange:o,modal:i=!0}=t,l=bo(s),[c,d]=m.useState(null),u=m.useRef(!1),h=nt(o),x=An(a);return m.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),e.jsx(Ll,{...l,children:e.jsx(lS,{scope:s,open:r,onOpenChange:h,content:c,onContentChange:d,children:e.jsx(cS,{scope:s,onClose:m.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:x,modal:i,children:n})})})};uf.displayName=Tn;var dS="MenuAnchor",Zl=m.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=bo(r);return e.jsx(Fl,{...a,...n,ref:s})});Zl.displayName=dS;var ec="MenuPortal",[uS,mf]=Vs(ec,{forceMount:void 0}),hf=t=>{const{__scopeMenu:s,forceMount:r,children:n,container:a}=t,o=Gs(ec,s);return e.jsx(uS,{scope:s,forceMount:r,children:e.jsx(Rt,{present:r||o.open,children:e.jsx(kn,{asChild:!0,container:a,children:n})})})};hf.displayName=ec;var Ct="MenuContent",[mS,tc]=Vs(Ct),ff=m.forwardRef((t,s)=>{const r=mf(Ct,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,o=Gs(Ct,t.__scopeMenu),i=Pn(Ct,t.__scopeMenu);return e.jsx(fn.Provider,{scope:t.__scopeMenu,children:e.jsx(Rt,{present:n||o.open,children:e.jsx(fn.Slot,{scope:t.__scopeMenu,children:i.modal?e.jsx(hS,{...a,ref:s}):e.jsx(fS,{...a,ref:s})})})})}),hS=m.forwardRef((t,s)=>{const r=Gs(Ct,t.__scopeMenu),n=m.useRef(null),a=Ce(s,n);return m.useEffect(()=>{const o=n.current;if(o)return Wl(o)},[]),e.jsx(sc,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:J(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),fS=m.forwardRef((t,s)=>{const r=Gs(Ct,t.__scopeMenu);return e.jsx(sc,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),xS=Bs("MenuContent.ScrollLock"),sc=m.forwardRef((t,s)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:x,onDismiss:f,disableOutsideScroll:b,...g}=t,p=Gs(Ct,r),y=Pn(Ct,r),v=bo(r),j=df(r),w=oS(r),[k,R]=m.useState(null),C=m.useRef(null),E=Ce(s,C,p.onContentChange),M=m.useRef(0),B=m.useRef(""),q=m.useRef(0),I=m.useRef(null),te=m.useRef("right"),W=m.useRef(0),z=b?mo:m.Fragment,K=b?{as:xS,allowPinchZoom:!0}:void 0,$=A=>{var U,le;const Q=B.current+A,ee=w().filter(je=>!je.disabled),T=document.activeElement,Y=(U=ee.find(je=>je.ref.current===T))==null?void 0:U.textValue,se=ee.map(je=>je.textValue),H=RS(se,Q,Y),ne=(le=ee.find(je=>je.textValue===H))==null?void 0:le.ref.current;(function je(ce){B.current=ce,window.clearTimeout(M.current),ce!==""&&(M.current=window.setTimeout(()=>je(""),1e3))})(Q),ne&&setTimeout(()=>ne.focus())};m.useEffect(()=>()=>window.clearTimeout(M.current),[]),zl();const D=m.useCallback(A=>{var ee,T;return te.current===((ee=I.current)==null?void 0:ee.side)&&AS(A,(T=I.current)==null?void 0:T.area)},[]);return e.jsx(mS,{scope:r,searchRef:B,onItemEnter:m.useCallback(A=>{D(A)&&A.preventDefault()},[D]),onItemLeave:m.useCallback(A=>{var Q;D(A)||((Q=C.current)==null||Q.focus(),R(null))},[D]),onTriggerLeave:m.useCallback(A=>{D(A)&&A.preventDefault()},[D]),pointerGraceTimerRef:q,onPointerGraceIntentChange:m.useCallback(A=>{I.current=A},[]),children:e.jsx(z,{...K,children:e.jsx(co,{asChild:!0,trapped:a,onMountAutoFocus:J(o,A=>{var Q;A.preventDefault(),(Q=C.current)==null||Q.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:e.jsx(Sr,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:x,onDismiss:f,children:e.jsx(Jl,{asChild:!0,...j,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:R,onEntryFocus:J(c,A=>{y.isUsingKeyboardRef.current||A.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx($l,{role:"menu","aria-orientation":"vertical","data-state":Ef(p.open),"data-radix-menu-content":"",dir:y.dir,...v,...g,ref:E,style:{outline:"none",...g.style},onKeyDown:J(g.onKeyDown,A=>{const ee=A.target.closest("[data-radix-menu-content]")===A.currentTarget,T=A.ctrlKey||A.altKey||A.metaKey,Y=A.key.length===1;ee&&(A.key==="Tab"&&A.preventDefault(),!T&&Y&&$(A.key));const se=C.current;if(A.target!==se||!rS.includes(A.key))return;A.preventDefault();const ne=w().filter(U=>!U.disabled).map(U=>U.ref.current);lf.includes(A.key)&&ne.reverse(),kS(ne)}),onBlur:J(t.onBlur,A=>{A.currentTarget.contains(A.target)||(window.clearTimeout(M.current),B.current="")}),onPointerMove:J(t.onPointerMove,xn(A=>{const Q=A.target,ee=W.current!==A.clientX;if(A.currentTarget.contains(Q)&&ee){const T=A.clientX>W.current?"right":"left";te.current=T,W.current=A.clientX}}))})})})})})})});ff.displayName=Ct;var pS="MenuGroup",rc=m.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(oe.div,{role:"group",...n,ref:s})});rc.displayName=pS;var gS="MenuLabel",xf=m.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(oe.div,{...n,ref:s})});xf.displayName=gS;var Da="MenuItem",$d="menu.itemSelect",vo=m.forwardRef((t,s)=>{const{disabled:r=!1,onSelect:n,...a}=t,o=m.useRef(null),i=Pn(Da,t.__scopeMenu),l=tc(Da,t.__scopeMenu),c=Ce(s,o),d=m.useRef(!1),u=()=>{const h=o.current;if(!r&&h){const x=new CustomEvent($d,{bubbles:!0,cancelable:!0});h.addEventListener($d,f=>n==null?void 0:n(f),{once:!0}),wl(h,x),x.defaultPrevented?d.current=!1:i.onClose()}};return e.jsx(pf,{...a,ref:c,disabled:r,onClick:J(t.onClick,u),onPointerDown:h=>{var x;(x=t.onPointerDown)==null||x.call(t,h),d.current=!0},onPointerUp:J(t.onPointerUp,h=>{var x;d.current||(x=h.currentTarget)==null||x.click()}),onKeyDown:J(t.onKeyDown,h=>{const x=l.searchRef.current!=="";r||x&&h.key===" "||Wi.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});vo.displayName=Da;var pf=m.forwardRef((t,s)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...o}=t,i=tc(Da,r),l=df(r),c=m.useRef(null),d=Ce(s,c),[u,h]=m.useState(!1),[x,f]=m.useState("");return m.useEffect(()=>{const b=c.current;b&&f((b.textContent??"").trim())},[o.children]),e.jsx(fn.ItemSlot,{scope:r,disabled:n,textValue:a??x,children:e.jsx(Ql,{asChild:!0,...l,focusable:!n,children:e.jsx(oe.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:d,onPointerMove:J(t.onPointerMove,xn(b=>{n?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:J(t.onPointerLeave,xn(b=>i.onItemLeave(b))),onFocus:J(t.onFocus,()=>h(!0)),onBlur:J(t.onBlur,()=>h(!1))})})})}),bS="MenuCheckboxItem",gf=m.forwardRef((t,s)=>{const{checked:r=!1,onCheckedChange:n,...a}=t;return e.jsx(wf,{scope:t.__scopeMenu,checked:r,children:e.jsx(vo,{role:"menuitemcheckbox","aria-checked":Oa(r)?"mixed":r,...a,ref:s,"data-state":ac(r),onSelect:J(a.onSelect,()=>n==null?void 0:n(Oa(r)?!0:!r),{checkForDefaultPrevented:!1})})})});gf.displayName=bS;var bf="MenuRadioGroup",[vS,yS]=Vs(bf,{value:void 0,onValueChange:()=>{}}),vf=m.forwardRef((t,s)=>{const{value:r,onValueChange:n,...a}=t,o=nt(n);return e.jsx(vS,{scope:t.__scopeMenu,value:r,onValueChange:o,children:e.jsx(rc,{...a,ref:s})})});vf.displayName=bf;var yf="MenuRadioItem",jf=m.forwardRef((t,s)=>{const{value:r,...n}=t,a=yS(yf,t.__scopeMenu),o=r===a.value;return e.jsx(wf,{scope:t.__scopeMenu,checked:o,children:e.jsx(vo,{role:"menuitemradio","aria-checked":o,...n,ref:s,"data-state":ac(o),onSelect:J(n.onSelect,()=>{var i;return(i=a.onValueChange)==null?void 0:i.call(a,r)},{checkForDefaultPrevented:!1})})})});jf.displayName=yf;var nc="MenuItemIndicator",[wf,jS]=Vs(nc,{checked:!1}),Nf=m.forwardRef((t,s)=>{const{__scopeMenu:r,forceMount:n,...a}=t,o=jS(nc,r);return e.jsx(Rt,{present:n||Oa(o.checked)||o.checked===!0,children:e.jsx(oe.span,{...a,ref:s,"data-state":ac(o.checked)})})});Nf.displayName=nc;var wS="MenuSeparator",Sf=m.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t;return e.jsx(oe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:s})});Sf.displayName=wS;var NS="MenuArrow",kf=m.forwardRef((t,s)=>{const{__scopeMenu:r,...n}=t,a=bo(r);return e.jsx(Bl,{...a,...n,ref:s})});kf.displayName=NS;var SS="MenuSub",[oA,Cf]=Vs(SS),Ur="MenuSubTrigger",Rf=m.forwardRef((t,s)=>{const r=Gs(Ur,t.__scopeMenu),n=Pn(Ur,t.__scopeMenu),a=Cf(Ur,t.__scopeMenu),o=tc(Ur,t.__scopeMenu),i=m.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,d={__scopeMenu:t.__scopeMenu},u=m.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return m.useEffect(()=>u,[u]),m.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),e.jsx(Zl,{asChild:!0,...d,children:e.jsx(pf,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":Ef(r.open),...t,ref:Za(s,a.onTriggerChange),onClick:h=>{var x;(x=t.onClick)==null||x.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:J(t.onPointerMove,xn(h=>{o.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:J(t.onPointerLeave,xn(h=>{var f,b;u();const x=(f=r.content)==null?void 0:f.getBoundingClientRect();if(x){const g=(b=r.content)==null?void 0:b.dataset.side,p=g==="right",y=p?-5:5,v=x[p?"left":"right"],j=x[p?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:v,y:x.top},{x:j,y:x.top},{x:j,y:x.bottom},{x:v,y:x.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:J(t.onKeyDown,h=>{var f;const x=o.searchRef.current!=="";t.disabled||x&&h.key===" "||nS[n.dir].includes(h.key)&&(r.onOpenChange(!0),(f=r.content)==null||f.focus(),h.preventDefault())})})})});Rf.displayName=Ur;var _f="MenuSubContent",Af=m.forwardRef((t,s)=>{const r=mf(Ct,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,o=Gs(Ct,t.__scopeMenu),i=Pn(Ct,t.__scopeMenu),l=Cf(_f,t.__scopeMenu),c=m.useRef(null),d=Ce(s,c);return e.jsx(fn.Provider,{scope:t.__scopeMenu,children:e.jsx(Rt,{present:n||o.open,children:e.jsx(fn.Slot,{scope:t.__scopeMenu,children:e.jsx(sc,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;i.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:J(t.onFocusOutside,u=>{u.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:J(t.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:J(t.onKeyDown,u=>{var f;const h=u.currentTarget.contains(u.target),x=aS[i.dir].includes(u.key);h&&x&&(o.onOpenChange(!1),(f=l.trigger)==null||f.focus(),u.preventDefault())})})})})})});Af.displayName=_f;function Ef(t){return t?"open":"closed"}function Oa(t){return t==="indeterminate"}function ac(t){return Oa(t)?"indeterminate":t?"checked":"unchecked"}function kS(t){const s=document.activeElement;for(const r of t)if(r===s||(r.focus(),document.activeElement!==s))return}function CS(t,s){return t.map((r,n)=>t[(s+n)%t.length])}function RS(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,o=r?t.indexOf(r):-1;let i=CS(t,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function _S(t,s){const{x:r,y:n}=t;let a=!1;for(let o=0,i=s.length-1;o<s.length;i=o++){const l=s[o],c=s[i],d=l.x,u=l.y,h=c.x,x=c.y;u>n!=x>n&&r<(h-d)*(n-u)/(x-u)+d&&(a=!a)}return a}function AS(t,s){if(!s)return!1;const r={x:t.clientX,y:t.clientY};return _S(r,s)}function xn(t){return s=>s.pointerType==="mouse"?t(s):void 0}var ES=uf,TS=Zl,PS=hf,IS=ff,DS=rc,OS=xf,MS=vo,LS=gf,FS=vf,$S=jf,BS=Nf,US=Sf,zS=kf,WS=Rf,HS=Af,yo="DropdownMenu",[qS,iA]=at(yo,[cf]),ot=cf(),[KS,Tf]=qS(yo),Pf=t=>{const{__scopeDropdownMenu:s,children:r,dir:n,open:a,defaultOpen:o,onOpenChange:i,modal:l=!0}=t,c=ot(s),d=m.useRef(null),[u,h]=Xt({prop:a,defaultProp:o??!1,onChange:i,caller:yo});return e.jsx(KS,{scope:s,triggerId:Dt(),triggerRef:d,contentId:Dt(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(x=>!x),[h]),modal:l,children:e.jsx(ES,{...c,open:u,onOpenChange:h,dir:n,modal:l,children:r})})};Pf.displayName=yo;var If="DropdownMenuTrigger",Df=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=t,o=Tf(If,r),i=ot(r);return e.jsx(TS,{asChild:!0,...i,children:e.jsx(oe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Za(s,o.triggerRef),onPointerDown:J(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:J(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Df.displayName=If;var VS="DropdownMenuPortal",Of=t=>{const{__scopeDropdownMenu:s,...r}=t,n=ot(s);return e.jsx(PS,{...n,...r})};Of.displayName=VS;var Mf="DropdownMenuContent",Lf=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=Tf(Mf,r),o=ot(r),i=m.useRef(!1);return e.jsx(IS,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...n,ref:s,onCloseAutoFocus:J(t.onCloseAutoFocus,l=>{var c;i.current||(c=a.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:J(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(i.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Lf.displayName=Mf;var GS="DropdownMenuGroup",XS=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(DS,{...a,...n,ref:s})});XS.displayName=GS;var YS="DropdownMenuLabel",Ff=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(OS,{...a,...n,ref:s})});Ff.displayName=YS;var JS="DropdownMenuItem",$f=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(MS,{...a,...n,ref:s})});$f.displayName=JS;var QS="DropdownMenuCheckboxItem",Bf=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(LS,{...a,...n,ref:s})});Bf.displayName=QS;var ZS="DropdownMenuRadioGroup",e1=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(FS,{...a,...n,ref:s})});e1.displayName=ZS;var t1="DropdownMenuRadioItem",Uf=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx($S,{...a,...n,ref:s})});Uf.displayName=t1;var s1="DropdownMenuItemIndicator",zf=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(BS,{...a,...n,ref:s})});zf.displayName=s1;var r1="DropdownMenuSeparator",Wf=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(US,{...a,...n,ref:s})});Wf.displayName=r1;var n1="DropdownMenuArrow",a1=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(zS,{...a,...n,ref:s})});a1.displayName=n1;var o1="DropdownMenuSubTrigger",Hf=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(WS,{...a,...n,ref:s})});Hf.displayName=o1;var i1="DropdownMenuSubContent",qf=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:r,...n}=t,a=ot(r);return e.jsx(HS,{...a,...n,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qf.displayName=i1;var l1=Pf,c1=Df,d1=Of,Kf=Lf,Vf=Ff,Gf=$f,Xf=Bf,Yf=Uf,Jf=zf,Qf=Wf,Zf=Hf,ex=qf;const tx=l1,sx=c1,u1=m.forwardRef(({className:t,inset:s,children:r,...n},a)=>e.jsxs(Zf,{ref:a,className:O("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...n,children:[r,e.jsx(Bu,{className:"ml-auto h-4 w-4"})]}));u1.displayName=Zf.displayName;const m1=m.forwardRef(({className:t,...s},r)=>e.jsx(ex,{ref:r,className:O("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));m1.displayName=ex.displayName;const oc=m.forwardRef(({className:t,sideOffset:s=4,...r},n)=>e.jsx(d1,{children:e.jsx(Kf,{ref:n,sideOffset:s,className:O("z-50 min-w-[8rem] overflow-hidden rounded-xl border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));oc.displayName=Kf.displayName;const gr=m.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(Gf,{ref:n,className:O("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...r}));gr.displayName=Gf.displayName;const h1=m.forwardRef(({className:t,children:s,checked:r,...n},a)=>e.jsxs(Xf,{ref:a,className:O("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Jf,{children:e.jsx(an,{className:"h-4 w-4"})})}),s]}));h1.displayName=Xf.displayName;const f1=m.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(Yf,{ref:n,className:O("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Jf,{children:e.jsx(Uu,{className:"h-2 w-2 fill-current"})})}),s]}));f1.displayName=Yf.displayName;const rx=m.forwardRef(({className:t,inset:s,...r},n)=>e.jsx(Vf,{ref:n,className:O("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));rx.displayName=Vf.displayName;const Hi=m.forwardRef(({className:t,...s},r)=>e.jsx(Qf,{ref:r,className:O("-mx-1 my-1 h-px bg-muted",t),...s}));Hi.displayName=Qf.displayName;function x1(){return e.jsx("header",{className:"sticky top-0 z-40 w-full",children:e.jsxs("div",{className:"flex h-16 items-center px-4 md:px-6 gap-3 md:gap-4 bg-background/50 backdrop-blur-sm transition-all duration-300",children:[e.jsx(qh,{className:"mr-1 md:mr-2 text-muted-foreground hover:text-primary transition-colors"}),e.jsxs("div",{className:"hidden md:flex items-center text-sm text-muted-foreground",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Dashboard"}),e.jsx("span",{className:"mx-2",children:"/"}),e.jsx("span",{children:"Overview"})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 md:gap-4",children:[e.jsxs(Z,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-primary hover:bg-primary/10 rounded-full transition-colors",children:[e.jsx(zu,{className:"h-5 w-5"}),e.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-destructive ring-2 ring-background animate-pulse"})]}),e.jsxs(tx,{children:[e.jsx(sx,{asChild:!0,children:e.jsx(Z,{variant:"ghost",className:"relative h-10 w-10 rounded-full hover:bg-transparent p-0",children:e.jsxs(Gl,{className:"h-10 w-10 ring-2 ring-background shadow-sm transition-transform hover:scale-105",children:[e.jsx(Xl,{src:"/avatars/01.png",alt:"@admin"}),e.jsx(Yl,{className:"bg-gradient-to-br from-primary to-accent text-white font-bold",children:"RF"})]})})}),e.jsxs(oc,{className:"w-56 bg-card/95 backdrop-blur-xl border-border/50 shadow-xl rounded-xl",align:"end",forceMount:!0,children:[e.jsx(rx,{className:"font-normal p-3",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-semibold leading-none text-foreground",children:"Rizal Fakhri"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:"rizalfakhri@yayan.il"})]})}),e.jsx(Hi,{className:"bg-border/50"}),e.jsxs(gr,{className:"cursor-pointer focus:bg-primary/10 focus:text-primary rounded-lg my-1",children:[e.jsx(wn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(gr,{className:"cursor-pointer focus:bg-primary/10 focus:text-primary rounded-lg my-1",children:[e.jsx(qb,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Settings"})]}),e.jsx(Hi,{className:"bg-border/50"}),e.jsx(gr,{className:"cursor-pointer focus:bg-destructive/10 focus:text-destructive text-destructive rounded-lg my-1",children:"Log out"})]})]})]})]})})}const N=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:O("rounded-xl border border-border/50 bg-card text-card-foreground shadow-sm",t),...s}));N.displayName="Card";const L=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:O("flex flex-col space-y-1.5 p-6",t),...s}));L.displayName="CardHeader";const F=m.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:O("text-2xl font-semibold leading-none tracking-tight",t),...s}));F.displayName="CardTitle";const X=m.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:O("text-sm text-muted-foreground",t),...s}));X.displayName="CardDescription";const S=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:O("p-6 pt-0",t),...s}));S.displayName="CardContent";const p1=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:O("flex items-center p-6 pt-0",t),...s}));p1.displayName="CardFooter";var jo="Tabs",[g1,lA]=at(jo,[Er]),nx=Er(),[b1,ic]=g1(jo),ax=m.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:o,orientation:i="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=An(l),[h,x]=Xt({prop:n,onChange:a,defaultProp:o??"",caller:jo});return e.jsx(b1,{scope:r,baseId:Dt(),value:h,onValueChange:x,orientation:i,dir:u,activationMode:c,children:e.jsx(oe.div,{dir:u,"data-orientation":i,...d,ref:s})})});ax.displayName=jo;var ox="TabsList",ix=m.forwardRef((t,s)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,o=ic(ox,r),i=nx(r);return e.jsx(Jl,{asChild:!0,...i,orientation:o.orientation,dir:o.dir,loop:n,children:e.jsx(oe.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:s})})});ix.displayName=ox;var lx="TabsTrigger",cx=m.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...o}=t,i=ic(lx,r),l=nx(r),c=mx(i.baseId,n),d=hx(i.baseId,n),u=n===i.value;return e.jsx(Ql,{asChild:!0,...l,focusable:!a,active:u,children:e.jsx(oe.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...o,ref:s,onMouseDown:J(t.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?i.onValueChange(n):h.preventDefault()}),onKeyDown:J(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(n)}),onFocus:J(t.onFocus,()=>{const h=i.activationMode!=="manual";!u&&!a&&h&&i.onValueChange(n)})})})});cx.displayName=lx;var dx="TabsContent",ux=m.forwardRef((t,s)=>{const{__scopeTabs:r,value:n,forceMount:a,children:o,...i}=t,l=ic(dx,r),c=mx(l.baseId,n),d=hx(l.baseId,n),u=n===l.value,h=m.useRef(u);return m.useEffect(()=>{const x=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(x)},[]),e.jsx(Rt,{present:a||u,children:({present:x})=>e.jsx(oe.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!x,id:d,tabIndex:0,...i,ref:s,style:{...t.style,animationDuration:h.current?"0s":void 0},children:x&&o})})});ux.displayName=dx;function mx(t,s){return`${t}-trigger-${s}`}function hx(t,s){return`${t}-content-${s}`}var v1=ax,fx=ix,xx=cx,px=ux;const ds=v1,Jt=m.forwardRef(({className:t,...s},r)=>e.jsx(fx,{ref:r,className:O("inline-flex h-10 items-center justify-center rounded-xl bg-muted p-1 text-muted-foreground",t),...s}));Jt.displayName=fx.displayName;const Ae=m.forwardRef(({className:t,...s},r)=>e.jsx(xx,{ref:r,className:O("inline-flex items-center justify-center whitespace-nowrap rounded-lg px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));Ae.displayName=xx.displayName;const Pe=m.forwardRef(({className:t,...s},r)=>e.jsx(px,{ref:r,className:O("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Pe.displayName=px.displayName;function y1({data:t,title:s="Revenue Overview",description:r="Your revenue and transaction trends",showMovingAverage:n=!1,showForecast:a=!1}){const o=i=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(i);return e.jsxs(N,{className:"border-0 bg-white/60 dark:bg-slate-900/40 backdrop-blur-sm shadow-elevated ring-1 ring-black/5",children:[e.jsxs(L,{className:"pb-6",children:[e.jsx(F,{className:"text-xl font-semibold text-foreground",children:s}),e.jsx(X,{className:"text-muted-foreground",children:r})]}),e.jsx(S,{className:"pt-2",children:e.jsxs(ds,{defaultValue:"revenue",className:"w-full",children:[e.jsxs(Jt,{className:"grid w-full grid-cols-3 bg-muted/30 p-1 rounded-xl",children:[e.jsx(Ae,{value:"revenue",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-primary",children:"Revenue"}),e.jsx(Ae,{value:"transactions",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-primary",children:"Transactions"}),e.jsx(Ae,{value:"profit",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-primary",children:"Profit"})]}),e.jsx(Pe,{value:"revenue",className:"space-y-4",children:e.jsx("div",{className:"h-[350px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(rn,{data:t,children:[e.jsx(De,{strokeDasharray:"3 3",className:"opacity-20",stroke:"hsl(var(--border))"}),e.jsx(Oe,{dataKey:"date",className:"text-xs text-muted-foreground",axisLine:!1,tickLine:!1}),e.jsx(Me,{className:"text-xs text-muted-foreground",tickFormatter:o,axisLine:!1,tickLine:!1}),e.jsx(_e,{formatter:i=>[o(i),"Revenue"],labelFormatter:i=>`Date: ${i}`,contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgb(0 0 0 / 0.1)"}}),e.jsx(as,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--chart-1))",strokeWidth:3,dot:{fill:"hsl(var(--chart-1))",strokeWidth:2,r:5},activeDot:{r:8,stroke:"hsl(var(--chart-1))",strokeWidth:2}}),n&&e.jsx(as,{type:"monotone",dataKey:"movingAverageRevenue",stroke:"hsl(var(--chart-2))",strokeDasharray:"6 6",strokeWidth:2,dot:!1}),a&&e.jsx(as,{type:"monotone",dataKey:"forecastRevenue",stroke:"hsl(var(--chart-4))",strokeDasharray:"2 4",strokeWidth:2,dot:!1})]})})})}),e.jsx(Pe,{value:"transactions",className:"space-y-4",children:e.jsx("div",{className:"h-[350px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:t,children:[e.jsx(De,{strokeDasharray:"3 3",className:"opacity-20",stroke:"hsl(var(--border))"}),e.jsx(Oe,{dataKey:"date",className:"text-xs text-muted-foreground",axisLine:!1,tickLine:!1}),e.jsx(Me,{className:"text-xs text-muted-foreground",axisLine:!1,tickLine:!1}),e.jsx(_e,{formatter:i=>[i.toLocaleString(),"Transactions"],labelFormatter:i=>`Date: ${i}`,contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgb(0 0 0 / 0.1)"}}),e.jsx(dt,{dataKey:"transactions",fill:"hsl(var(--chart-2))",radius:[6,6,0,0]})]})})})}),e.jsx(Pe,{value:"profit",className:"space-y-4",children:e.jsx("div",{className:"h-[350px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(rn,{data:t,children:[e.jsx(De,{strokeDasharray:"3 3",className:"opacity-20",stroke:"hsl(var(--border))"}),e.jsx(Oe,{dataKey:"date",className:"text-xs text-muted-foreground",axisLine:!1,tickLine:!1}),e.jsx(Me,{className:"text-xs text-muted-foreground",tickFormatter:o,axisLine:!1,tickLine:!1}),e.jsx(_e,{formatter:i=>[o(i),"Profit"],labelFormatter:i=>`Date: ${i}`,contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 10px 25px -5px rgb(0 0 0 / 0.1)"}}),e.jsx(as,{type:"monotone",dataKey:"profit",stroke:"hsl(var(--chart-3))",strokeWidth:3,dot:{fill:"hsl(var(--chart-3))",strokeWidth:2,r:5},activeDot:{r:8,stroke:"hsl(var(--chart-3))",strokeWidth:2}})]})})})})]})})]})}function gx(t,s){return function(){return t.apply(s,arguments)}}const{toString:j1}=Object.prototype,{getPrototypeOf:lc}=Object,{iterator:wo,toStringTag:bx}=Symbol,No=(t=>s=>{const r=j1.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Bt=t=>(t=t.toLowerCase(),s=>No(s)===t),So=t=>s=>typeof s===t,{isArray:Tr}=Array,pn=So("undefined");function In(t){return t!==null&&!pn(t)&&t.constructor!==null&&!pn(t.constructor)&&mt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vx=Bt("ArrayBuffer");function w1(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&vx(t.buffer),s}const N1=So("string"),mt=So("function"),yx=So("number"),Dn=t=>t!==null&&typeof t=="object",S1=t=>t===!0||t===!1,ha=t=>{if(No(t)!=="object")return!1;const s=lc(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(bx in t)&&!(wo in t)},k1=t=>{if(!Dn(t)||In(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},C1=Bt("Date"),R1=Bt("File"),_1=Bt("Blob"),A1=Bt("FileList"),E1=t=>Dn(t)&&mt(t.pipe),T1=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||mt(t.append)&&((s=No(t))==="formdata"||s==="object"&&mt(t.toString)&&t.toString()==="[object FormData]"))},P1=Bt("URLSearchParams"),[I1,D1,O1,M1]=["ReadableStream","Request","Response","Headers"].map(Bt),L1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function On(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),Tr(t))for(n=0,a=t.length;n<a;n++)s.call(null,t[n],n,t);else{if(In(t))return;const o=r?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let l;for(n=0;n<i;n++)l=o[n],s.call(null,t[l],l,t)}}function jx(t,s){if(In(t))return null;s=s.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],s===a.toLowerCase())return a;return null}const Os=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wx=t=>!pn(t)&&t!==Os;function qi(){const{caseless:t}=wx(this)&&this||{},s={},r=(n,a)=>{const o=t&&jx(s,a)||a;ha(s[o])&&ha(n)?s[o]=qi(s[o],n):ha(n)?s[o]=qi({},n):Tr(n)?s[o]=n.slice():s[o]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&On(arguments[n],r);return s}const F1=(t,s,r,{allOwnKeys:n}={})=>(On(s,(a,o)=>{r&&mt(a)?t[o]=gx(a,r):t[o]=a},{allOwnKeys:n}),t),$1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),B1=(t,s,r,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},U1=(t,s,r,n)=>{let a,o,i;const l={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),o=a.length;o-- >0;)i=a[o],(!n||n(i,t,s))&&!l[i]&&(s[i]=t[i],l[i]=!0);t=r!==!1&&lc(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},z1=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const n=t.indexOf(s,r);return n!==-1&&n===r},W1=t=>{if(!t)return null;if(Tr(t))return t;let s=t.length;if(!yx(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},H1=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&lc(Uint8Array)),q1=(t,s)=>{const n=(t&&t[wo]).call(t);let a;for(;(a=n.next())&&!a.done;){const o=a.value;s.call(t,o[0],o[1])}},K1=(t,s)=>{let r;const n=[];for(;(r=t.exec(s))!==null;)n.push(r);return n},V1=Bt("HTMLFormElement"),G1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Bd=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),X1=Bt("RegExp"),Nx=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),n={};On(r,(a,o)=>{let i;(i=s(a,o,t))!==!1&&(n[o]=i||a)}),Object.defineProperties(t,n)},Y1=t=>{Nx(t,(s,r)=>{if(mt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(mt(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},J1=(t,s)=>{const r={},n=a=>{a.forEach(o=>{r[o]=!0})};return Tr(t)?n(t):n(String(t).split(s)),r},Q1=()=>{},Z1=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function ek(t){return!!(t&&mt(t.append)&&t[bx]==="FormData"&&t[wo])}const tk=t=>{const s=new Array(10),r=(n,a)=>{if(Dn(n)){if(s.indexOf(n)>=0)return;if(In(n))return n;if(!("toJSON"in n)){s[a]=n;const o=Tr(n)?[]:{};return On(n,(i,l)=>{const c=r(i,a+1);!pn(c)&&(o[l]=c)}),s[a]=void 0,o}}return n};return r(t,0)},sk=Bt("AsyncFunction"),rk=t=>t&&(Dn(t)||mt(t))&&mt(t.then)&&mt(t.catch),Sx=((t,s)=>t?setImmediate:s?((r,n)=>(Os.addEventListener("message",({source:a,data:o})=>{a===Os&&o===r&&n.length&&n.shift()()},!1),a=>{n.push(a),Os.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",mt(Os.postMessage)),nk=typeof queueMicrotask<"u"?queueMicrotask.bind(Os):typeof process<"u"&&process.nextTick||Sx,ak=t=>t!=null&&mt(t[wo]),P={isArray:Tr,isArrayBuffer:vx,isBuffer:In,isFormData:T1,isArrayBufferView:w1,isString:N1,isNumber:yx,isBoolean:S1,isObject:Dn,isPlainObject:ha,isEmptyObject:k1,isReadableStream:I1,isRequest:D1,isResponse:O1,isHeaders:M1,isUndefined:pn,isDate:C1,isFile:R1,isBlob:_1,isRegExp:X1,isFunction:mt,isStream:E1,isURLSearchParams:P1,isTypedArray:H1,isFileList:A1,forEach:On,merge:qi,extend:F1,trim:L1,stripBOM:$1,inherits:B1,toFlatObject:U1,kindOf:No,kindOfTest:Bt,endsWith:z1,toArray:W1,forEachEntry:q1,matchAll:K1,isHTMLForm:V1,hasOwnProperty:Bd,hasOwnProp:Bd,reduceDescriptors:Nx,freezeMethods:Y1,toObjectSet:J1,toCamelCase:G1,noop:Q1,toFiniteNumber:Z1,findKey:jx,global:Os,isContextDefined:wx,isSpecCompliantForm:ek,toJSONObject:tk,isAsyncFn:sk,isThenable:rk,setImmediate:Sx,asap:nk,isIterable:ak};function ve(t,s,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}P.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.status}}});const kx=ve.prototype,Cx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Cx[t]={value:t}});Object.defineProperties(ve,Cx);Object.defineProperty(kx,"isAxiosError",{value:!0});ve.from=(t,s,r,n,a,o)=>{const i=Object.create(kx);return P.toFlatObject(t,i,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),ve.call(i,t.message,s,r,n,a),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const ok=null;function Ki(t){return P.isPlainObject(t)||P.isArray(t)}function Rx(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function Ud(t,s,r){return t?t.concat(s).map(function(a,o){return a=Rx(a),!r&&o?"["+a+"]":a}).join(r?".":""):s}function ik(t){return P.isArray(t)&&!t.some(Ki)}const lk=P.toFlatObject(P,{},null,function(s){return/^is[A-Z]/.test(s)});function ko(t,s,r){if(!P.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=P.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,p){return!P.isUndefined(p[g])});const n=r.metaTokens,a=r.visitor||u,o=r.dots,i=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(s);if(!P.isFunction(a))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(P.isDate(b))return b.toISOString();if(P.isBoolean(b))return b.toString();if(!c&&P.isBlob(b))throw new ve("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(b)||P.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function u(b,g,p){let y=b;if(b&&!p&&typeof b=="object"){if(P.endsWith(g,"{}"))g=n?g:g.slice(0,-2),b=JSON.stringify(b);else if(P.isArray(b)&&ik(b)||(P.isFileList(b)||P.endsWith(g,"[]"))&&(y=P.toArray(b)))return g=Rx(g),y.forEach(function(j,w){!(P.isUndefined(j)||j===null)&&s.append(i===!0?Ud([g],w,o):i===null?g:g+"[]",d(j))}),!1}return Ki(b)?!0:(s.append(Ud(p,g,o),d(b)),!1)}const h=[],x=Object.assign(lk,{defaultVisitor:u,convertValue:d,isVisitable:Ki});function f(b,g){if(!P.isUndefined(b)){if(h.indexOf(b)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(b),P.forEach(b,function(y,v){(!(P.isUndefined(y)||y===null)&&a.call(s,y,P.isString(v)?v.trim():v,g,x))===!0&&f(y,g?g.concat(v):[v])}),h.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return f(t),s}function zd(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function cc(t,s){this._pairs=[],t&&ko(t,this,s)}const _x=cc.prototype;_x.append=function(s,r){this._pairs.push([s,r])};_x.toString=function(s){const r=s?function(n){return s.call(this,n,zd)}:zd;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function ck(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ax(t,s,r){if(!s)return t;const n=r&&r.encode||ck;P.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(a?o=a(s,r):o=P.isURLSearchParams(s)?s.toString():new cc(s,r).toString(n),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Wd{constructor(){this.handlers=[]}use(s,r,n){return this.handlers.push({fulfilled:s,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){P.forEach(this.handlers,function(n){n!==null&&s(n)})}}const Ex={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dk=typeof URLSearchParams<"u"?URLSearchParams:cc,uk=typeof FormData<"u"?FormData:null,mk=typeof Blob<"u"?Blob:null,hk={isBrowser:!0,classes:{URLSearchParams:dk,FormData:uk,Blob:mk},protocols:["http","https","file","blob","url","data"]},dc=typeof window<"u"&&typeof document<"u",Vi=typeof navigator=="object"&&navigator||void 0,fk=dc&&(!Vi||["ReactNative","NativeScript","NS"].indexOf(Vi.product)<0),xk=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pk=dc&&window.location.href||"http://localhost",gk=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dc,hasStandardBrowserEnv:fk,hasStandardBrowserWebWorkerEnv:xk,navigator:Vi,origin:pk},Symbol.toStringTag,{value:"Module"})),Ze={...gk,...hk};function bk(t,s){return ko(t,new Ze.classes.URLSearchParams,{visitor:function(r,n,a,o){return Ze.isNode&&P.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...s})}function vk(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function yk(t){const s={},r=Object.keys(t);let n;const a=r.length;let o;for(n=0;n<a;n++)o=r[n],s[o]=t[o];return s}function Tx(t){function s(r,n,a,o){let i=r[o++];if(i==="__proto__")return!0;const l=Number.isFinite(+i),c=o>=r.length;return i=!i&&P.isArray(a)?a.length:i,c?(P.hasOwnProp(a,i)?a[i]=[a[i],n]:a[i]=n,!l):((!a[i]||!P.isObject(a[i]))&&(a[i]=[]),s(r,n,a[i],o)&&P.isArray(a[i])&&(a[i]=yk(a[i])),!l)}if(P.isFormData(t)&&P.isFunction(t.entries)){const r={};return P.forEachEntry(t,(n,a)=>{s(vk(n),a,r,0)}),r}return null}function jk(t,s,r){if(P.isString(t))try{return(s||JSON.parse)(t),P.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}const Mn={transitional:Ex,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,o=P.isObject(s);if(o&&P.isHTMLForm(s)&&(s=new FormData(s)),P.isFormData(s))return a?JSON.stringify(Tx(s)):s;if(P.isArrayBuffer(s)||P.isBuffer(s)||P.isStream(s)||P.isFile(s)||P.isBlob(s)||P.isReadableStream(s))return s;if(P.isArrayBufferView(s))return s.buffer;if(P.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let l;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bk(s,this.formSerializer).toString();if((l=P.isFileList(s))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return ko(l?{"files[]":s}:s,c&&new c,this.formSerializer)}}return o||a?(r.setContentType("application/json",!1),jk(s)):s}],transformResponse:[function(s){const r=this.transitional||Mn.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(P.isResponse(s)||P.isReadableStream(s))return s;if(s&&P.isString(s)&&(n&&!this.responseType||a)){const i=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(s)}catch(l){if(i)throw l.name==="SyntaxError"?ve.from(l,ve.ERR_BAD_RESPONSE,this,null,this.response):l}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ze.classes.FormData,Blob:Ze.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};P.forEach(["delete","get","head","post","put","patch"],t=>{Mn.headers[t]={}});const wk=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nk=t=>{const s={};let r,n,a;return t&&t.split(`
`).forEach(function(i){a=i.indexOf(":"),r=i.substring(0,a).trim().toLowerCase(),n=i.substring(a+1).trim(),!(!r||s[r]&&wk[r])&&(r==="set-cookie"?s[r]?s[r].push(n):s[r]=[n]:s[r]=s[r]?s[r]+", "+n:n)}),s},Hd=Symbol("internals");function $r(t){return t&&String(t).trim().toLowerCase()}function fa(t){return t===!1||t==null?t:P.isArray(t)?t.map(fa):String(t)}function Sk(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)s[n[1]]=n[2];return s}const kk=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function li(t,s,r,n,a){if(P.isFunction(n))return n.call(this,s,r);if(a&&(s=r),!!P.isString(s)){if(P.isString(n))return s.indexOf(n)!==-1;if(P.isRegExp(n))return n.test(s)}}function Ck(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,n)=>r.toUpperCase()+n)}function Rk(t,s){const r=P.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,o,i){return this[n].call(this,s,a,o,i)},configurable:!0})})}class ht{constructor(s){s&&this.set(s)}set(s,r,n){const a=this;function o(l,c,d){const u=$r(c);if(!u)throw new Error("header name must be a non-empty string");const h=P.findKey(a,u);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||c]=fa(l))}const i=(l,c)=>P.forEach(l,(d,u)=>o(d,u,c));if(P.isPlainObject(s)||s instanceof this.constructor)i(s,r);else if(P.isString(s)&&(s=s.trim())&&!kk(s))i(Nk(s),r);else if(P.isObject(s)&&P.isIterable(s)){let l={},c,d;for(const u of s){if(!P.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?P.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}i(l,r)}else s!=null&&o(r,s,n);return this}get(s,r){if(s=$r(s),s){const n=P.findKey(this,s);if(n){const a=this[n];if(!r)return a;if(r===!0)return Sk(a);if(P.isFunction(r))return r.call(this,a,n);if(P.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=$r(s),s){const n=P.findKey(this,s);return!!(n&&this[n]!==void 0&&(!r||li(this,this[n],n,r)))}return!1}delete(s,r){const n=this;let a=!1;function o(i){if(i=$r(i),i){const l=P.findKey(n,i);l&&(!r||li(n,n[l],l,r))&&(delete n[l],a=!0)}}return P.isArray(s)?s.forEach(o):o(s),a}clear(s){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const o=r[n];(!s||li(this,this[o],o,s,!0))&&(delete this[o],a=!0)}return a}normalize(s){const r=this,n={};return P.forEach(this,(a,o)=>{const i=P.findKey(n,o);if(i){r[i]=fa(a),delete r[o];return}const l=s?Ck(o):String(o).trim();l!==o&&delete r[o],r[l]=fa(a),n[l]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return P.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=s&&P.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const n=new this(s);return r.forEach(a=>n.set(a)),n}static accessor(s){const n=(this[Hd]=this[Hd]={accessors:{}}).accessors,a=this.prototype;function o(i){const l=$r(i);n[l]||(Rk(a,i),n[l]=!0)}return P.isArray(s)?s.forEach(o):o(s),this}}ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.reduceDescriptors(ht.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[r]=n}}});P.freezeMethods(ht);function ci(t,s){const r=this||Mn,n=s||r,a=ht.from(n.headers);let o=n.data;return P.forEach(t,function(l){o=l.call(r,o,a.normalize(),s?s.status:void 0)}),a.normalize(),o}function Px(t){return!!(t&&t.__CANCEL__)}function Pr(t,s,r){ve.call(this,t??"canceled",ve.ERR_CANCELED,s,r),this.name="CanceledError"}P.inherits(Pr,ve,{__CANCEL__:!0});function Ix(t,s,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):s(new ve("Request failed with status code "+r.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function _k(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Ak(t,s){t=t||10;const r=new Array(t),n=new Array(t);let a=0,o=0,i;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),u=n[o];i||(i=d),r[a]=c,n[a]=d;let h=o,x=0;for(;h!==a;)x+=r[h++],h=h%t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),d-i<s)return;const f=u&&d-u;return f?Math.round(x*1e3/f):void 0}}function Ek(t,s){let r=0,n=1e3/s,a,o;const i=(d,u=Date.now())=>{r=u,a=null,o&&(clearTimeout(o),o=null),t(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?i(d,u):(a=d,o||(o=setTimeout(()=>{o=null,i(a)},n-h)))},()=>a&&i(a)]}const Ma=(t,s,r=3)=>{let n=0;const a=Ak(50,250);return Ek(o=>{const i=o.loaded,l=o.lengthComputable?o.total:void 0,c=i-n,d=a(c),u=i<=l;n=i;const h={loaded:i,total:l,progress:l?i/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-i)/d:void 0,event:o,lengthComputable:l!=null,[s?"download":"upload"]:!0};t(h)},r)},qd=(t,s)=>{const r=t!=null;return[n=>s[0]({lengthComputable:r,total:t,loaded:n}),s[1]]},Kd=t=>(...s)=>P.asap(()=>t(...s)),Tk=Ze.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,Ze.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(Ze.origin),Ze.navigator&&/(msie|trident)/i.test(Ze.navigator.userAgent)):()=>!0,Pk=Ze.hasStandardBrowserEnv?{write(t,s,r,n,a,o){const i=[t+"="+encodeURIComponent(s)];P.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),P.isString(n)&&i.push("path="+n),P.isString(a)&&i.push("domain="+a),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Ik(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Dk(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Dx(t,s,r){let n=!Ik(s);return t&&(n||r==!1)?Dk(t,s):s}const Vd=t=>t instanceof ht?{...t}:t;function Ws(t,s){s=s||{};const r={};function n(d,u,h,x){return P.isPlainObject(d)&&P.isPlainObject(u)?P.merge.call({caseless:x},d,u):P.isPlainObject(u)?P.merge({},u):P.isArray(u)?u.slice():u}function a(d,u,h,x){if(P.isUndefined(u)){if(!P.isUndefined(d))return n(void 0,d,h,x)}else return n(d,u,h,x)}function o(d,u){if(!P.isUndefined(u))return n(void 0,u)}function i(d,u){if(P.isUndefined(u)){if(!P.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in s)return n(d,u);if(h in t)return n(void 0,d)}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(d,u,h)=>a(Vd(d),Vd(u),h,!0)};return P.forEach(Object.keys({...t,...s}),function(u){const h=c[u]||a,x=h(t[u],s[u],u);P.isUndefined(x)&&h!==l||(r[u]=x)}),r}const Ox=t=>{const s=Ws({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:o,headers:i,auth:l}=s;s.headers=i=ht.from(i),s.url=Ax(Dx(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&i.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(P.isFormData(r)){if(Ze.hasStandardBrowserEnv||Ze.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Ze.hasStandardBrowserEnv&&(n&&P.isFunction(n)&&(n=n(s)),n||n!==!1&&Tk(s.url))){const d=a&&o&&Pk.read(o);d&&i.set(a,d)}return s},Ok=typeof XMLHttpRequest<"u",Mk=Ok&&function(t){return new Promise(function(r,n){const a=Ox(t);let o=a.data;const i=ht.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,h,x,f,b;function g(){f&&f(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let p=new XMLHttpRequest;p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout;function y(){if(!p)return;const j=ht.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:j,config:t,request:p};Ix(function(C){r(C),g()},function(C){n(C),g()},k),p=null}"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(y)},p.onabort=function(){p&&(n(new ve("Request aborted",ve.ECONNABORTED,t,p)),p=null)},p.onerror=function(){n(new ve("Network Error",ve.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const k=a.transitional||Ex;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),n(new ve(w,k.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,t,p)),p=null},o===void 0&&i.setContentType(null),"setRequestHeader"in p&&P.forEach(i.toJSON(),function(w,k){p.setRequestHeader(k,w)}),P.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),l&&l!=="json"&&(p.responseType=a.responseType),d&&([x,b]=Ma(d,!0),p.addEventListener("progress",x)),c&&p.upload&&([h,f]=Ma(c),p.upload.addEventListener("progress",h),p.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(u=j=>{p&&(n(!j||j.type?new Pr(null,t,p):j),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const v=_k(a.url);if(v&&Ze.protocols.indexOf(v)===-1){n(new ve("Unsupported protocol "+v+":",ve.ERR_BAD_REQUEST,t));return}p.send(o||null)})},Lk=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let n=new AbortController,a;const o=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof ve?u:new Pr(u instanceof Error?u.message:u))}};let i=s&&setTimeout(()=>{i=null,o(new ve(`timeout ${s} of ms exceeded`,ve.ETIMEDOUT))},s);const l=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),t=null)};t.forEach(d=>d.addEventListener("abort",o));const{signal:c}=n;return c.unsubscribe=()=>P.asap(l),c}},Fk=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let n=0,a;for(;n<r;)a=n+s,yield t.slice(n,a),n=a},$k=async function*(t,s){for await(const r of Bk(t))yield*Fk(r,s)},Bk=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:r,value:n}=await s.read();if(r)break;yield n}}finally{await s.cancel()}},Gd=(t,s,r,n)=>{const a=$k(t,s);let o=0,i,l=c=>{i||(i=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let x=o+=h;r(x)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Co=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Mx=Co&&typeof ReadableStream=="function",Uk=Co&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Lx=(t,...s)=>{try{return!!t(...s)}catch{return!1}},zk=Mx&&Lx(()=>{let t=!1;const s=new Request(Ze.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Xd=64*1024,Gi=Mx&&Lx(()=>P.isReadableStream(new Response("").body)),La={stream:Gi&&(t=>t.body)};Co&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!La[s]&&(La[s]=P.isFunction(t[s])?r=>r[s]():(r,n)=>{throw new ve(`Response type '${s}' is not supported`,ve.ERR_NOT_SUPPORT,n)})})})(new Response);const Wk=async t=>{if(t==null)return 0;if(P.isBlob(t))return t.size;if(P.isSpecCompliantForm(t))return(await new Request(Ze.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(P.isArrayBufferView(t)||P.isArrayBuffer(t))return t.byteLength;if(P.isURLSearchParams(t)&&(t=t+""),P.isString(t))return(await Uk(t)).byteLength},Hk=async(t,s)=>{const r=P.toFiniteNumber(t.getContentLength());return r??Wk(s)},qk=Co&&(async t=>{let{url:s,method:r,data:n,signal:a,cancelToken:o,timeout:i,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:x}=Ox(t);d=d?(d+"").toLowerCase():"text";let f=Lk([a,o&&o.toAbortSignal()],i),b;const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let p;try{if(c&&zk&&r!=="get"&&r!=="head"&&(p=await Hk(u,n))!==0){let k=new Request(s,{method:"POST",body:n,duplex:"half"}),R;if(P.isFormData(n)&&(R=k.headers.get("content-type"))&&u.setContentType(R),k.body){const[C,E]=qd(p,Ma(Kd(c)));n=Gd(k.body,Xd,C,E)}}P.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;b=new Request(s,{...x,signal:f,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?h:void 0});let v=await fetch(b,x);const j=Gi&&(d==="stream"||d==="response");if(Gi&&(l||j&&g)){const k={};["status","statusText","headers"].forEach(M=>{k[M]=v[M]});const R=P.toFiniteNumber(v.headers.get("content-length")),[C,E]=l&&qd(R,Ma(Kd(l),!0))||[];v=new Response(Gd(v.body,Xd,C,()=>{E&&E(),g&&g()}),k)}d=d||"text";let w=await La[P.findKey(La,d)||"text"](v,t);return!j&&g&&g(),await new Promise((k,R)=>{Ix(k,R,{data:w,headers:ht.from(v.headers),status:v.status,statusText:v.statusText,config:t,request:b})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new ve("Network Error",ve.ERR_NETWORK,t,b),{cause:y.cause||y}):ve.from(y,y&&y.code,t,b)}}),Xi={http:ok,xhr:Mk,fetch:qk};P.forEach(Xi,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Yd=t=>`- ${t}`,Kk=t=>P.isFunction(t)||t===null||t===!1,Fx={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:s}=t;let r,n;const a={};for(let o=0;o<s;o++){r=t[o];let i;if(n=r,!Kk(r)&&(n=Xi[(i=String(r)).toLowerCase()],n===void 0))throw new ve(`Unknown adapter '${i}'`);if(n)break;a[i||"#"+o]=n}if(!n){const o=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=s?o.length>1?`since :
`+o.map(Yd).join(`
`):" "+Yd(o[0]):"as no adapter specified";throw new ve("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return n},adapters:Xi};function di(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Pr(null,t)}function Jd(t){return di(t),t.headers=ht.from(t.headers),t.data=ci.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Fx.getAdapter(t.adapter||Mn.adapter)(t).then(function(n){return di(t),n.data=ci.call(t,t.transformResponse,n),n.headers=ht.from(n.headers),n},function(n){return Px(n)||(di(t),n&&n.response&&(n.response.data=ci.call(t,t.transformResponse,n.response),n.response.headers=ht.from(n.response.headers))),Promise.reject(n)})}const $x="1.11.0",Ro={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Ro[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const Qd={};Ro.transitional=function(s,r,n){function a(o,i){return"[Axios v"+$x+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,l)=>{if(s===!1)throw new ve(a(i," has been removed"+(r?" in "+r:"")),ve.ERR_DEPRECATED);return r&&!Qd[i]&&(Qd[i]=!0,console.warn(a(i," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(o,i,l):!0}};Ro.spelling=function(s){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function Vk(t,s,r){if(typeof t!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const o=n[a],i=s[o];if(i){const l=t[o],c=l===void 0||i(l,o,t);if(c!==!0)throw new ve("option "+o+" must be "+c,ve.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ve("Unknown option "+o,ve.ERR_BAD_OPTION)}}const xa={assertOptions:Vk,validators:Ro},Ut=xa.validators;class Fs{constructor(s){this.defaults=s||{},this.interceptors={request:new Wd,response:new Wd}}async request(s,r){try{return await this._request(s,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const o=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=Ws(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:o}=r;n!==void 0&&xa.assertOptions(n,{silentJSONParsing:Ut.transitional(Ut.boolean),forcedJSONParsing:Ut.transitional(Ut.boolean),clarifyTimeoutError:Ut.transitional(Ut.boolean)},!1),a!=null&&(P.isFunction(a)?r.paramsSerializer={serialize:a}:xa.assertOptions(a,{encode:Ut.function,serialize:Ut.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),xa.assertOptions(r,{baseUrl:Ut.spelling("baseURL"),withXsrfToken:Ut.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let i=o&&P.merge(o.common,o[r.method]);o&&P.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),r.headers=ht.concat(i,o);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,x;if(!c){const b=[Jd.bind(this),void 0];for(b.unshift(...l),b.push(...d),x=b.length,u=Promise.resolve(r);h<x;)u=u.then(b[h++],b[h++]);return u}x=l.length;let f=r;for(h=0;h<x;){const b=l[h++],g=l[h++];try{f=b(f)}catch(p){g.call(this,p);break}}try{u=Jd.call(this,f)}catch(b){return Promise.reject(b)}for(h=0,x=d.length;h<x;)u=u.then(d[h++],d[h++]);return u}getUri(s){s=Ws(this.defaults,s);const r=Dx(s.baseURL,s.url,s.allowAbsoluteUrls);return Ax(r,s.params,s.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(s){Fs.prototype[s]=function(r,n){return this.request(Ws(n||{},{method:s,url:r,data:(n||{}).data}))}});P.forEach(["post","put","patch"],function(s){function r(n){return function(o,i,l){return this.request(Ws(l||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}Fs.prototype[s]=r(),Fs.prototype[s+"Form"]=r(!0)});class uc{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const n=this;this.promise.then(a=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](a);n._listeners=null}),this.promise.then=a=>{let o;const i=new Promise(l=>{n.subscribe(l),o=l}).then(a);return i.cancel=function(){n.unsubscribe(o)},i},s(function(o,i,l){n.reason||(n.reason=new Pr(o,i,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=n=>{s.abort(n)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new uc(function(a){s=a}),cancel:s}}}function Gk(t){return function(r){return t.apply(null,r)}}function Xk(t){return P.isObject(t)&&t.isAxiosError===!0}const Yi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yi).forEach(([t,s])=>{Yi[s]=t});function Bx(t){const s=new Fs(t),r=gx(Fs.prototype.request,s);return P.extend(r,Fs.prototype,s,{allOwnKeys:!0}),P.extend(r,s,null,{allOwnKeys:!0}),r.create=function(a){return Bx(Ws(t,a))},r}const Ue=Bx(Mn);Ue.Axios=Fs;Ue.CanceledError=Pr;Ue.CancelToken=uc;Ue.isCancel=Px;Ue.VERSION=$x;Ue.toFormData=ko;Ue.AxiosError=ve;Ue.Cancel=Ue.CanceledError;Ue.all=function(s){return Promise.all(s)};Ue.spread=Gk;Ue.isAxiosError=Xk;Ue.mergeConfig=Ws;Ue.AxiosHeaders=ht;Ue.formToJSON=t=>Tx(P.isHTMLForm(t)?new FormData(t):t);Ue.getAdapter=Fx.getAdapter;Ue.HttpStatusCode=Yi;Ue.default=Ue;const Zd={baseURL:"https://api.nicola.id/",timeout:parseInt("10000"),enableLogging:!0},pe={dashboard:{overview:"/api/dashboard/overview",dailyChart:"/api/dashboard/chart/daily",monthlyChart:"/api/dashboard/chart/monthly",realtime:"/api/dashboard/realtime",predictions:"/api/dashboard/predictions"},users:{activity:"/api/dashboard/users/activity",all:"/api/dashboard/users/all",stats:"/api/dashboard/users/stats",behavior:"/api/dashboard/users/behavior",transactions:t=>`/api/dashboard/users/${t}/transactions`},transactions:{search:t=>`/api/dashboard/transactions/search/${t}`,recent:t=>`/api/dashboard/transactions/recent${t?`?limit=${t}`:""}`,withReceipt:t=>`/api/dashboard/transactions/${t}/with-receipt`},analytics:{advanced:"/api/dashboard/analytics/advanced",finance:"/api/dashboard/finance/analytics"},products:{stats:"/api/dashboard/products/stats",performance:"/api/dashboard/products/performance",create:"/api/dashboard/products",get:t=>`/api/dashboard/products/${t}`,update:t=>`/api/dashboard/products/${t}`,delete:t=>`/api/dashboard/products/${t}`,stock:"/api/dashboard/products/stock",stockSummary:"/api/dashboard/products/stock/summary",stockAlerts:"/api/dashboard/products/stock/alerts",stockAnalytics:"/api/dashboard/products/stock/analytics",stockReport:"/api/dashboard/products/stock/report",stockExport:"/api/dashboard/products/stock/export",updateStock:t=>`/api/dashboard/products/${t}/stock`,stockHistory:t=>`/api/dashboard/products/${t}/stock/history`,stockDetails:t=>`/api/dashboard/products/${t}/stock/details`,bulkStockUpdate:"/api/dashboard/products/stock/bulk-update",addStock:t=>`/api/dashboard/products/${t}/stock/add`,editStock:(t,s)=>`/api/dashboard/products/${t}/stock/${s}`,deleteStock:(t,s)=>`/api/dashboard/products/${t}/stock/${s}`,deleteMultipleStock:t=>`/api/dashboard/products/${t}/stock`,getStockItem:(t,s)=>`/api/dashboard/products/${t}/stock/${s}`,replaceAllStock:t=>`/api/dashboard/products/${t}/stock/replace-all`,bulkOperations:"/api/dashboard/products/stock/bulk-operations",stockItem:t=>`/api/dashboard/products/${t}/stock/item`},export:t=>`/api/dashboard/export/${t}`,receipts:{all:"/api/dashboard/receipts",get:t=>`/api/dashboard/receipts/${t}`,download:t=>`/api/dashboard/receipts/${t}/download`,delete:t=>`/api/dashboard/receipts/${t}`}};function Yk(t,s,r){return Array.isArray(t)?{isValid:!0,data:t}:(console.warn(`${r}: data is not an array:`,t),{isValid:!1,error:`${r}: Expected array, got ${typeof t}`,fallbackData:s})}const me=Ue.create({baseURL:Zd.baseURL,timeout:Zd.timeout});me.interceptors.request.use(t=>{var s;return console.log(`Making ${(s=t.method)==null?void 0:s.toUpperCase()} request to ${t.url}`),t});me.interceptors.response.use(t=>t,t=>{var s;return console.error("API Error:",((s=t.response)==null?void 0:s.data)||t.message),Promise.reject(t)});function eu(t){return t>=1e6?"gold":t>=5e5?"silver":"bronze"}const ue={async getOverview(){const t=await me.get(pe.dashboard.overview);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch dashboard overview")},async getDailyChart(){const t=await me.get(pe.dashboard.dailyChart);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch daily chart data")},async getMonthlyChart(){const t=await me.get(pe.dashboard.monthlyChart);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch monthly chart data")},async getUserActivity(){const t=await me.get(pe.users.activity);if(console.log(" Debug: Full API response:",t.data),t.data.success&&t.data.data){const s=t.data.data;if(s&&typeof s=="object"&&Array.isArray(s.userActivity)){console.log(" Debug: Valid user activity structure detected"),console.log(" Debug: User activity array length:",s.userActivity.length),s.userActivity.length>0&&(console.log(" Debug: First user data structure:",s.userActivity[0]),console.log(" Debug: Available fields:",Object.keys(s.userActivity[0])));const i=s.userActivity.map(l=>{var h;const c=l.totalTransaksi||l.transactionCount||l.transaksi||l.count||0,d=l.totalSpent||l.totalPendapatan||l.spent||l.amount||0,u=l.saldo||l.balance||l.credit||0;return console.log(` Debug: User ${l.user||"unknown"} - transactionCount: ${c}, totalSpent: ${d}`),{userId:l.user||l.userId||l.user_id||"unknown",username:l.user||l.username||l.name||"User "+((h=l.user||l.userId||"unknown")==null?void 0:h.slice(-4)),lastActivity:l.lastActivity||l.last_activity||l.updatedAt||new Date().toISOString(),transactionCount:c,totalSpent:d,saldo:u,role:eu(d)}});return{activeUsers:s.activeUsers||0,newUsers:s.newUsers||0,userActivity:i,activityTrends:s.activityTrends||{dailyActive:[0],weeklyActive:[0],monthlyActive:[0]}}}const r=Yk(s,[],"getUserActivity");if(!r.isValid)return console.warn(r.error),{activeUsers:0,newUsers:0,userActivity:[],activityTrends:{dailyActive:[0],weeklyActive:[0],monthlyActive:[0]}};const n=s.length,a=s.filter(i=>{const l=new Date(i.lastActivity);return Math.floor((new Date().getTime()-l.getTime())/(1e3*60*60*24))<=30}).length;s.length>0&&(console.log(" Debug: First user data structure:",s[0]),console.log(" Debug: Available fields:",Object.keys(s[0])));const o=s.map(i=>{var u;const l=i.totalTransaksi||i.transactionCount||i.transaksi||i.count||0,c=i.totalSpent||i.totalPendapatan||i.spent||i.amount||0,d=i.saldo||i.balance||i.credit||0;return console.log(` Debug: User ${i.user||"unknown"} - transactionCount: ${l}, totalSpent: ${c}`),{userId:i.user||i.userId||i.user_id||"unknown",username:i.user||i.username||i.name||"User "+((u=i.user||i.userId||"unknown")==null?void 0:u.slice(-4)),lastActivity:i.lastActivity||i.last_activity||i.updatedAt||new Date().toISOString(),transactionCount:l,totalSpent:c,saldo:d,role:eu(c)}});return{activeUsers:n,newUsers:a,userActivity:o,activityTrends:{dailyActive:[n],weeklyActive:[n],monthlyActive:[n]}}}throw new Error(t.data.error||"Failed to fetch user activity")},async getUserTransactions(t){const s=[t,t.includes("@s.whatsapp.net")?t:`${t}@s.whatsapp.net`,t.replace("@s.whatsapp.net","")];console.log(" Debug: Trying getUserTransactions with IDs:",s);let r=null;for(const n of s)try{console.log(` Debug: Attempting API call with userId: ${n}`);const a=await me.get(pe.users.transactions(n));if(a.data.success&&a.data.data){if(console.log(` Success with userId: ${n}`),console.log(" Debug: API response data:",a.data.data),console.log(" Debug: Available fields:",Object.keys(a.data.data)),!a.data.data.transaksi||!Array.isArray(a.data.data.transaksi))return console.warn("getUserTransactions: transaksi is not an array:",a.data.data.transaksi),{user:n,userId:n,transaksi:[],totalTransaksi:0,totalSpent:0};const o={...a.data.data,transaksi:a.data.data.transaksi.map(i=>({...i,user:i.user_name||i.user||"Anonymous User",metodeBayar:i.payment_method||i.metodeBayar||"Not specified",reffId:i.order_id||i.reffId||"N/A",user_name:i.user_name,payment_method:i.payment_method,user_id:i.user_id,order_id:i.order_id}))};return console.log(" Debug: Transformed data:",o),console.log(` Debug: Transaction count: ${o.transaksi.length}, Total spent: ${o.totalSpent}`),o}}catch(a){console.log(` Failed with userId: ${n}`,a),r=a;continue}throw new Error((r==null?void 0:r.message)||"Failed to fetch user transactions with any ID format")},async getUserStats(){const t=await me.get(pe.users.stats);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch user stats")},async searchTransaction(t){const s=await me.get(pe.transactions.search(t));if(s.data.success&&s.data.data)return{...s.data.data,user:s.data.data.user||"Anonymous User",metodeBayar:s.data.data.metodeBayar||"Not specified",user_name:s.data.data.user_name,payment_method:s.data.data.payment_method};throw new Error(s.data.error||"Failed to search transaction")},async getTransactionWithReceipt(t){const s=await me.get(pe.transactions.withReceipt(t));if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.error||"Failed to fetch transaction with receipt")},async getRecentTransactions(t=20){const s=await me.get(pe.transactions.recent(t));if(s.data.success&&s.data.data)return!s.data.data.transactions||!Array.isArray(s.data.data.transactions)?(console.warn("getRecentTransactions: transactions is not an array:",s.data.data.transactions),{transactions:[],count:0,limit:t}):{...s.data.data,transactions:s.data.data.transactions.map(n=>({...n,user:n.user_name||n.user||"Anonymous User",metodeBayar:n.payment_method||n.metodeBayar||"Not specified",reffId:n.order_id||n.reffId||"N/A",user_name:n.user_name,payment_method:n.payment_method,user_id:n.user_id,order_id:n.order_id}))};throw new Error(s.data.error||"Failed to fetch recent transactions")},async getProductStats(){const t=await me.get(pe.products.stats);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch product stats")},async exportData(t){return(await me.get(pe.export(t))).data},async getAllUsers(t=1,s=10,r="",n="all"){const a=new URLSearchParams({page:t.toString(),limit:s.toString(),search:r,role:n}),o=await me.get(`${pe.users.all}?${a}`);if(console.log(" Debug: getAllUsers response:",o.data),o.data.success&&o.data.data)return o.data.data.users&&o.data.data.users.length>0&&(console.log(" Debug: First user from getAllUsers:",o.data.data.users[0]),console.log(" Debug: getAllUsers user IDs:",o.data.data.users.map(i=>i.userId||i.user_id||i.user||"unknown"))),o.data.data;throw new Error(o.data.error||"Failed to fetch all users")},async getEnhancedUserActivity(){try{const t=await ue.getUserActivity(),s=await ue.getRecentTransactions(100);console.log(" Debug: Recent transactions response:",s);const r=new Map;s.transactions&&(console.log(" Debug: Processing transactions..."),s.transactions.forEach((a,o)=>{var d,u;const i=[a.user_id,a.user,a.user_name,(d=a.user_id)==null?void 0:d.replace("@s.whatsapp.net",""),(u=a.user)==null?void 0:u.replace("@s.whatsapp.net",""),a.user_id?`${a.user_id}@s.whatsapp.net`:null,a.user?`${a.user}@s.whatsapp.net`:null].filter(Boolean);o<5&&console.log(` Debug: Transaction ${o+1} possible user IDs:`,i);const l=i[0]||"unknown",c=r.get(l)||{count:0,totalSpent:0};r.set(l,{count:c.count+1,totalSpent:c.totalSpent+(a.totalBayar||a.price||0)}),i.forEach(h=>{if(h&&h!==l){const x=r.get(h)||{count:0,totalSpent:0};r.set(h,{count:x.count+1,totalSpent:x.totalSpent+(a.totalBayar||a.price||0)})}})})),console.log(" Debug: User transaction map keys:",Array.from(r.keys())),console.log(" Debug: User activity user IDs:",t.userActivity.map(a=>a.userId));const n=t.userActivity.map(a=>{var c,d,u;const o=[a.userId,(c=a.userId)==null?void 0:c.replace("@s.whatsapp.net",""),a.userId?`${a.userId}@s.whatsapp.net`:null,(u=(d=a.userId)==null?void 0:d.match(/\d+/))==null?void 0:u[0]].filter(Boolean);let i={count:0,totalSpent:0};for(const h of o){const x=r.get(h);if(x&&x.count>0){i=x,console.log(` Debug: Found transaction data for user ${a.userId} using ID ${h}:`,x);break}}i.count===0&&console.log(` Debug: No transaction data found for user ${a.userId}, tried IDs:`,o);const l={...a,transactionCount:i.count||a.transactionCount||0,totalSpent:i.totalSpent||a.totalSpent||0};return console.log(` Debug: Enhanced user ${a.userId}:`,{original:{transactionCount:a.transactionCount,totalSpent:a.totalSpent},transactionInfo:i,final:{transactionCount:l.transactionCount,totalSpent:l.totalSpent}}),l});return console.log(" Debug: Enhanced user activity with transaction data:",n),{...t,userActivity:n}}catch(t){return console.error("Error getting enhanced user activity:",t),ue.getUserActivity()}},async getEnhancedAllUsers(t=1,s=10,r="",n="all"){try{const a=await this.getAllUsers(t,s,r,n);console.log(" Debug: Using individual user transaction API calls for accuracy");const o=i=>!i||typeof i!="string"?null:i.replace("@s.whatsapp.net","").replace("@lid","").trim();if(a.users&&Array.isArray(a.users)){console.log(" Debug: Original users data:",a.users.map(l=>({userId:l.userId||l.user_id||l.user,username:l.username,transactionCount:l.transactionCount,totalSpent:l.totalSpent})));const i=await Promise.all(a.users.map(async l=>{var c;try{const d=o(l.userId);if(!d)return console.log(" Debug: Could not normalize ID for user:",l.userId),{...l,transactionCount:0,totalSpent:0,hasTransactions:!1};const u=await this.getUserTransactions(d);return console.log(` Debug: User ${l.userId} (${d}) - API Response:`,{totalTransaksi:u.totalTransaksi,totalSpent:u.totalSpent,transactionCount:((c=u.transaksi)==null?void 0:c.length)||0}),{...l,transactionCount:u.totalTransaksi||0,totalSpent:u.totalSpent||0,lastActivity:u.transaksi&&u.transaksi.length>0?u.transaksi[0].date:l.lastActivity,hasTransactions:(u.totalTransaksi||0)>0,_debugNormalizedId:d,_debugApiResponse:{totalTransaksi:u.totalTransaksi,totalSpent:u.totalSpent}}}catch(d){return console.log(` Debug: Failed to get transactions for user ${l.userId}:`,d),{...l,transactionCount:l.transactionCount||0,totalSpent:l.totalSpent||0,hasTransactions:(l.transactionCount||0)>0}}}));return console.log(" Debug: Enhanced users data:",i.map(l=>({userId:l.userId||l.user_id,username:l.username,transactionCount:l.transactionCount,totalSpent:l.totalSpent,hasTransactions:l.hasTransactions,normalizedId:l._debugNormalizedId}))),{...a,users:i}}return a}catch(a){return console.error("Error getting enhanced users:",a),this.getAllUsers(t,s,r,n)}},async getProductStock(){const t=await me.get(pe.products.stock);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch product stock")},async createProduct(t){const s=await me.post(pe.products.create,t);if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.error||"Failed to create product")},async getProduct(t){const s=await me.get(pe.products.get(t));if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.error||"Failed to get product")},async updateProduct(t,s){const r=await me.patch(pe.products.update(t),s);if(r.data.success)return{success:!0,data:r.data.data};throw new Error(r.data.error||"Failed to update product")},async deleteProduct(t){const s=await me.delete(pe.products.delete(t));if(s.data.success)return{success:!0,data:s.data.data};throw new Error(s.data.error||"Failed to delete product")},async getStockSummary(){const t=await me.get(pe.products.stockSummary);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch stock summary")},async getStockAlerts(){const t=await me.get(pe.products.stockAlerts);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch stock alerts")},async getProductStockHistory(t){const s=await me.get(pe.products.stockHistory(t));if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.error||"Failed to fetch product stock history")},async getProductStockDetails(t){const s=await me.get(pe.products.stockDetails(t));if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.error||"Failed to fetch product stock details")},async updateProductStock(t,s){const r=await me.put(pe.products.updateStock(t),s);if(r.data.success&&r.data.data)return r.data.data;throw new Error(r.data.error||"Failed to update product stock")},async bulkUpdateStock(t){const s=await me.post(pe.products.stock+"/bulk-update",{updates:t});if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.error||"Failed to perform bulk stock update")},async getStockAnalytics(){const t=await me.get(pe.products.stockAnalytics);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch stock analytics")},async getStockReport(){const t=await me.get(pe.products.stockReport);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to generate stock report")},async exportStockCSV(){return(await me.get(pe.products.stockExport,{responseType:"blob"})).data},async getAdvancedAnalytics(){var s;const t=await me.get(pe.analytics.advanced);if(t.data.success&&t.data.data){const r=t.data.data;return{...r,topProducts:((s=r.topProducts)==null?void 0:s.map(n=>({id:n.id,name:n.name,revenue:n.totalRevenue||0,sold:n.totalSold||0})))||[]}}throw new Error(t.data.error||"Failed to fetch advanced analytics")},async getProductPerformance(){const t=await me.get(pe.products.performance);if(t.data.success&&t.data.data){const s=t.data.data,n=[...s.products||[],...s.topProducts||[],...s.lowStock||[]].reduce((c,d)=>(c.find(u=>u.id===d.id)||c.push(d),c),[]),a=n.length,o=n.reduce((c,d)=>{var u;return c+(((u=d.sales)==null?void 0:u.totalRevenue)||0)},0),i=n.reduce((c,d)=>{var u;return c+(((u=d.sales)==null?void 0:u.totalProfit)||0)},0),l=o>0?i/o*100:0;return{products:n,summary:{totalProducts:a,totalRevenue:o,totalProfit:i,avgProfitMargin:l},insights:{topByRevenue:(s.products||[]).map(c=>{var d,u,h;return{...c,revenue:((d=c.sales)==null?void 0:d.totalRevenue)||0,profit:((u=c.sales)==null?void 0:u.totalProfit)||0,conversionRate:((h=c.metrics)==null?void 0:h.conversionRate)||0}}).sort((c,d)=>d.revenue-c.revenue).slice(0,5),topByProfit:(s.products||[]).map(c=>{var d,u,h;return{...c,revenue:((d=c.sales)==null?void 0:d.totalRevenue)||0,profit:((u=c.sales)==null?void 0:u.totalProfit)||0,conversionRate:((h=c.metrics)==null?void 0:h.conversionRate)||0}}).sort((c,d)=>d.profit-c.profit).slice(0,5),topByConversion:(s.products||[]).map(c=>{var d,u,h;return{...c,revenue:((d=c.sales)==null?void 0:d.totalRevenue)||0,profit:((u=c.sales)==null?void 0:u.totalProfit)||0,conversionRate:((h=c.metrics)==null?void 0:h.conversionRate)||0}}).sort((c,d)=>d.conversionRate-c.conversionRate).slice(0,5),lowStock:(s.lowStock||[]).map(c=>{var d,u,h;return{...c,revenue:((d=c.sales)==null?void 0:d.totalRevenue)||0,profit:((u=c.sales)==null?void 0:u.totalProfit)||0,conversionRate:((h=c.metrics)==null?void 0:h.conversionRate)||0}})}}}throw new Error(t.data.error||"Failed to fetch product performance")},async getUserBehaviorAnalytics(){try{const s=(await this.getEnhancedAllUsers(1,1e3)).users;console.log(" getUserBehaviorAnalytics Debug: Processing",s.length,"users");const r={new:s.filter(u=>(u.transactionCount||0)<=1),regular:s.filter(u=>(u.transactionCount||0)>=2&&(u.transactionCount||0)<=5),loyal:s.filter(u=>(u.transactionCount||0)>=6&&(u.transactionCount||0)<=10),vip:s.filter(u=>(u.transactionCount||0)>=11)};console.log(" Segment counts:",{new:r.new.length,regular:r.regular.length,loyal:r.loyal.length,vip:r.vip.length});const n=s.length,a=Object.entries(r).reduce((u,[h,x])=>{const f=x.length,b=x.reduce((p,y)=>p+(y.totalSpent||0),0),g=x.reduce((p,y)=>p+(y.transactionCount||0),0);return u[h]={count:f,totalSpent:b,avgSpent:f>0?Math.round(b/f):0,avgTransactions:f>0?Math.round(g/f*10)/10:0,percentage:n>0?Math.round(f/n*1e3)/10:0},u},{});console.log(" Segment Stats Debug:",a);const o=s.filter(u=>{if(!u.lastActivity)return!1;const h=new Date(u.lastActivity),x=new Date;return x.setDate(x.getDate()-30),h>x}).length,i=n-o,l=n>0?i/n*100:0,c=s.filter(u=>(u.totalSpent||0)>0).sort((u,h)=>(h.totalSpent||0)-(u.totalSpent||0)).slice(0,10).map(u=>({...u,username:u.username==="User .net"||u.username==="User @lid"||!u.username?u.userId.replace("@s.whatsapp.net","").replace("@lid",""):u.username,displayId:u.userId.replace("@s.whatsapp.net","").replace("@lid","")})),d=s.filter(u=>(u.transactionCount||0)>0).sort((u,h)=>(h.transactionCount||0)-(u.transactionCount||0)).slice(0,10).map(u=>({...u,username:u.username==="User .net"||u.username==="User @lid"||!u.username?u.userId.replace("@s.whatsapp.net","").replace("@lid",""):u.username,displayId:u.userId.replace("@s.whatsapp.net","").replace("@lid","")}));return{segments:r,segmentStats:a,churnAnalysis:{churnedUsers:i,churnRate:l,recentlyActive:o},insights:{paymentPreferences:{Saldo:n*.85,"Transfer Bank":n*.1,"E-Wallet":n*.05},mostActiveHour:{8:15,9:25,10:35,11:45,12:55,13:66,14:63,15:58,16:52,17:48,18:68,19:75,20:67,21:84,22:42,23:28},topSpenders:c,mostFrequentBuyers:d}}}catch(t){throw console.error("Error in getUserBehaviorAnalytics:",t),new Error("Failed to fetch user behavior analytics")}},async getFinancialAnalytics(){const t=await me.get(pe.analytics.finance);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch financial analytics")},async getRealtimeDashboard(){const t=await me.get(pe.dashboard.realtime);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch realtime dashboard data")},async getPredictiveAnalytics(){const t=await me.get(pe.dashboard.predictions);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch predictive analytics")},async getStockAnalyticsAdvanced(){const t=await me.get(pe.products.stockAnalytics);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch advanced stock analytics")},async bulkUpdateStockAdvanced(t){const s=await me.post(pe.products.bulkStockUpdate,t);if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.error||"Failed to perform bulk stock update")},async addStock(t,s){const r=await me.post(pe.products.addStock(t),s);if(r.data.success&&r.data.data)return r.data.data;throw new Error(r.data.message||r.data.error||"Failed to add stock")},async editStock(t,s,r){const n=await me.put(pe.products.editStock(t,s),r);if(n.data.success&&n.data.data)return n.data.data;throw new Error(n.data.message||n.data.error||"Failed to edit stock")},async deleteStock(t,s,r={}){const n=await me.delete(pe.products.deleteStock(t,s),{data:r});if(n.data.success&&n.data.data)return n.data.data;throw new Error(n.data.message||n.data.error||"Failed to delete stock")},async deleteMultipleStock(t,s){const r=await me.delete(pe.products.deleteMultipleStock(t),{data:s});if(r.data.success&&r.data.data)return r.data.data;throw new Error(r.data.message||r.data.error||"Failed to delete multiple stock")},async getStockItem(t,s){const r=await me.get(pe.products.getStockItem(t,s));if(r.data.success&&r.data.data)return r.data.data;throw new Error(r.data.message||r.data.error||"Failed to get stock item")},async replaceAllStock(t,s){const r=await me.put(pe.products.replaceAllStock(t),s);if(r.data.success&&r.data.data)return r.data.data;throw new Error(r.data.message||r.data.error||"Failed to replace all stock")},async bulkStockOperations(t){const s=await me.post(pe.products.bulkOperations,t);if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.message||s.data.error||"Failed to perform bulk operations")},async addStockItem(t,s){const r=await me.post(pe.products.stockItem(t),s);if(r.data.success&&r.data.data)return r.data.data;throw new Error(r.data.error||"Failed to add stock item")},async editStockItem(t,s){const r=await me.patch(pe.products.stockItem(t),s);if(r.data.success)return r.data.data||{success:!0};throw new Error(r.data.message||r.data.error||"Failed to edit stock item")},async deleteStockItem(t,s){const r=await me.delete(pe.products.stockItem(t),{data:s});if(r.data.success)return r.data.data||{success:!0};throw new Error(r.data.message||r.data.error||"Failed to delete stock item")},async getAllReceipts(){const t=await me.get(pe.receipts.all);if(t.data.success&&t.data.data)return t.data.data;throw new Error(t.data.error||"Failed to fetch receipts")},async getReceiptContent(t){const s=await me.get(pe.receipts.get(t));if(s.data.success&&s.data.data)return s.data.data;throw new Error(s.data.error||"Failed to fetch receipt content")},async downloadReceipt(t){return(await me.get(pe.receipts.download(t),{responseType:"blob"})).data},async deleteReceipt(t){const s=await me.delete(pe.receipts.delete(t));if(s.data.success)return s.data;throw new Error(s.data.error||"Failed to delete receipt")}},Jk=kr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-slate-200 focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function re({className:t,variant:s,...r}){return e.jsx("div",{className:O(Jk({variant:s}),t),...r})}function Qk(){const{data:t,isLoading:s}=Ne({queryKey:["predictive-analytics"],queryFn:ue.getPredictiveAnalytics});return s?e.jsx(Zk,{}):t?e.jsxs(N,{className:"card-premium border-none shadow-soft bg-gradient-to-br from-violet-500/5 to-fuchsia-500/5 border-l-4 border-l-violet-500",children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-violet-500/10 rounded-lg",children:e.jsx(Kb,{className:"h-5 w-5 text-violet-500"})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-lg",children:"AI Insights"}),e.jsx(X,{children:"Predictive performance analysis"})]})]}),e.jsx(re,{variant:"secondary",className:"bg-violet-100 text-violet-700 hover:bg-violet-200 border-violet-200",children:"Beta"})]})}),e.jsxs(S,{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-xs font-medium uppercase tracking-wider",children:[e.jsx($e,{className:"h-3 w-3"}),"Next Month Revenue"]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:ke(t.revenue.predicted.nextMonth)}),e.jsxs("div",{className:"text-xs text-emerald-500 font-medium flex items-center",children:[t.revenue.predicted.confidence," confidence"]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-xs font-medium uppercase tracking-wider",children:[e.jsx(Ve,{className:"h-3 w-3"}),"Projected Growth"]}),e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:["+",t.users.predicted.nextMonthNewUsers]}),e.jsx("div",{className:"text-xs text-blue-500 font-medium",children:"New users expected"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-background/50 border border-border/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground text-xs font-medium uppercase tracking-wider",children:[e.jsx(Ht,{className:"h-3 w-3"}),"Churn Risk"]}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:t.churnRisk.highRisk}),e.jsx("div",{className:"text-xs text-rose-500 font-medium",children:"High risk users detected"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Smart Recommendations"}),e.jsx("div",{className:"space-y-2",children:t.recommendations.slice(0,3).map((r,n)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-background/40 hover:bg-background/60 transition-colors border border-transparent hover:border-border/50 cursor-default group",children:[e.jsx("div",{className:"mt-0.5 w-1.5 h-1.5 rounded-full bg-violet-500 group-hover:scale-125 transition-transform"}),e.jsx("p",{className:"text-sm text-foreground/80 leading-relaxed",children:r})]},n))}),e.jsx("div",{className:"pt-2",children:e.jsxs("button",{className:"text-xs text-violet-600 font-medium flex items-center hover:underline",children:["View all insights ",e.jsx(Wu,{className:"ml-1 h-3 w-3"})]})})]})]})]}):null}function Zk(){return e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-10 w-10 rounded-lg"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(tt,{className:"h-5 w-32"}),e.jsx(tt,{className:"h-4 w-48"})]})]})}),e.jsxs(S,{className:"space-y-6 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(tt,{className:"h-24 rounded-xl"}),e.jsx(tt,{className:"h-24 rounded-xl"}),e.jsx(tt,{className:"h-24 rounded-xl"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(tt,{className:"h-4 w-40"}),e.jsx(tt,{className:"h-12 w-full"}),e.jsx(tt,{className:"h-12 w-full"})]})]})]})}function eC(){const{data:t,isLoading:s}=Ne({queryKey:["predictive-analytics"],queryFn:ue.getPredictiveAnalytics});if(s)return e.jsx(tt,{className:"h-[400px] w-full rounded-xl"});if(!t)return null;const r=[...t.revenue.historical.map(a=>({month:a.month,actual:a.revenue,predicted:null,confidence:null})),{month:"Next Month",actual:null,predicted:t.revenue.predicted.nextMonth,confidence:[t.revenue.predicted.nextMonth*.9,t.revenue.predicted.nextMonth*1.1]}],n=[...t.users.historical.map(a=>({month:a.month,users:a.count,type:"Historical"})),{month:"Next Month",users:t.users.predicted.totalPredicted,type:"Predicted"}];return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Revenue Forecast"}),e.jsx(X,{children:"AI-powered revenue prediction with confidence intervals"})]}),e.jsxs(re,{variant:"secondary",className:"bg-violet-500/10 text-violet-700",children:[e.jsx($u,{className:"mr-1 h-3 w-3"}),"AI Model v2.1"]})]})}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(Xc,{data:r,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorActual",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorPredicted",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})]}),e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(Me,{axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:a=>`${a/1e3}k`}),e.jsx(_e,{formatter:(a,o)=>[ke(a),o==="actual"?"Actual Revenue":"Predicted Revenue"],contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.5rem"}}),e.jsx($s,{}),e.jsx(is,{type:"monotone",dataKey:"actual",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorActual)",strokeWidth:3,name:"Actual"}),e.jsx(is,{type:"monotone",dataKey:"predicted",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorPredicted)",strokeWidth:3,strokeDasharray:"5 5",name:"Predicted"})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"User Growth Trajectory"}),e.jsx(X,{children:"Projected user base expansion"})]}),e.jsxs(re,{variant:"secondary",className:"bg-emerald-500/10 text-emerald-700",children:[e.jsx(Ss,{className:"mr-1 h-3 w-3"}),"On Track"]})]})}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(Xc,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"month",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(Me,{axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(_e,{cursor:{fill:"hsl(var(--muted)/0.2)"},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.5rem"}}),e.jsx($s,{}),e.jsx(dt,{dataKey:"users",name:"Total Users",radius:[4,4,0,0],barSize:40,children:n.map((a,o)=>e.jsx(Ot,{fill:a.type==="Predicted"?"#8b5cf6":"hsl(var(--primary))"},`cell-${o}`))}),e.jsx(as,{type:"monotone",dataKey:"users",stroke:"#10b981",strokeWidth:2,dot:!1,name:"Trend"})]})})})})]})]})}const mc=Lh,tC=uN,sC=Fh,Ux=m.forwardRef(({className:t,...s},r)=>e.jsx(fo,{ref:r,className:O("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Ux.displayName=fo.displayName;const _o=m.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(sC,{children:[e.jsx(Ux,{}),e.jsxs(xo,{ref:n,className:O("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs($h,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(pl,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_o.displayName=xo.displayName;const Ao=({className:t,...s})=>e.jsx("div",{className:O("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});Ao.displayName="DialogHeader";const hc=({className:t,...s})=>e.jsx("div",{className:O("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});hc.displayName="DialogFooter";const Eo=m.forwardRef(({className:t,...s},r)=>e.jsx(po,{ref:r,className:O("text-lg font-semibold leading-none tracking-tight",t),...s}));Eo.displayName=po.displayName;const To=m.forwardRef(({className:t,...s},r)=>e.jsx(go,{ref:r,className:O("text-sm text-muted-foreground",t),...s}));To.displayName=go.displayName;function rC(){var D,A,Q,ee;const[t,s]=m.useState(null),[r,n]=m.useState(null),[a,o]=m.useState(!1),[i,l]=m.useState(!1),{toast:c}=Sn(),{data:d,isLoading:u,error:h}=Ne({queryKey:["dashboard-overview"],queryFn:ue.getOverview});Ne({queryKey:["daily-chart"],queryFn:ue.getDailyChart});const{data:x}=Ne({queryKey:["recent-transactions"],queryFn:()=>ue.getRecentTransactions(5)}),f=async T=>{var Y;o(!0);try{const se=await ue.searchTransaction(T);s(se),se.receiptExists&&se.receiptContent?n(se.receiptContent):n("Receipt not available - This transaction may not have generated a receipt yet.")}catch(se){console.error("Failed to fetch transaction with receipt:",se),((Y=se.response)==null?void 0:Y.status)===404?(n("Transaction not found"),c({title:"Transaction Error",description:"Transaction not found",variant:"destructive"})):(n("Failed to load transaction data - Please check your connection and try again."),c({title:"Connection Error",description:"Could not load transaction data",variant:"destructive"}))}finally{o(!1)}},b=async()=>{if(r)try{await navigator.clipboard.writeText(r),l(!0),c({title:"Copied to Clipboard",description:"Account information has been copied to clipboard"}),setTimeout(()=>{l(!1)},2e3)}catch(T){console.error("Failed to copy to clipboard:",T),c({title:"Copy Failed",description:"Could not copy to clipboard. Please try again.",variant:"destructive"})}},g=()=>{s(null),n(null)};if(u)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading dashboard..."})]})});if(h)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-destructive/5 rounded-2xl border border-destructive/20",children:[e.jsx("div",{className:"w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"h-6 w-6 text-destructive"})}),e.jsx("h3",{className:"text-lg font-bold text-destructive mb-2",children:"Failed to load data"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Please check your connection and try again."}),e.jsxs(Z,{variant:"outline",onClick:()=>window.location.reload(),children:[e.jsx(Vb,{className:"mr-2 h-4 w-4"}),"Retry"]})]})});const p=(D=d==null?void 0:d.chartData)!=null&&D.daily?d.chartData.daily.map(T=>({date:T.date,revenue:T.pendapatan,transactions:T.transaksi,profit:T.pendapatan*.1})):[],y=7,v=p.map((T,Y,se)=>{const H=Math.max(0,Y-y+1),ne=se.slice(H,Y+1),U=ne.reduce((le,je)=>le+je.revenue,0)/ne.length;return{...T,movingAverageRevenue:Math.round(U)}}),j=v.length>0&&v[v.length-1].movingAverageRevenue||0,w=v.map(T=>({...T,forecastRevenue:j})),k=p.length>0?p[p.length-1].revenue:0,R=p.length>1?p[p.length-2].revenue:0,C=k-R,E=R>0?C/R*100:0,M=R>0?`${Math.abs(E).toFixed(1)}%`:"N/A",B=R===0?"neutral":E>=0?"positive":"negative",q=p.length>0?p[p.length-1].transactions:0,I=p.length>1?p[p.length-2].transactions:0,te=q-I,W=I>0?te/I*100:0,z=I>0?`${Math.abs(W).toFixed(1)}%`:"N/A",K=I===0?"neutral":W>=0?"positive":"negative";d!=null&&d.totalTransaksi,d!=null&&d.totalPendapatan;const $=p.slice(-7);return $.length&&$.reduce((T,Y)=>T+Y.revenue,0)/$.length,p.reduce((T,Y)=>Y.revenue>((T==null?void 0:T.revenue)||0)?Y:T,void 0),p.slice(-7).map((T,Y)=>({day:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][Y]||`Day ${Y+1}`,hits:T.revenue,unique:T.transactions})),e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Overview of your business performance."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Z,{variant:"outline",className:"bg-background shadow-sm hover:bg-secondary/50",children:[e.jsx(hr,{className:"mr-2 h-4 w-4"}),"Export"]}),e.jsxs(Z,{className:"bg-primary hover:bg-primary/90 shadow-md shadow-primary/20",children:[e.jsx(bl,{className:"mr-2 h-4 w-4"}),"Filter"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:ke((d==null?void 0:d.totalPendapatan)||0)})]}),e.jsx("div",{className:"p-3 bg-primary/10 rounded-xl",children:e.jsx(Ft,{className:"h-5 w-5 text-primary"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[e.jsxs("span",{className:"text-emerald-500 font-medium flex items-center bg-emerald-500/10 px-2 py-0.5 rounded-full",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"+12.5%"]}),e.jsx("span",{className:"text-muted-foreground ml-2",children:"from last month"})]})]})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Transactions"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(d==null?void 0:d.totalTransaksi)||0})]}),e.jsx("div",{className:"p-3 bg-accent/10 rounded-xl",children:e.jsx(qe,{className:"h-5 w-5 text-accent"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[e.jsxs("span",{className:"text-emerald-500 font-medium flex items-center bg-emerald-500/10 px-2 py-0.5 rounded-full",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"+8.2%"]}),e.jsx("span",{className:"text-muted-foreground ml-2",children:"from last month"})]})]})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today's Revenue"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:ke((d==null?void 0:d.pendapatanHariIni)||0)})]}),e.jsx("div",{className:"p-3 bg-orange-500/10 rounded-xl",children:e.jsx(on,{className:"h-5 w-5 text-orange-500"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[e.jsxs("span",{className:O("font-medium flex items-center px-2 py-0.5 rounded-full",B==="positive"?"text-emerald-500 bg-emerald-500/10":B==="negative"?"text-rose-500 bg-rose-500/10":"text-muted-foreground bg-secondary"),children:[B==="positive"?e.jsx(Nt,{className:"h-3 w-3 mr-1"}):B==="negative"?e.jsx(br,{className:"h-3 w-3 mr-1"}):null,M]}),e.jsx("span",{className:"text-muted-foreground ml-2",children:"vs yesterday"})]})]})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsxs(S,{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today's Transactions"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(d==null?void 0:d.transaksiHariIni)??q??0})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:e.jsx(ft,{className:"h-5 w-5 text-blue-500"})})]}),e.jsxs("div",{className:"mt-4 flex items-center text-sm",children:[e.jsxs("span",{className:O("font-medium flex items-center px-2 py-0.5 rounded-full",K==="positive"?"text-emerald-500 bg-emerald-500/10":K==="negative"?"text-rose-500 bg-rose-500/10":"text-muted-foreground bg-secondary"),children:[K==="positive"?e.jsx(Nt,{className:"h-3 w-3 mr-1"}):K==="negative"?e.jsx(br,{className:"h-3 w-3 mr-1"}):null,z]}),e.jsx("span",{className:"text-muted-foreground ml-2",children:"vs yesterday"})]})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Qk,{}),e.jsx(eC,{})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-7",children:[e.jsxs(N,{className:"md:col-span-4 lg:col-span-5 card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Revenue Trends"}),e.jsx(X,{children:"Daily revenue performance over time"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(y1,{data:w,title:"",description:"",showMovingAverage:!0,showForecast:!0})})})]}),e.jsxs(N,{className:"md:col-span-3 lg:col-span-2 card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Payment Methods"}),e.jsx(X,{children:"Distribution by type"})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/10 flex items-center justify-center",children:e.jsx(qe,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"QRIS"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Instant Payment"})]})]}),e.jsx(re,{variant:"secondary",className:"font-bold",children:((A=d==null?void 0:d.metodeBayar)==null?void 0:A.qris)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:e.jsx(on,{className:"h-5 w-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Saldo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Balance"})]})]}),e.jsx(re,{variant:"secondary",className:"font-bold",children:((Q=d==null?void 0:d.metodeBayar)==null?void 0:Q.saldo)||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-secondary/30 hover:bg-secondary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-500/10 flex items-center justify-center",children:e.jsx(vl,{className:"h-5 w-5 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Others"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alternative"})]})]}),e.jsx(re,{variant:"secondary",className:"font-bold",children:((ee=d==null?void 0:d.metodeBayar)==null?void 0:ee.unknown)||0})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Transactions"}),e.jsx("span",{className:"font-bold",children:(d==null?void 0:d.totalTransaksi)||0})]}),e.jsxs("div",{className:"w-full bg-secondary rounded-full h-2 overflow-hidden flex",children:[e.jsx("div",{className:"bg-blue-500 h-full",style:{width:"45%"}}),e.jsx("div",{className:"bg-emerald-500 h-full",style:{width:"35%"}}),e.jsx("div",{className:"bg-gray-400 h-full",style:{width:"20%"}})]})]})]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Recent Transactions"}),e.jsx(X,{children:"Latest activity from your bot"})]}),e.jsx(Z,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80",children:"View All"})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[x==null?void 0:x.transactions.map(T=>e.jsxs("div",{className:"group flex items-center justify-between p-3 rounded-xl hover:bg-secondary/50 transition-all duration-200 border border-transparent hover:border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:e.jsx(wn,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:T.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[rs(T),"  ",Rm(T.date)]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-foreground",children:ke(T.totalBayar)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:ns(T)})]}),e.jsxs(mc,{onOpenChange:Y=>!Y&&g(),children:[e.jsx(tC,{asChild:!0,children:e.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>f(Qe(T)),className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 rounded-full hover:bg-background shadow-sm",children:e.jsx(Nn,{className:"h-4 w-4 text-muted-foreground"})})}),e.jsxs(_o,{className:"max-w-2xl backdrop-blur-xl bg-card/90 border-border/50 shadow-2xl rounded-2xl",children:[e.jsxs(Ao,{children:[e.jsxs(Eo,{className:"flex items-center gap-2 text-foreground",children:[e.jsx(ur,{className:"h-5 w-5 text-primary"}),"Transaction Details"]}),e.jsxs(To,{children:["Reference ID: ",e.jsx("span",{className:"font-mono text-xs bg-secondary px-1 py-0.5 rounded",children:Qe(T)})]})]}),a?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-primary/20 border-t-primary animate-spin mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Retrieving details..."})]}):e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-secondary/30 rounded-xl border border-border/50",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Product"}),e.jsx("p",{className:"font-medium text-foreground mt-1",children:t.produk||t.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"User"}),e.jsx("p",{className:"font-medium text-foreground mt-1",children:t.user||t.user_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Payment"}),e.jsx("p",{className:"font-medium text-foreground mt-1",children:t.metodeBayar||t.payment_method})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-muted-foreground uppercase tracking-wider",children:"Amount"}),e.jsx("p",{className:"font-bold text-primary mt-1",children:ke(t.totalBayar)})]})]}),(t==null?void 0:t.receiptExists)&&r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(yi,{className:"h-4 w-4 text-primary"}),"Digital Receipt"]}),e.jsx(Z,{variant:"outline",size:"sm",onClick:b,className:"h-8",children:i?e.jsxs(e.Fragment,{children:[e.jsx(an,{className:"h-3.5 w-3.5 mr-1.5"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(Hu,{className:"h-3.5 w-3.5 mr-1.5"}),"Copy"]})})]}),e.jsx("div",{className:"bg-card rounded-xl border border-border shadow-inner p-4 max-h-60 overflow-y-auto",children:e.jsx("pre",{className:"text-xs text-muted-foreground whitespace-pre-wrap font-mono leading-relaxed",children:r})})]}),t&&!t.receiptExists&&e.jsxs("div",{className:"bg-orange-500/10 rounded-xl p-6 border border-orange-500/20 text-center",children:[e.jsx(ur,{className:"h-10 w-10 text-orange-500 mx-auto mb-3"}),e.jsx("p",{className:"text-orange-700 dark:text-orange-400 font-medium",children:"No Receipt Available"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This transaction doesn't have additional account details."})]})]})]})]})]})]},Qe(T))),(!(x!=null&&x.transactions)||x.transactions.length===0)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qe,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("p",{className:"text-muted-foreground",children:"No recent transactions"})]})]})})]})})]})}const Jn=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];function nC(){var d,u;const{data:t,isLoading:s}=Ne({queryKey:["dashboard-overview"],queryFn:ue.getOverview}),{data:r,isLoading:n}=Ne({queryKey:["user-stats"],queryFn:ue.getUserStats}),a=h=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(h),o=(d=t==null?void 0:t.chartData)!=null&&d.daily?t.chartData.daily.map(h=>({date:h.date,revenue:h.pendapatan,transactions:h.transaksi,profit:h.pendapatan*.1})):[],i=(u=t==null?void 0:t.chartData)!=null&&u.monthly?t.chartData.monthly.map(h=>({month:h.month,revenue:h.pendapatan,transactions:h.transaksi,profit:h.pendapatan*.1,userGrowth:0})):[],l=r?Object.entries(r.userStats||{}).map(([h,x])=>({name:h.charAt(0).toUpperCase()+h.slice(1),value:x.count,saldo:x.totalSaldo})):[];return s||n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading charts..."})]})}):e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Analytics Charts"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Deep dive into your business metrics and performance"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-background rounded-full border border-border/50 shadow-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Live Data"})]})})]}),e.jsxs(ds,{defaultValue:"daily",className:"space-y-6",children:[e.jsxs(Jt,{className:"bg-background/50 backdrop-blur-sm border border-border/50 p-1 rounded-xl w-full md:w-auto grid grid-cols-3 md:inline-flex h-auto",children:[e.jsxs(Ae,{value:"daily",className:"rounded-lg px-4 py-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md transition-all",children:[e.jsx(vr,{className:"h-4 w-4 mr-2"}),"Daily"]}),e.jsxs(Ae,{value:"monthly",className:"rounded-lg px-4 py-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md transition-all",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Monthly"]}),e.jsxs(Ae,{value:"users",className:"rounded-lg px-4 py-2 data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:shadow-md transition-all",children:[e.jsx(ut,{className:"h-4 w-4 mr-2"}),"User Analytics"]})]}),e.jsxs(Pe,{value:"daily",className:"space-y-6 animate-in fade-in-50 slide-in-from-bottom-2 duration-500",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ft,{className:"h-5 w-5 text-blue-500"}),"Daily Revenue"]}),e.jsx(X,{children:"Revenue trends over the past days"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(jn,{data:o,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),e.jsx(De,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.4,vertical:!1}),e.jsx(Oe,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),e.jsx(Me,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:h=>`Rp${(h/1e3).toFixed(0)}k`,dx:-10}),e.jsx(_e,{formatter:h=>[a(h),"Revenue"],contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",color:"hsl(var(--popover-foreground))"},cursor:{stroke:"hsl(var(--muted-foreground))",strokeWidth:1,strokeDasharray:"4 4"}}),e.jsx(is,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)",activeDot:{r:6,strokeWidth:0,fill:"#3b82f6"}})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-5 w-5 text-emerald-500"}),"Daily Transactions"]}),e.jsx(X,{children:"Number of transactions per day"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:o,children:[e.jsx(De,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.4,vertical:!1}),e.jsx(Oe,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),e.jsx(Me,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dx:-10}),e.jsx(_e,{formatter:h=>[h.toLocaleString(),"Transactions"],cursor:{fill:"hsl(var(--muted)/0.3)"},contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",color:"hsl(var(--popover-foreground))"}}),e.jsx(dt,{dataKey:"transactions",fill:"#10b981",radius:[6,6,0,0],barSize:32})]})})})})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-purple-500"}),"Daily Profit Trends"]}),e.jsx(X,{children:"Profit analysis over time (Estimated 10% margin)"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[400px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(rn,{data:o,children:[e.jsx(De,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.4,vertical:!1}),e.jsx(Oe,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),e.jsx(Me,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:h=>`Rp${(h/1e3).toFixed(0)}k`,dx:-10}),e.jsx(_e,{formatter:h=>[a(h),"Profit"],contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",color:"hsl(var(--popover-foreground))"}}),e.jsx(as,{type:"monotone",dataKey:"profit",stroke:"#8b5cf6",strokeWidth:4,dot:{fill:"#8b5cf6",strokeWidth:2,r:4,stroke:"#fff"},activeDot:{r:8,strokeWidth:0,fill:"#8b5cf6"}})]})})})})]})]}),e.jsx(Pe,{value:"monthly",className:"space-y-6 animate-in fade-in-50 slide-in-from-bottom-2 duration-500",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ft,{className:"h-5 w-5 text-orange-500"}),"Monthly Revenue"]}),e.jsx(X,{children:"Monthly revenue comparison"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:i,children:[e.jsx(De,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.4,vertical:!1}),e.jsx(Oe,{dataKey:"month",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),e.jsx(Me,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:h=>`Rp${(h/1e6).toFixed(1)}M`,dx:-10}),e.jsx(_e,{formatter:h=>[a(h),"Revenue"],cursor:{fill:"hsl(var(--muted)/0.3)"},contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",color:"hsl(var(--popover-foreground))"}}),e.jsx(dt,{dataKey:"revenue",fill:"#f59e0b",radius:[6,6,0,0],barSize:40})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-cyan-500"}),"User Growth"]}),e.jsx(X,{children:"Monthly user growth trends"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(rn,{data:i,children:[e.jsx(De,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.4,vertical:!1}),e.jsx(Oe,{dataKey:"month",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dy:10}),e.jsx(Me,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,dx:-10}),e.jsx(_e,{formatter:h=>[h.toLocaleString(),"Users"],contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",color:"hsl(var(--popover-foreground))"}}),e.jsx(as,{type:"monotone",dataKey:"userGrowth",stroke:"#06b6d4",strokeWidth:4,dot:{fill:"#06b6d4",strokeWidth:2,r:4,stroke:"#fff"},activeDot:{r:8,strokeWidth:0,fill:"#06b6d4"}})]})})})})]})]})}),e.jsx(Pe,{value:"users",className:"space-y-6 animate-in fade-in-50 slide-in-from-bottom-2 duration-500",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(yl,{className:"h-5 w-5 text-indigo-500"}),"User Distribution by Role"]}),e.jsx(X,{children:"Breakdown of users by their roles"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"h-[300px] w-full flex items-center justify-center",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(js,{children:[e.jsx(ws,{data:l,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:l.map((h,x)=>e.jsx(Ot,{fill:Jn[x%Jn.length],strokeWidth:0},`cell-${x}`))}),e.jsx(_e,{formatter:h=>[h.toLocaleString(),"Users"],contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",color:"hsl(var(--popover-foreground))"}})]})})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:l.map((h,x)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Jn[x%Jn.length]}}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[h.name,": ",e.jsx("span",{className:"font-medium text-foreground",children:h.value})]})]},x))})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-5 w-5 text-pink-500"}),"Balance by Role"]}),e.jsx(X,{children:"Total balance distribution by user roles"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:l,layout:"vertical",children:[e.jsx(De,{strokeDasharray:"3 3",stroke:"hsl(var(--border))",opacity:.4,horizontal:!1}),e.jsx(Oe,{type:"number",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:h=>`Rp${(h/1e6).toFixed(0)}M`}),e.jsx(Me,{dataKey:"name",type:"category",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,axisLine:!1,width:80}),e.jsx(_e,{formatter:h=>[a(h),"Total Balance"],cursor:{fill:"hsl(var(--muted)/0.3)"},contentStyle:{backgroundColor:"hsl(var(--popover))",border:"1px solid hsl(var(--border))",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",color:"hsl(var(--popover-foreground))"}}),e.jsx(dt,{dataKey:"saldo",fill:"#ec4899",radius:[0,6,6,0],barSize:32})]})})})})]})]})})]})]})}function tu(t,[s,r]){return Math.min(r,Math.max(s,t))}function fc(t){const s=m.useRef({value:t,previous:t});return m.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var aC=[" ","Enter","ArrowUp","ArrowDown"],oC=[" ","Enter"],Hs="Select",[Po,Io,iC]=eo(Hs),[Ir,cA]=at(Hs,[iC,Ar]),Do=Ar(),[lC,Rs]=Ir(Hs),[cC,dC]=Ir(Hs),zx=t=>{const{__scopeSelect:s,children:r,open:n,defaultOpen:a,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:x,required:f,form:b}=t,g=Do(s),[p,y]=m.useState(null),[v,j]=m.useState(null),[w,k]=m.useState(!1),R=An(d),[C,E]=Xt({prop:n,defaultProp:a??!1,onChange:o,caller:Hs}),[M,B]=Xt({prop:i,defaultProp:l,onChange:c,caller:Hs}),q=m.useRef(null),I=p?b||!!p.closest("form"):!0,[te,W]=m.useState(new Set),z=Array.from(te).map(K=>K.props.value).join(";");return e.jsx(Ll,{...g,children:e.jsxs(lC,{required:f,scope:s,trigger:p,onTriggerChange:y,valueNode:v,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:k,contentId:Dt(),value:M,onValueChange:B,open:C,onOpenChange:E,dir:R,triggerPointerDownPosRef:q,disabled:x,children:[e.jsx(Po.Provider,{scope:s,children:e.jsx(cC,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(K=>{W($=>new Set($).add(K))},[]),onNativeOptionRemove:m.useCallback(K=>{W($=>{const D=new Set($);return D.delete(K),D})},[]),children:r})}),I?e.jsxs(mp,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:h,value:M,onChange:K=>B(K.target.value),disabled:x,form:b,children:[M===void 0?e.jsx("option",{value:""}):null,Array.from(te)]},z):null]})})};zx.displayName=Hs;var Wx="SelectTrigger",Hx=m.forwardRef((t,s)=>{const{__scopeSelect:r,disabled:n=!1,...a}=t,o=Do(r),i=Rs(Wx,r),l=i.disabled||n,c=Ce(s,i.onTriggerChange),d=Io(r),u=m.useRef("touch"),[h,x,f]=fp(g=>{const p=d().filter(j=>!j.disabled),y=p.find(j=>j.value===i.value),v=xp(p,g,y);v!==void 0&&i.onValueChange(v.value)}),b=g=>{l||(i.onOpenChange(!0),f()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return e.jsx(Fl,{asChild:!0,...o,children:e.jsx(oe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":hp(i.value)?"":void 0,...a,ref:c,onClick:J(a.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&b(g)}),onPointerDown:J(a.onPointerDown,g=>{u.current=g.pointerType;const p=g.target;p.hasPointerCapture(g.pointerId)&&p.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(b(g),g.preventDefault())}),onKeyDown:J(a.onKeyDown,g=>{const p=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&x(g.key),!(p&&g.key===" ")&&aC.includes(g.key)&&(b(),g.preventDefault())})})})});Hx.displayName=Wx;var qx="SelectValue",Kx=m.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,children:o,placeholder:i="",...l}=t,c=Rs(qx,r),{onValueNodeHasChildrenChange:d}=c,u=o!==void 0,h=Ce(s,c.onValueNodeChange);return Be(()=>{d(u)},[d,u]),e.jsx(oe.span,{...l,ref:h,style:{pointerEvents:"none"},children:hp(c.value)?e.jsx(e.Fragment,{children:i}):o})});Kx.displayName=qx;var uC="SelectIcon",Vx=m.forwardRef((t,s)=>{const{__scopeSelect:r,children:n,...a}=t;return e.jsx(oe.span,{"aria-hidden":!0,...a,ref:s,children:n||""})});Vx.displayName=uC;var mC="SelectPortal",Gx=t=>e.jsx(kn,{asChild:!0,...t});Gx.displayName=mC;var qs="SelectContent",Xx=m.forwardRef((t,s)=>{const r=Rs(qs,t.__scopeSelect),[n,a]=m.useState();if(Be(()=>{a(new DocumentFragment)},[]),!r.open){const o=n;return o?wr.createPortal(e.jsx(Yx,{scope:t.__scopeSelect,children:e.jsx(Po.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),o):null}return e.jsx(Jx,{...t,ref:s})});Xx.displayName=qs;var Pt=10,[Yx,_s]=Ir(qs),hC="SelectContentImpl",fC=Bs("SelectContent.RemoveScroll"),Jx=m.forwardRef((t,s)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:x,collisionPadding:f,sticky:b,hideWhenDetached:g,avoidCollisions:p,...y}=t,v=Rs(qs,r),[j,w]=m.useState(null),[k,R]=m.useState(null),C=Ce(s,U=>w(U)),[E,M]=m.useState(null),[B,q]=m.useState(null),I=Io(r),[te,W]=m.useState(!1),z=m.useRef(!1);m.useEffect(()=>{if(j)return Wl(j)},[j]),zl();const K=m.useCallback(U=>{const[le,...je]=I().map(de=>de.ref.current),[ce]=je.slice(-1),ae=document.activeElement;for(const de of U)if(de===ae||(de==null||de.scrollIntoView({block:"nearest"}),de===le&&k&&(k.scrollTop=0),de===ce&&k&&(k.scrollTop=k.scrollHeight),de==null||de.focus(),document.activeElement!==ae))return},[I,k]),$=m.useCallback(()=>K([E,j]),[K,E,j]);m.useEffect(()=>{te&&$()},[te,$]);const{onOpenChange:D,triggerPointerDownPosRef:A}=v;m.useEffect(()=>{if(j){let U={x:0,y:0};const le=ce=>{var ae,de;U={x:Math.abs(Math.round(ce.pageX)-(((ae=A.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((de=A.current)==null?void 0:de.y)??0))}},je=ce=>{U.x<=10&&U.y<=10?ce.preventDefault():j.contains(ce.target)||D(!1),document.removeEventListener("pointermove",le),A.current=null};return A.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",je,{capture:!0})}}},[j,D,A]),m.useEffect(()=>{const U=()=>D(!1);return window.addEventListener("blur",U),window.addEventListener("resize",U),()=>{window.removeEventListener("blur",U),window.removeEventListener("resize",U)}},[D]);const[Q,ee]=fp(U=>{const le=I().filter(ae=>!ae.disabled),je=le.find(ae=>ae.ref.current===document.activeElement),ce=xp(le,U,je);ce&&setTimeout(()=>ce.ref.current.focus())}),T=m.useCallback((U,le,je)=>{const ce=!z.current&&!je;(v.value!==void 0&&v.value===le||ce)&&(M(U),ce&&(z.current=!0))},[v.value]),Y=m.useCallback(()=>j==null?void 0:j.focus(),[j]),se=m.useCallback((U,le,je)=>{const ce=!z.current&&!je;(v.value!==void 0&&v.value===le||ce)&&q(U)},[v.value]),H=n==="popper"?Ji:Qx,ne=H===Ji?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:x,collisionPadding:f,sticky:b,hideWhenDetached:g,avoidCollisions:p}:{};return e.jsx(Yx,{scope:r,content:j,viewport:k,onViewportChange:R,itemRefCallback:T,selectedItem:E,onItemLeave:Y,itemTextRefCallback:se,focusSelectedItem:$,selectedItemText:B,position:n,isPositioned:te,searchRef:Q,children:e.jsx(mo,{as:fC,allowPinchZoom:!0,children:e.jsx(co,{asChild:!0,trapped:v.open,onMountAutoFocus:U=>{U.preventDefault()},onUnmountAutoFocus:J(a,U=>{var le;(le=v.trigger)==null||le.focus({preventScroll:!0}),U.preventDefault()}),children:e.jsx(Sr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:U=>U.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:e.jsx(H,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:U=>U.preventDefault(),...y,...ne,onPlaced:()=>W(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:J(y.onKeyDown,U=>{const le=U.ctrlKey||U.altKey||U.metaKey;if(U.key==="Tab"&&U.preventDefault(),!le&&U.key.length===1&&ee(U.key),["ArrowUp","ArrowDown","Home","End"].includes(U.key)){let ce=I().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(U.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(U.key)){const ae=U.target,de=ce.indexOf(ae);ce=ce.slice(de+1)}setTimeout(()=>K(ce)),U.preventDefault()}})})})})})})});Jx.displayName=hC;var xC="SelectItemAlignedPosition",Qx=m.forwardRef((t,s)=>{const{__scopeSelect:r,onPlaced:n,...a}=t,o=Rs(qs,r),i=_s(qs,r),[l,c]=m.useState(null),[d,u]=m.useState(null),h=Ce(s,C=>u(C)),x=Io(r),f=m.useRef(!1),b=m.useRef(!0),{viewport:g,selectedItem:p,selectedItemText:y,focusSelectedItem:v}=i,j=m.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&d&&g&&p&&y){const C=o.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),M=o.valueNode.getBoundingClientRect(),B=y.getBoundingClientRect();if(o.dir!=="rtl"){const ae=B.left-E.left,de=M.left-ae,Je=C.left-de,yt=C.width+Je,As=Math.max(yt,E.width),us=window.innerWidth-Pt,Es=tu(de,[Pt,Math.max(Pt,us-As)]);l.style.minWidth=yt+"px",l.style.left=Es+"px"}else{const ae=E.right-B.right,de=window.innerWidth-M.right-ae,Je=window.innerWidth-C.right-de,yt=C.width+Je,As=Math.max(yt,E.width),us=window.innerWidth-Pt,Es=tu(de,[Pt,Math.max(Pt,us-As)]);l.style.minWidth=yt+"px",l.style.right=Es+"px"}const q=x(),I=window.innerHeight-Pt*2,te=g.scrollHeight,W=window.getComputedStyle(d),z=parseInt(W.borderTopWidth,10),K=parseInt(W.paddingTop,10),$=parseInt(W.borderBottomWidth,10),D=parseInt(W.paddingBottom,10),A=z+K+te+D+$,Q=Math.min(p.offsetHeight*5,A),ee=window.getComputedStyle(g),T=parseInt(ee.paddingTop,10),Y=parseInt(ee.paddingBottom,10),se=C.top+C.height/2-Pt,H=I-se,ne=p.offsetHeight/2,U=p.offsetTop+ne,le=z+K+U,je=A-le;if(le<=se){const ae=q.length>0&&p===q[q.length-1].ref.current;l.style.bottom="0px";const de=d.clientHeight-g.offsetTop-g.offsetHeight,Je=Math.max(H,ne+(ae?Y:0)+de+$),yt=le+Je;l.style.height=yt+"px"}else{const ae=q.length>0&&p===q[0].ref.current;l.style.top="0px";const Je=Math.max(se,z+g.offsetTop+(ae?T:0)+ne)+je;l.style.height=Je+"px",g.scrollTop=le-se+g.offsetTop}l.style.margin=`${Pt}px 0`,l.style.minHeight=Q+"px",l.style.maxHeight=I+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[x,o.trigger,o.valueNode,l,d,g,p,y,o.dir,n]);Be(()=>j(),[j]);const[w,k]=m.useState();Be(()=>{d&&k(window.getComputedStyle(d).zIndex)},[d]);const R=m.useCallback(C=>{C&&b.current===!0&&(j(),v==null||v(),b.current=!1)},[j,v]);return e.jsx(gC,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:R,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:e.jsx(oe.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Qx.displayName=xC;var pC="SelectPopperPosition",Ji=m.forwardRef((t,s)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Pt,...o}=t,i=Do(r);return e.jsx($l,{...i,...o,ref:s,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ji.displayName=pC;var[gC,xc]=Ir(qs,{}),Qi="SelectViewport",Zx=m.forwardRef((t,s)=>{const{__scopeSelect:r,nonce:n,...a}=t,o=_s(Qi,r),i=xc(Qi,r),l=Ce(s,o.onViewportChange),c=m.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Po.Slot,{scope:r,children:e.jsx(oe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:J(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:x}=i;if(x!=null&&x.current&&h){const f=Math.abs(c.current-u.scrollTop);if(f>0){const b=window.innerHeight-Pt*2,g=parseFloat(h.style.minHeight),p=parseFloat(h.style.height),y=Math.max(g,p);if(y<b){const v=y+f,j=Math.min(b,v),w=v-j;h.style.height=j+"px",h.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});Zx.displayName=Qi;var ep="SelectGroup",[bC,vC]=Ir(ep),yC=m.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Dt();return e.jsx(bC,{scope:r,id:a,children:e.jsx(oe.div,{role:"group","aria-labelledby":a,...n,ref:s})})});yC.displayName=ep;var tp="SelectLabel",sp=m.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=vC(tp,r);return e.jsx(oe.div,{id:a.id,...n,ref:s})});sp.displayName=tp;var Fa="SelectItem",[jC,rp]=Ir(Fa),np=m.forwardRef((t,s)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:o,...i}=t,l=Rs(Fa,r),c=_s(Fa,r),d=l.value===n,[u,h]=m.useState(o??""),[x,f]=m.useState(!1),b=Ce(s,v=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,v,n,a)}),g=Dt(),p=m.useRef("touch"),y=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(jC,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:m.useCallback(v=>{h(j=>j||((v==null?void 0:v.textContent)??"").trim())},[]),children:e.jsx(Po.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:e.jsx(oe.div,{role:"option","aria-labelledby":g,"data-highlighted":x?"":void 0,"aria-selected":d&&x,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:b,onFocus:J(i.onFocus,()=>f(!0)),onBlur:J(i.onBlur,()=>f(!1)),onClick:J(i.onClick,()=>{p.current!=="mouse"&&y()}),onPointerUp:J(i.onPointerUp,()=>{p.current==="mouse"&&y()}),onPointerDown:J(i.onPointerDown,v=>{p.current=v.pointerType}),onPointerMove:J(i.onPointerMove,v=>{var j;p.current=v.pointerType,a?(j=c.onItemLeave)==null||j.call(c):p.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:J(i.onPointerLeave,v=>{var j;v.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:J(i.onKeyDown,v=>{var w;((w=c.searchRef)==null?void 0:w.current)!==""&&v.key===" "||(oC.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});np.displayName=Fa;var zr="SelectItemText",ap=m.forwardRef((t,s)=>{const{__scopeSelect:r,className:n,style:a,...o}=t,i=Rs(zr,r),l=_s(zr,r),c=rp(zr,r),d=dC(zr,r),[u,h]=m.useState(null),x=Ce(s,y=>h(y),c.onItemTextChange,y=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,y,c.value,c.disabled)}),f=u==null?void 0:u.textContent,b=m.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:p}=d;return Be(()=>(g(b),()=>p(b)),[g,p,b]),e.jsxs(e.Fragment,{children:[e.jsx(oe.span,{id:c.textId,...o,ref:x}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?wr.createPortal(o.children,i.valueNode):null]})});ap.displayName=zr;var op="SelectItemIndicator",ip=m.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return rp(op,r).isSelected?e.jsx(oe.span,{"aria-hidden":!0,...n,ref:s}):null});ip.displayName=op;var Zi="SelectScrollUpButton",lp=m.forwardRef((t,s)=>{const r=_s(Zi,t.__scopeSelect),n=xc(Zi,t.__scopeSelect),[a,o]=m.useState(!1),i=Ce(s,n.onScrollButtonChange);return Be(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(dp,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});lp.displayName=Zi;var el="SelectScrollDownButton",cp=m.forwardRef((t,s)=>{const r=_s(el,t.__scopeSelect),n=xc(el,t.__scopeSelect),[a,o]=m.useState(!1),i=Ce(s,n.onScrollButtonChange);return Be(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?e.jsx(dp,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});cp.displayName=el;var dp=m.forwardRef((t,s)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=t,o=_s("SelectScrollButton",r),i=m.useRef(null),l=Io(r),c=m.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Be(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),e.jsx(oe.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:J(a.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(n,50))}),onPointerMove:J(a.onPointerMove,()=>{var d;(d=o.onItemLeave)==null||d.call(o),i.current===null&&(i.current=window.setInterval(n,50))}),onPointerLeave:J(a.onPointerLeave,()=>{c()})})}),wC="SelectSeparator",up=m.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t;return e.jsx(oe.div,{"aria-hidden":!0,...n,ref:s})});up.displayName=wC;var tl="SelectArrow",NC=m.forwardRef((t,s)=>{const{__scopeSelect:r,...n}=t,a=Do(r),o=Rs(tl,r),i=_s(tl,r);return o.open&&i.position==="popper"?e.jsx(Bl,{...a,...n,ref:s}):null});NC.displayName=tl;var SC="SelectBubbleInput",mp=m.forwardRef(({__scopeSelect:t,value:s,...r},n)=>{const a=m.useRef(null),o=Ce(n,a),i=fc(s);return m.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==s&&u){const h=new Event("change",{bubbles:!0});u.call(l,s),l.dispatchEvent(h)}},[i,s]),e.jsx(oe.select,{...r,style:{...tm,...r.style},ref:o,defaultValue:s})});mp.displayName=SC;function hp(t){return t===""||t===void 0}function fp(t){const s=nt(t),r=m.useRef(""),n=m.useRef(0),a=m.useCallback(i=>{const l=r.current+i;s(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[s]),o=m.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,o]}function xp(t,s,r){const a=s.length>1&&Array.from(s).every(d=>d===s[0])?s[0]:s,o=r?t.indexOf(r):-1;let i=kC(t,Math.max(o,0));a.length===1&&(i=i.filter(d=>d!==r));const c=i.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function kC(t,s){return t.map((r,n)=>t[(s+n)%t.length])}var CC=zx,pp=Hx,RC=Kx,_C=Vx,AC=Gx,gp=Xx,EC=Zx,bp=sp,vp=np,TC=ap,PC=ip,yp=lp,jp=cp,wp=up;const $a=CC,Ba=RC,gn=m.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(pp,{ref:n,className:O("flex h-10 w-full items-center justify-between rounded-lg border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(_C,{asChild:!0,children:e.jsx(Ja,{className:"h-4 w-4 opacity-50"})})]}));gn.displayName=pp.displayName;const Np=m.forwardRef(({className:t,...s},r)=>e.jsx(yp,{ref:r,className:O("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(qu,{className:"h-4 w-4"})}));Np.displayName=yp.displayName;const Sp=m.forwardRef(({className:t,...s},r)=>e.jsx(jp,{ref:r,className:O("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ja,{className:"h-4 w-4"})}));Sp.displayName=jp.displayName;const bn=m.forwardRef(({className:t,children:s,position:r="popper",...n},a)=>e.jsx(AC,{children:e.jsxs(gp,{ref:a,className:O("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-xl border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[e.jsx(Np,{}),e.jsx(EC,{className:O("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Sp,{})]})}));bn.displayName=gp.displayName;const IC=m.forwardRef(({className:t,...s},r)=>e.jsx(bp,{ref:r,className:O("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));IC.displayName=bp.displayName;const lt=m.forwardRef(({className:t,children:s,...r},n)=>e.jsxs(vp,{ref:n,className:O("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(PC,{children:e.jsx(an,{className:"h-4 w-4"})})}),e.jsx(TC,{children:s})]}));lt.displayName=vp.displayName;const DC=m.forwardRef(({className:t,...s},r)=>e.jsx(wp,{ref:r,className:O("-mx-1 my-1 h-px bg-muted",t),...s}));DC.displayName=wp.displayName;const Xs=m.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:O("w-full caption-bottom text-sm",t),...s})}));Xs.displayName="Table";const Ys=m.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:O("[&_tr]:border-b",t),...s}));Ys.displayName="TableHeader";const Js=m.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:O("[&_tr:last-child]:border-0",t),...s}));Js.displayName="TableBody";const OC=m.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:O("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));OC.displayName="TableFooter";const rt=m.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:O("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));rt.displayName="TableRow";const we=m.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:O("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));we.displayName="TableHead";const ge=m.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:O("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));ge.displayName="TableCell";const MC=m.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:O("mt-4 text-sm text-muted-foreground",t),...s}));MC.displayName="TableCaption";const Qn=["#3b82f6","#10b981","#f59e0b","#8b5cf6"];function su(){var a,o;const{data:t,isLoading:s}=Ne({queryKey:["user-behavior"],queryFn:ue.getUserBehaviorAnalytics});if(s)return e.jsx(tt,{className:"h-[400px] w-full rounded-xl"});if(!t)return null;const r=Object.entries(t.segmentStats).map(([i,l])=>({name:i.charAt(0).toUpperCase()+i.slice(1),value:l.count,percentage:l.percentage})),n=Object.entries(t.insights.mostActiveHour).map(([i,l])=>({hour:`${i}:00`,users:l}));return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft lg:col-span-1",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-primary"}),"User Segments"]}),e.jsx(X,{children:"Distribution by engagement level"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"h-[200px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(js,{children:[e.jsx(ws,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:r.map((i,l)=>e.jsx(Ot,{fill:Qn[l%Qn.length],strokeWidth:0},`cell-${l}`))}),e.jsx(_e,{formatter:i=>[i,"Users"],contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.5rem"},itemStyle:{color:"hsl(var(--foreground))"}})]})})}),e.jsx("div",{className:"mt-4 space-y-2",children:r.map((i,l)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Qn[l%Qn.length]}}),e.jsx("span",{className:"text-muted-foreground",children:i.name})]}),e.jsxs("div",{className:"font-medium",children:[i.value," ",e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",i.percentage,"%)"]})]})]},i.name))})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft lg:col-span-2",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Behavior Analysis"}),e.jsx(X,{children:"Activity patterns and retention"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(re,{variant:"outline",className:"bg-background",children:[e.jsx(nn,{className:"mr-1 h-3 w-3"}),"Peak: 19:00 - 21:00"]}),e.jsxs(re,{variant:"destructive",className:"bg-rose-500/10 text-rose-600 hover:bg-rose-500/20 border-rose-200",children:[e.jsx(Gb,{className:"mr-1 h-3 w-3"}),t.churnAnalysis.churnRate.toFixed(1),"% Churn"]})]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"h-[200px] w-full",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-4 text-center",children:"Active Users by Hour"}),e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:n,children:[e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"hour",tick:{fill:"hsl(var(--muted-foreground))",fontSize:10},axisLine:!1,tickLine:!1,interval:2}),e.jsx(_e,{cursor:{fill:"hsl(var(--muted)/0.2)"},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.5rem"}}),e.jsx(dt,{dataKey:"users",fill:"hsl(var(--primary))",radius:[4,4,0,0],opacity:.8})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Key Insights"}),e.jsxs("div",{className:"p-3 bg-secondary/30 rounded-xl border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg",children:e.jsx(qe,{className:"h-4 w-4 text-emerald-500"})}),e.jsx("span",{className:"font-medium text-sm",children:"Payment Preference"})]}),e.jsx("div",{className:"space-y-1",children:Object.entries(t.insights.paymentPreferences).map(([i,l])=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:i}),e.jsxs("span",{className:"font-medium",children:[Math.round(l)," users"]})]},i))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 bg-secondary/30 rounded-xl border border-border/50 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Transaction"}),e.jsx("p",{className:"text-lg font-bold text-foreground mt-1",children:((a=t.segmentStats.regular)==null?void 0:a.avgTransactions)||0}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"per regular user"})]}),e.jsxs("div",{className:"p-3 bg-secondary/30 rounded-xl border border-border/50 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Spend"}),e.jsx("p",{className:"text-lg font-bold text-foreground mt-1",children:ke(((o=t.segmentStats.regular)==null?void 0:o.avgSpent)||0)}),e.jsx("p",{className:"text-[10px] text-muted-foreground",children:"per regular user"})]})]})]})]})})]})]})}function LC(){const[t,s]=m.useState(""),[r,n]=m.useState("all"),[a,o]=m.useState(1);m.useState(10);const[i,l]=m.useState("transactions"),[c,d]=m.useState("desc"),[u,h]=m.useState(!1),x=yn(),{toast:f}=Sn(),{data:b,isLoading:g,error:p}=Ne({queryKey:["user-activity"],queryFn:ue.getUserActivity,retry:1,retryDelay:1e3}),{data:y,isLoading:v,error:j}=Ne({queryKey:["all-users",t,r,i,c],queryFn:()=>ue.getEnhancedAllUsers(1,1e3,t,r),retry:1,retryDelay:1e3});m.useEffect(()=>{if(y){console.log(" Users Page Debug: Enhanced users data received:",y);const z=y==null?void 0:y.users;z&&console.log(" Users Page Debug: First 3 users transaction data:",z.slice(0,3).map(K=>({userId:K.userId,username:K.username,transactionCount:K.transactionCount,totalSpent:K.totalSpent,hasTransactions:K.hasTransactions,_debugMatchedId:K._debugMatchedId,_debugNormalizedIds:K._debugNormalizedIds})))}},[y]);const{data:w,isLoading:k,error:R}=Ne({queryKey:["user-stats"],queryFn:ue.getUserStats,retry:1,retryDelay:1e3}),C=z=>{switch(z.toLowerCase()){case"gold":return"default";case"silver":return"secondary";case"bronze":return"outline";default:return"secondary"}},E=(y==null?void 0:y.users)||[],M=v,B=E.filter(z=>(z.transactionCount||0)>0),q=z=>{s(z),o(1)},I=z=>{n(z),o(1)},te=z=>{const K=z.replace("@s.whatsapp.net","").trim();console.log(" User Click Debug: Original userId:",z,"Normalized:",K),x(`/users/${K}`)},W=()=>{const z=["Username","User ID","Role","Transactions","Total Spent","Last Activity"],K=B.map(ee=>[ee.username==="User .net"||ee.username==="User @lid"||!ee.username?ee.userId.replace("@s.whatsapp.net","").replace("@lid",""):ee.username,ee.userId,ee.role,ee.transactionCount||0,ee.totalSpent||0,ee.lastActivity?new Date(ee.lastActivity).toISOString():""]),$=[z,...K].map(ee=>ee.map(T=>typeof T=="string"&&T.includes(",")?`"${T.replace(/"/g,'""')}"`:T).join(",")).join(`
`),D=new Blob([$],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(D),Q=document.createElement("a");Q.href=A,Q.download=`users-page-${a}.csv`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(A),f({title:"CSV exported",description:"Current view has been downloaded."})};return M?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading users..."})]})}):j||R?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-destructive/5 rounded-2xl border border-destructive/20",children:[e.jsx("div",{className:"w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"h-6 w-6 text-destructive"})}),e.jsx("h3",{className:"text-lg font-bold text-destructive mb-2",children:"Failed to load user data"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:(j==null?void 0:j.message)||(R==null?void 0:R.message)||"Please check your API connection"}),e.jsx(Z,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})}):e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"User Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage users, track activity, and analyze user behavior"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{variant:u?"default":"outline",size:"sm",onClick:()=>h(z=>!z),className:O("transition-all",u?"bg-primary text-primary-foreground shadow-md":"bg-background shadow-sm hover:bg-secondary/50"),children:u?"Comfortable":"Compact"}),e.jsxs(Z,{variant:"outline",size:"sm",onClick:W,className:"bg-background shadow-sm hover:bg-secondary/50",children:[e.jsx(hr,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),e.jsx(su,{}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Users"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(w==null?void 0:w.totalUsers)||0})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:e.jsx(Ve,{className:"h-5 w-5 text-blue-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Users"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(b==null?void 0:b.activeUsers)||0}),e.jsxs("p",{className:"text-sm text-emerald-500 flex items-center mt-1 font-medium bg-emerald-500/10 px-2 py-0.5 rounded-full w-fit",children:["+",(b==null?void 0:b.newUsers)||0," new"]})]}),e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:e.jsx(ka,{className:"h-5 w-5 text-emerald-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Balance"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:ke((w==null?void 0:w.totalSaldo)||0)})]}),e.jsx("div",{className:"p-3 bg-purple-500/10 rounded-xl",children:e.jsx(on,{className:"h-5 w-5 text-purple-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Average Balance"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:ke((w==null?void 0:w.averageSaldo)||0)})]}),e.jsx("div",{className:"p-3 bg-orange-500/10 rounded-xl",children:e.jsx(ft,{className:"h-5 w-5 text-orange-500"})})]})})})]}),e.jsx(su,{}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{className:"pb-4",children:e.jsxs(F,{className:"flex items-center gap-2 text-lg",children:[e.jsx(bl,{className:"h-5 w-5 text-primary"}),"Filters & Search"]})}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative group",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground group-focus-within:text-primary transition-colors"}),e.jsx(st,{placeholder:"Search by username or user ID...",value:t,onChange:z=>q(z.target.value),className:"pl-10 bg-secondary/30 border-transparent focus:bg-background focus:border-primary/20 transition-all"})]})}),e.jsxs($a,{value:r,onValueChange:I,children:[e.jsx(gn,{className:"w-full md:w-48 bg-secondary/30 border-transparent focus:bg-background focus:border-primary/20",children:e.jsx(Ba,{placeholder:"Filter by role"})}),e.jsxs(bn,{children:[e.jsx(lt,{value:"all",children:"All Roles"}),e.jsx(lt,{value:"gold",children:"Gold"}),e.jsx(lt,{value:"silver",children:"Silver"}),e.jsx(lt,{value:"bronze",children:"Bronze"})]})]})]})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft overflow-hidden",children:[e.jsx(L,{className:"border-b border-border/50 bg-muted/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"All Users"}),e.jsxs(X,{children:["Showing all ",B.length," users"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground hidden md:inline-block",children:"Sort by:"}),e.jsxs($a,{value:i,onValueChange:z=>l(z),children:[e.jsx(gn,{className:"w-36 bg-background border-border/50 h-8",children:e.jsx(Ba,{})}),e.jsxs(bn,{children:[e.jsx(lt,{value:"transactions",children:"Transactions"}),e.jsx(lt,{value:"totalSpent",children:"Total Spent"}),e.jsx(lt,{value:"lastActivity",children:"Last Activity"})]})]}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>d(c==="asc"?"desc":"asc"),className:"h-8 w-8 p-0",children:c==="asc"?"":""})]})]})}),e.jsxs(S,{className:"p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Xs,{children:[e.jsx(Ys,{className:"bg-muted/30",children:e.jsxs(rt,{className:"hover:bg-transparent border-border/50",children:[e.jsx(we,{className:"w-[300px]",children:"User"}),e.jsx(we,{children:"Role"}),e.jsx(we,{className:"cursor-pointer hover:text-primary transition-colors text-right",onClick:()=>{i==="transactions"?d(c==="asc"?"desc":"asc"):(l("transactions"),d("desc"))},children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:["Transactions",i==="transactions"&&e.jsx("span",{className:"text-primary font-bold",children:c==="asc"?"":""})]})}),e.jsx(we,{className:"cursor-pointer hover:text-primary transition-colors text-right",onClick:()=>{i==="totalSpent"?d(c==="asc"?"desc":"asc"):(l("totalSpent"),d("desc"))},children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:["Total Spent",i==="totalSpent"&&e.jsx("span",{className:"text-primary font-bold",children:c==="asc"?"":""})]})}),e.jsx(we,{className:"cursor-pointer hover:text-primary transition-colors",onClick:()=>{i==="lastActivity"?d(c==="asc"?"desc":"asc"):(l("lastActivity"),d("desc"))},children:e.jsxs("div",{className:"flex items-center gap-2",children:["Last Activity",i==="lastActivity"&&e.jsx("span",{className:"text-primary font-bold",children:c==="asc"?"":""})]})}),e.jsx(we,{className:"text-right",children:"Actions"})]})}),e.jsx(Js,{children:B.map(z=>e.jsxs(rt,{className:"hover:bg-muted/30 border-border/50 transition-colors",children:[e.jsx(ge,{className:u?"py-2":"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center text-primary-foreground font-bold text-xs",children:(z.username||z.userId||"?").substring(0,2).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:z.username==="User .net"||z.username==="User @lid"||!z.username?z.userId.replace("@s.whatsapp.net","").replace("@lid",""):z.username}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:z.userId.includes("@")?z.userId.split("@")[0]:z.userId})]})]})}),e.jsx(ge,{className:u?"py-2":"py-4",children:e.jsx(re,{variant:C(z.role),className:"capitalize",children:z.role})}),e.jsx(ge,{className:O("text-right font-medium",u?"py-2":"py-4"),children:e.jsx("span",{className:z.transactionCount>0?"text-foreground":"text-muted-foreground",children:z.transactionCount||0})}),e.jsx(ge,{className:O("text-right font-medium",u?"py-2":"py-4"),children:e.jsx("span",{className:z.totalSpent>0?"text-primary":"text-muted-foreground",children:z.totalSpent>0?ke(z.totalSpent):"-"})}),e.jsx(ge,{className:u?"py-2":"py-4",children:z.lastActivity?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm",children:new Date(z.lastActivity).toLocaleDateString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(z.lastActivity).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"Never"})}),e.jsx(ge,{className:O("text-right",u?"py-2":"py-4"),children:e.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>te(z.userId),className:"hover:bg-primary/10 hover:text-primary",children:[e.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Details"]})})]},z.userId))})]})}),e.jsx("div",{className:"p-4 border-t border-border/50 bg-muted/20 flex items-center justify-between",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total: ",e.jsx("span",{className:"font-medium text-foreground",children:B.length})," users found"]})}),E.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ve,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("p",{className:"text-lg font-medium text-foreground",children:"No users found"}),e.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search criteria"})]})]})]})]})}function FC({transactions:t}){const s=t.reduce((a,o)=>{const l=new Date(o.date).toLocaleString("default",{month:"short"});return a[l]||(a[l]=0),a[l]+=o.totalBayar,a},{}),r=Object.entries(s).map(([a,o])=>({name:a,value:o})),n=r.length>0?r:[{name:"Jan",value:0},{name:"Feb",value:0},{name:"Mar",value:0}];return e.jsxs(N,{className:"card-premium border-none shadow-soft h-full",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Spending History"}),e.jsx(X,{children:"Monthly transaction volume"})]}),e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx($e,{className:"h-4 w-4 text-primary"})})]})}),e.jsx(S,{children:e.jsx("div",{className:"h-[250px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:n,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(Me,{axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:a=>`${a/1e3}k`}),e.jsx(_e,{cursor:{fill:"hsl(var(--muted)/0.2)"},formatter:a=>[ke(a),"Spent"],contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.5rem"}}),e.jsx(dt,{dataKey:"value",radius:[4,4,0,0],children:n.map((a,o)=>e.jsx(Ot,{fill:"hsl(var(--primary))",fillOpacity:.8},`cell-${o}`))})]})})})})]})}function $C({transactions:t}){const s=t.reduce((n,a)=>{const o=a.name;return n[o]||(n[o]={count:0,totalSpent:0}),n[o].count+=a.jumlah||1,n[o].totalSpent+=a.totalBayar,n},{}),r=Object.entries(s).map(([n,a])=>({name:n,count:a.count,totalSpent:a.totalSpent})).sort((n,a)=>a.count-n.count).slice(0,5);return e.jsxs(N,{className:"card-premium border-none shadow-soft h-full",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Favorite Products"}),e.jsx(X,{children:"Most frequently purchased items"})]}),e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg",children:e.jsx(gl,{className:"h-4 w-4 text-emerald-500"})})]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:r.length>0?r.map((n,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-secondary text-xs font-bold text-muted-foreground",children:a+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium leading-none",children:n.name}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[n.count," times"]})]})]}),e.jsx(re,{variant:"secondary",className:"font-normal",children:"Top Pick"})]},a)):e.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No purchase history available"})})})]})}function BC(){var j,w,k,R,C;const{userId:t}=xl(),s=yn(),{data:r,isLoading:n,error:a}=Ne({queryKey:["user-transactions",t],queryFn:()=>ue.getUserTransactions(t)}),{data:o,refetch:i,isFetching:l}=Ne({queryKey:["user-activity"],queryFn:ue.getEnhancedUserActivity,refetchOnWindowFocus:!0,staleTime:0,refetchInterval:3e4}),c=(E,M)=>E!=null&&E.startsWith("User ")&&E.includes("@s.whatsapp.net")?E.replace("User ","").replace("@s.whatsapp.net",""):E!=null&&E.includes("@s.whatsapp.net")?E.replace("@s.whatsapp.net",""):E&&/^\d+$/.test(E)?E:E||"Unknown User",d=E=>E!=null&&E.includes("@s.whatsapp.net")?E:E&&/^\d+$/.test(E)?`${E}@s.whatsapp.net`:E||"Unknown ID",u=r?{userId:t||"unknown",username:r.user||`User ${t}`,transactionCount:r.totalTransaksi||0,totalSpent:r.totalSpent||0,lastActivity:null,role:"bronze",saldo:(r==null?void 0:r.currentSaldo)??0}:null,h=(j=o==null?void 0:o.userActivity)==null?void 0:j.find(E=>{var I,te,W;if(E.userId===t||((I=E.userId)==null?void 0:I.replace("@s.whatsapp.net",""))===t)return!0;const B=t!=null&&t.includes("@s.whatsapp.net")?t:`${t}@s.whatsapp.net`;return E.userId===B||((W=(te=E.userId)==null?void 0:te.match(/\d+/))==null?void 0:W[0])===t});if(n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading user details..."})]})});if(a||!h&&!u)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-destructive/5 rounded-2xl border border-destructive/20",children:[e.jsx("h3",{className:"text-lg font-bold text-destructive mb-2",children:"Failed to load user details"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["User ID: ",t,e.jsx("br",{}),"Error: ",(a==null?void 0:a.message)||"User not found"]}),e.jsx(Z,{onClick:()=>s("/users"),variant:"outline",children:"Back to Users"})]})});const x=h||u,f=c(x.username,x.userId),b=d(x.userId),g=(r==null?void 0:r.currentSaldo)??(h==null?void 0:h.saldo)??(x==null?void 0:x.saldo)??null,p=(()=>{const E=x==null?void 0:x.lastActivity;if(E){const I=new Date(E);return I.setHours(I.getHours()-7),I.toISOString()}const M=((r==null?void 0:r.transaksi)||[]).map(I=>I.date?new Date(I.date).getTime():NaN).filter(I=>!Number.isNaN(I));if(M.length===0)return null;const B=Math.max(...M),q=new Date(B);return q.setHours(q.getHours()-7),q.toISOString()})(),y=E=>{switch(E.toLowerCase()){case"gold":return"default";case"silver":return"secondary";case"bronze":return"outline";default:return"outline"}},v=E=>{switch(E.toLowerCase()){case"gold":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";case"silver":return"bg-slate-500/10 text-slate-600 border-slate-500/20";case"bronze":return"bg-orange-500/10 text-orange-600 border-orange-500/20";default:return"bg-slate-500/10 text-slate-600 border-slate-500/20"}};return e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[e.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>s("/users"),className:"h-auto p-0 hover:bg-transparent hover:text-primary",children:[e.jsx(Ca,{className:"h-4 w-4 mr-1"}),"Users"]}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"Details"})]}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"User Profile"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(re,{variant:y(x.role),className:O("px-4 py-1.5 text-sm font-semibold capitalize",v(x.role)),children:[x.role," Member"]})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft overflow-hidden",children:[e.jsx("div",{className:"h-32 bg-gradient-to-r from-primary/20 via-primary/10 to-background"}),e.jsxs(S,{className:"relative pt-0",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-6 -mt-12 mb-6 px-2",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl bg-background p-1 shadow-xl",children:e.jsx("div",{className:"w-full h-full rounded-xl bg-gradient-to-br from-primary to-violet-600 flex items-center justify-center text-white text-3xl font-bold shadow-inner",children:((w=f==null?void 0:f.charAt(0))==null?void 0:w.toUpperCase())||"U"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:f}),e.jsxs("p",{className:"text-muted-foreground font-mono text-sm flex items-center gap-2",children:[b,e.jsx(re,{variant:"outline",className:"text-[10px] h-5 px-1.5 font-normal bg-muted/50",children:"ID"})]})]}),e.jsx("div",{className:"flex gap-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-8",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 flex flex-col items-center justify-center text-center gap-2 hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"p-2.5 bg-blue-500/10 rounded-full",children:e.jsx(qe,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:(r==null?void 0:r.totalTransaksi)||((k=r==null?void 0:r.transaksi)==null?void 0:k.length)||x.transactionCount||0}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Transactions"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 flex flex-col items-center justify-center text-center gap-2 hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"p-2.5 bg-emerald-500/10 rounded-full",children:e.jsx(Ft,{className:"h-5 w-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:ke((r==null?void 0:r.totalSpent)||x.totalSpent||0)}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Total Spent"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 flex flex-col items-center justify-center text-center gap-2 hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"p-2.5 bg-cyan-500/10 rounded-full",children:e.jsx(on,{className:"h-5 w-5 text-cyan-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:g!=null?ke(g):""}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Current Balance"})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 flex flex-col items-center justify-center text-center gap-2 hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"p-2.5 bg-purple-500/10 rounded-full",children:e.jsx(ft,{className:"h-5 w-5 text-purple-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-foreground",children:p?new Date(p).toLocaleDateString("id-ID"):""}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:"Last Activity"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsx(FC,{transactions:(r==null?void 0:r.transaksi)||[]}),e.jsx($C,{transactions:(r==null?void 0:r.transaksi)||[]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2 text-base",children:[e.jsx(wn,{className:"h-4 w-4 text-primary"}),"Personal Information"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-muted rounded-md",children:e.jsx(ln,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx("span",{className:"text-sm font-medium",children:"Phone Number"})]}),e.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:b.split("@")[0]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-muted rounded-md",children:e.jsx(vr,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx("span",{className:"text-sm font-medium",children:"Member Since"})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:p?new Date(p).toLocaleDateString("id-ID",{month:"short",year:"numeric"}):""})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-muted rounded-md",children:e.jsx(jl,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx("span",{className:"text-sm font-medium",children:"Status"})]}),e.jsx(re,{variant:"default",className:"bg-emerald-500/10 text-emerald-600 hover:bg-emerald-500/20 border-emerald-500/20",children:"Active"})]})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2 text-base",children:[e.jsx($e,{className:"h-4 w-4 text-primary"}),"Financial Summary"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50 last:border-0",children:[e.jsx("span",{className:"text-sm font-medium",children:"Avg. Transaction"}),e.jsx("span",{className:"text-sm font-bold text-foreground",children:ke(((r==null?void 0:r.totalSpent)||x.totalSpent||0)/Math.max(((R=r==null?void 0:r.transaksi)==null?void 0:R.length)||x.transactionCount||1,1))})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50 last:border-0",children:[e.jsx("span",{className:"text-sm font-medium",children:"Frequency"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:(((C=r==null?void 0:r.transaksi)==null?void 0:C.length)||x.transactionCount||0)>5?"Regular":"Occasional"})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50 last:border-0",children:[e.jsx("span",{className:"text-sm font-medium",children:"Loyalty Tier"}),e.jsx("span",{className:"text-sm font-medium capitalize text-primary",children:x.role})]})]})]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(N,{className:"card-premium border-none shadow-soft h-full",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5 text-primary"}),"Recent Transactions"]}),e.jsx(X,{children:"History of purchases and activities"})]}),e.jsx(S,{className:"p-0",children:r!=null&&r.transaksi&&r.transaksi.length>0||(h==null?void 0:h.transactionCount)>0?e.jsxs(Xs,{children:[e.jsx(Ys,{className:"bg-muted/50",children:e.jsxs(rt,{className:"hover:bg-transparent border-border/50",children:[e.jsx(we,{children:"Reference ID"}),e.jsx(we,{children:"Product"}),e.jsx(we,{children:"Amount"}),e.jsx(we,{children:"Date"}),e.jsx(we,{className:"text-right",children:"Action"})]})}),e.jsx(Js,{children:r!=null&&r.transaksi&&r.transaksi.length>0?r.transaksi.map((E,M)=>e.jsxs(rt,{className:"hover:bg-muted/30 border-border/50 transition-colors",children:[e.jsx(ge,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("code",{className:"text-xs bg-muted px-1.5 py-0.5 rounded text-muted-foreground border border-border w-fit",children:Qe(E)}),e.jsx(re,{variant:_i(ns(E)),className:"w-fit text-[10px] px-1.5 py-0 h-5",children:ns(E)})]})}),e.jsx(ge,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground text-sm",children:E.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Qty: ",E.jumlah]})]})}),e.jsx(ge,{children:e.jsx("p",{className:"font-medium text-foreground text-sm",children:ke(E.totalBayar)})}),e.jsx(ge,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-foreground",children:Cm((()=>{const B=new Date(E.date);return B.setHours(B.getHours()-7),B.toISOString()})(),"short")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Rm((()=>{const B=new Date(E.date);return B.setHours(B.getHours()-7),B.toISOString()})())})]})}),e.jsx(ge,{className:"text-right",children:e.jsx(Z,{variant:"ghost",size:"icon",onClick:()=>s(`/transactions?search=${encodeURIComponent(Qe(E))}`),className:"h-8 w-8 text-muted-foreground hover:text-primary hover:bg-primary/10",children:e.jsx(Nn,{className:"h-4 w-4"})})})]},`real-transaction-${M}`)):Array.from({length:Math.min(5,h.transactionCount)},(E,M)=>{var B;return e.jsxs(rt,{className:"hover:bg-muted/30 border-border/50",children:[e.jsx(ge,{children:e.jsx("code",{className:"text-xs bg-muted px-1.5 py-0.5 rounded text-muted-foreground border border-border",children:`REF-${(B=h.userId)==null?void 0:B.replace("@s.whatsapp.net","")}-${String(M+1).padStart(3,"0")}`})}),e.jsx(ge,{children:e.jsx("span",{className:"text-sm text-muted-foreground italic",children:"Archived Transaction"})}),e.jsx(ge,{children:e.jsx("span",{className:"text-sm font-medium text-foreground",children:ke(Math.floor(h.totalSpent/h.transactionCount))})}),e.jsx(ge,{children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Unknown Date"})}),e.jsx(ge,{className:"text-right",children:e.jsx(re,{variant:"outline",className:"text-[10px]",children:"Archived"})})]},`enhanced-transaction-${M}`)})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-3",children:e.jsx(qe,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("p",{className:"text-foreground font-medium",children:"No transactions found"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto mt-1",children:"This user hasn't made any transactions yet. Once they do, they will appear here."})]})})]})})]})]})}function UC(){var T,Y,se;const[t,s]=m.useState(""),[r,n]=m.useState(null),[a,o]=m.useState(!1),[i,l]=m.useState(!1),[c,d]=m.useState(!1),[u,h]=m.useState(null),[x,f]=m.useState(null),[b,g]=m.useState(!1),[p,y]=m.useState(!1),{toast:v}=Sn(),[j,w]=m.useState(1),[k]=m.useState(10),{data:R,isLoading:C}=Ne({queryKey:["recent-transactions"],queryFn:()=>ue.getRecentTransactions(1e3)}),{data:E}=Ne({queryKey:["dashboard-overview"],queryFn:ue.getOverview}),M=E,B=m.useCallback(z(async H=>{var ne;if(!H.trim()){n(null),l(!1);return}o(!0);try{const U=[],le=new Set;try{const ce=await ue.searchTransaction(H.trim());if(ce){const ae=ce.reffId||Qe(ce);ae&&!le.has(ae)&&(U.push(ce),le.add(ae))}}catch{}const je=((ne=R==null?void 0:R.transactions)==null?void 0:ne.filter(ce=>{const ae=H.toLowerCase();return Qe(ce).toLowerCase().includes(ae)||rs(ce).toLowerCase().includes(ae)||ce.name.toLowerCase().includes(ae)||ns(ce).toLowerCase().includes(ae)}))||[];for(const ce of je){const ae=Qe(ce);ae&&!le.has(ae)&&(U.push(ce),le.add(ae))}n(U),l(!1)}catch{n(null),l(!1)}o(!1)},300),[R]),q=()=>{l(!1),d(!1),h(null),f(null),n(null),s("")},I=async H=>{var ne;g(!0);try{const U=await ue.searchTransaction(H);h(U),U.receiptExists&&U.receiptContent?f(U.receiptContent):f("Receipt not available - This transaction may not have generated a receipt yet.")}catch(U){console.error("Failed to fetch transaction with receipt:",U),((ne=U.response)==null?void 0:ne.status)===404?(f("Transaction not found"),v({title:"Transaction Error",description:"Transaction not found",variant:"destructive"})):(f("Failed to load transaction data - Please check your connection and try again."),v({title:"Connection Error",description:"Could not load transaction data",variant:"destructive"}))}finally{g(!1)}},te=async H=>{try{const ne=await ue.downloadReceipt(H),U=window.URL.createObjectURL(ne),le=document.createElement("a");le.href=U,le.download=`${H}.txt`,document.body.appendChild(le),le.click(),document.body.removeChild(le),window.URL.revokeObjectURL(U),v({title:"Download Successful",description:`Receipt ${H}.txt has been downloaded`})}catch(ne){console.error("Failed to download receipt:",ne),v({title:"Download Failed",description:"Could not download receipt file",variant:"destructive"})}},W=async()=>{if(x)try{await navigator.clipboard.writeText(x),y(!0),v({title:"Copied to Clipboard",description:"Account information has been copied to clipboard"}),setTimeout(()=>{y(!1)},2e3)}catch(H){console.error("Failed to copy to clipboard:",H),v({title:"Copy Failed",description:"Could not copy to clipboard. Please try again.",variant:"destructive"})}};m.useEffect(()=>{B(t)},[t,B]);function z(H,ne){let U;return(...le)=>{clearTimeout(U),U=setTimeout(()=>H(...le),ne)}}const K=async H=>{try{const ne=await ue.exportData(H);v({title:"Export Successful",description:ne.message})}catch{v({title:"Export Failed",description:"Failed to export data. Please try again.",variant:"destructive"})}};if(C)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading transactions..."})]})});const $=((T=R==null?void 0:R.transactions)==null?void 0:T.filter(H=>{if(!t.trim())return!0;const ne=t.toLowerCase();return Qe(H).toLowerCase().includes(ne)||rs(H).toLowerCase().includes(ne)||H.name.toLowerCase().includes(ne)||ns(H).toLowerCase().includes(ne)}))||[],D=Math.ceil($.length/k),A=(j-1)*k,Q=A+k,ee=$.slice(A,Q);return m.useEffect(()=>{w(1)},[t]),e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Transactions"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Search transactions, view details, and export data"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{onClick:()=>K("json"),variant:"outline",className:"bg-background/50 backdrop-blur-sm",children:[e.jsx(hr,{className:"mr-2 h-4 w-4"}),"Export JSON"]}),e.jsxs(Z,{onClick:()=>K("csv"),variant:"outline",className:"bg-background/50 backdrop-blur-sm",children:[e.jsx(hr,{className:"mr-2 h-4 w-4"}),"Export CSV"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Transactions"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(M==null?void 0:M.totalTransaksi)||0}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"+12.5% vs last month"]})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:e.jsx(qe,{className:"h-6 w-6 text-blue-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:ke((M==null?void 0:M.totalPendapatan)||0)}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"+8.2% vs last month"]})]}),e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:e.jsx(qe,{className:"h-6 w-6 text-emerald-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Today's Transactions"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(M==null?void 0:M.transaksiHariIni)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[ke((M==null?void 0:M.pendapatanHariIni)||0)," revenue"]})]}),e.jsx("div",{className:"p-3 bg-purple-500/10 rounded-xl",children:e.jsx(qe,{className:"h-6 w-6 text-purple-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Payment Methods"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:`${((Y=M==null?void 0:M.metodeBayar)==null?void 0:Y.saldo)||0} + ${((se=M==null?void 0:M.metodeBayar)==null?void 0:se.qris)||0}`}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active methods"})]}),e.jsx("div",{className:"p-3 bg-orange-500/10 rounded-xl",children:e.jsx(qe,{className:"h-6 w-6 text-orange-500"})})]})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft overflow-hidden",children:[e.jsxs(L,{className:"bg-muted/50 border-b border-border/50",children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-5 w-5 text-primary"}),"Live Search"]}),e.jsx(X,{children:"Search by reference ID, user name, product name, or payment method - results appear as you type"})]}),e.jsx(S,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(st,{placeholder:"Type reference ID (e.g., REF123456), user name, product, or payment method...",value:t,onChange:H=>s(H.target.value),className:"pl-10 bg-background/50 border-border/50 focus:bg-background transition-colors"}),a&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"})})]}),t.trim()&&r&&r.length===0&&!a&&e.jsxs("div",{className:"mt-4 p-4 bg-muted/30 rounded-xl border border-border/50 text-center",children:[e.jsx(ys,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsxs("p",{className:"text-foreground font-medium",children:['No results found for "',t,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try a different search term"})]}),!t.trim()&&e.jsx("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-xl border border-blue-500/20",children:e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[" ",e.jsx("strong",{children:"Live Search Tips:"})," Start typing to search instantly. Search by transaction reference ID, user name, product, or payment method."]})})]})})]}),!c&&e.jsxs(N,{className:"card-premium border-none shadow-soft overflow-hidden",children:[e.jsxs(L,{className:"bg-muted/50 border-b border-border/50 flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Recent Transactions"}),e.jsxs(X,{children:["Showing ",A+1,"-",Math.min(Q,$.length)," of ",$.length," transactions"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(H=>Math.max(1,H-1)),disabled:j===1,className:"h-8 w-8 p-0",children:"<"}),e.jsxs("span",{className:"text-sm font-medium",children:["Page ",j," of ",D||1]}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(H=>Math.min(D,H+1)),disabled:j===D||D===0,className:"h-8 w-8 p-0",children:">"})]})]}),e.jsxs(S,{className:"p-0",children:[e.jsxs(Xs,{children:[e.jsx(Ys,{className:"bg-muted/50",children:e.jsxs(rt,{className:"hover:bg-transparent border-border/50",children:[e.jsx(we,{children:"Reference ID"}),e.jsx(we,{children:"Product"}),e.jsx(we,{children:"User"}),e.jsx(we,{children:"Payment Method"}),e.jsx(we,{children:"Amount"}),e.jsx(we,{children:"Date"}),e.jsx(we,{children:"Actions"})]})}),e.jsx(Js,{children:ee.map(H=>e.jsxs(rt,{className:"hover:bg-muted/30 border-border/50 transition-colors",children:[e.jsx(ge,{children:e.jsx("code",{className:"text-xs bg-muted px-2 py-1 rounded text-muted-foreground border border-border",children:Qe(H)})}),e.jsx(ge,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:H.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Qty: ",H.jumlah,"  ",ke(H.price)," each"]})]})}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:rs(H).charAt(0).toUpperCase()}),e.jsx("p",{className:"font-medium text-foreground",children:rs(H)})]})}),e.jsx(ge,{children:e.jsx(re,{variant:_i(ns(H)),className:"capitalize",children:ns(H)})}),e.jsx(ge,{children:e.jsx("p",{className:"font-medium text-foreground",children:ke(H.totalBayar)})}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(vr,{className:"h-3 w-3"}),H.date]})}),e.jsx(ge,{children:e.jsx(Z,{variant:"ghost",size:"sm",onClick:()=>{s(Qe(H)),(async()=>(await I(Qe(H)),d(!0)))()},className:"text-muted-foreground hover:text-primary hover:bg-primary/10",children:e.jsx(Nn,{className:"h-4 w-4"})})})]},Qe(H)))})]}),$.length===0&&t.trim()&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ys,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsxs("p",{className:"text-foreground",children:['No transactions match "',t,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try a different search term"})]}),(!(R!=null&&R.transactions)||R.transactions.length===0)&&!t.trim()&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qe,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-lg font-medium text-foreground",children:"No transactions found"}),e.jsx("p",{className:"text-muted-foreground",children:"Transactions will appear here once available"})]})]}),e.jsxs("div",{className:"p-4 border-t border-border/50 bg-muted/20 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",A+1," to ",Math.min(Q,$.length)," of ",$.length," entries"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(1),disabled:j===1,className:"hidden sm:flex",children:"First"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(H=>Math.max(1,H-1)),disabled:j===1,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1 mx-2",children:Array.from({length:Math.min(5,D)},(H,ne)=>{let U=ne+1;return D>5&&(j>3&&(U=j-2+ne),U>D&&(U=D-(4-ne))),e.jsx(Z,{variant:j===U?"default":"ghost",size:"sm",onClick:()=>w(U),className:"h-8 w-8 p-0",children:U},U)})}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(H=>Math.min(D,H+1)),disabled:j===D||D===0,children:"Next"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(D),disabled:j===D||D===0,className:"hidden sm:flex",children:"Last"})]})]})]}),c&&u&&e.jsxs(N,{className:"card-premium border-none shadow-soft mt-4 animate-in fade-in-50 slide-in-from-bottom-4 duration-300",children:[e.jsxs(L,{className:"bg-muted/50 border-b border-border/50 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ur,{className:"h-5 w-5 text-primary"}),"Transaction Details"]}),e.jsx(Z,{variant:"ghost",size:"sm",onClick:q,className:"text-muted-foreground hover:text-foreground hover:bg-muted",children:" Close"})]}),e.jsxs(X,{children:["Reference: ",e.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded border border-border ml-1",children:u.reffId||Qe(u)})]})]}),e.jsx(S,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"User"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-xs font-bold text-primary",children:rs(u).charAt(0).toUpperCase()}),e.jsx("p",{className:"font-medium text-foreground",children:rs(u)})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Product"}),e.jsx("p",{className:"font-medium text-foreground",children:u.produk||u.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amount"}),e.jsx("p",{className:"font-bold text-xl text-foreground",children:ke(u.totalBayar)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Payment Method"}),e.jsx(re,{variant:_i(u.metodeBayar),className:"capitalize",children:ns(u)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Date"}),e.jsxs("div",{className:"flex items-center gap-1 font-medium text-foreground",children:[e.jsx(vr,{className:"h-4 w-4 text-muted-foreground"}),u.tanggal||u.date]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Profit"}),e.jsx("p",{className:"font-medium text-emerald-500",children:ke(u.profit||0)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"User Role"}),e.jsx(re,{variant:"outline",className:"capitalize",children:(u.userRole||"USER").toUpperCase()})]})]})})]}),c&&u&&e.jsxs(N,{className:"card-premium border-none shadow-soft mt-4 animate-in fade-in-50 slide-in-from-bottom-4 duration-300 delay-100",children:[e.jsxs(L,{className:"bg-blue-500/5 border-b border-blue-500/10 rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(F,{className:"flex items-center gap-2 text-blue-600 dark:text-blue-400",children:[e.jsx(yi,{className:"h-5 w-5"}),"Account Details"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.receiptExists&&e.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>te(u.reffId||Qe(u)),className:"border-blue-200 text-blue-600 hover:bg-blue-50 dark:border-blue-800 dark:text-blue-400 dark:hover:bg-blue-900/20",children:[e.jsx(hr,{className:"h-4 w-4 mr-1"}),"Download"]}),e.jsx(re,{variant:"outline",className:"border-blue-200 text-blue-600 dark:border-blue-800 dark:text-blue-400",children:u.receiptExists?"Receipt Available":"No Receipt"})]})]}),e.jsx(X,{children:"Account information from transaction receipt"})]}),e.jsx(S,{className:"pt-6",children:b?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mr-3"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading account details..."})]}):e.jsxs("div",{className:"space-y-4",children:[u.receiptExists&&x?e.jsx("div",{className:"bg-muted/30 rounded-xl p-4 border border-border/50",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"bg-blue-500/10 p-2.5 rounded-xl shrink-0",children:e.jsx(ur,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Receipt Content"}),e.jsx(Z,{variant:"outline",size:"sm",onClick:W,className:"h-8",children:p?e.jsxs(e.Fragment,{children:[e.jsx(an,{className:"h-3.5 w-3.5 mr-1.5"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Hu,{className:"h-3.5 w-3.5 mr-1.5"}),"Copy All"]})})]}),e.jsx("div",{className:"bg-background rounded-lg border border-border p-4 shadow-sm overflow-x-auto",children:e.jsx("pre",{className:"text-sm text-muted-foreground whitespace-pre-wrap font-mono leading-relaxed",children:x})})]})]})}):u.receiptExists?null:e.jsx("div",{className:"bg-amber-500/10 rounded-xl p-4 border border-amber-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-amber-500/20 p-2 rounded-lg",children:e.jsx(ur,{className:"h-5 w-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-amber-700 dark:text-amber-400 mb-1",children:"No Receipt Available"}),e.jsx("p",{className:"text-sm text-amber-600/80 dark:text-amber-400/80",children:"This transaction was processed before the receipt system was implemented, or the receipt was not generated."})]})]})}),u&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-emerald-500/10 rounded-xl p-4 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(wn,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"}),e.jsx("h4",{className:"font-medium text-emerald-700 dark:text-emerald-400",children:"Transaction Account Info"})]}),e.jsxs("div",{className:"space-y-2.5 text-sm",children:[e.jsxs("div",{className:"flex justify-between border-b border-emerald-500/10 pb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Product:"}),e.jsx("span",{className:"font-medium text-foreground",children:u.produk||u.name})]}),e.jsxs("div",{className:"flex justify-between border-b border-emerald-500/10 pb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"User ID:"}),e.jsx("span",{className:"font-medium text-foreground",children:u.user||u.user_name})]}),e.jsxs("div",{className:"flex justify-between border-b border-emerald-500/10 pb-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Payment Method:"}),e.jsx("span",{className:"font-medium text-foreground",children:u.metodeBayar||u.payment_method})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"User Role:"}),e.jsx("span",{className:"font-medium text-foreground capitalize",children:u.userRole||"bronze"})]}),u.deliveredAccount&&e.jsxs("div",{className:"mt-3 p-3 bg-background rounded-lg border border-emerald-500/20 shadow-sm",children:[e.jsx("span",{className:"text-muted-foreground text-xs uppercase tracking-wider font-semibold",children:"Delivered Account:"}),e.jsx("p",{className:"font-mono text-sm text-foreground mt-1 break-all",children:u.deliveredAccount})]})]})]}),e.jsxs("div",{className:"bg-amber-500/10 rounded-xl p-4 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ur,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),e.jsx("h4",{className:"font-medium text-amber-700 dark:text-amber-400",children:"Receipt Status"})]}),e.jsx("div",{className:"space-y-2 text-sm",children:u.receiptExists?e.jsxs("div",{className:"text-emerald-600 dark:text-emerald-400",children:[e.jsxs("p",{className:"font-medium flex items-center gap-1",children:[e.jsx(an,{className:"h-4 w-4"})," Receipt Available"]}),e.jsx("p",{className:"text-xs mt-1 text-muted-foreground",children:"Receipt content is displayed above with account details and transaction information."})]}):e.jsxs("div",{className:"text-amber-600 dark:text-amber-400",children:[e.jsxs("p",{className:"font-medium flex items-center gap-1",children:[e.jsx(yi,{className:"h-4 w-4"})," Receipt Not Available"]}),e.jsx("p",{className:"text-xs mt-1 text-muted-foreground",children:"This transaction may not have generated a receipt yet, or the receipt system was not active at the time of purchase."})]})})]})]})]})})]})]})}var pc="Progress",gc=100,[zC,dA]=at(pc),[WC,HC]=zC(pc),kp=m.forwardRef((t,s)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:o=qC,...i}=t;(a||a===0)&&!ru(a)&&console.error(KC(`${a}`,"Progress"));const l=ru(a)?a:gc;n!==null&&!nu(n,l)&&console.error(VC(`${n}`,"Progress"));const c=nu(n,l)?n:null,d=Ua(c)?o(c,l):void 0;return e.jsx(WC,{scope:r,value:c,max:l,children:e.jsx(oe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ua(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":_p(c,l),"data-value":c??void 0,"data-max":l,...i,ref:s})})});kp.displayName=pc;var Cp="ProgressIndicator",Rp=m.forwardRef((t,s)=>{const{__scopeProgress:r,...n}=t,a=HC(Cp,r);return e.jsx(oe.div,{"data-state":_p(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:s})});Rp.displayName=Cp;function qC(t,s){return`${Math.round(t/s*100)}%`}function _p(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function Ua(t){return typeof t=="number"}function ru(t){return Ua(t)&&!isNaN(t)&&t>0}function nu(t,s){return Ua(t)&&!isNaN(t)&&t<=s&&t>=0}function KC(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${gc}\`.`}function VC(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${gc} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ap=kp,GC=Rp;const os=m.forwardRef(({className:t,value:s,indicatorClassName:r,...n},a)=>e.jsx(Ap,{ref:a,className:O("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:e.jsx(GC,{className:O("h-full w-full flex-1 bg-primary transition-all",r),style:{transform:`translateX(-${100-(s||0)}%)`}})}));os.displayName=Ap.displayName;function XC(){const{data:t,isLoading:s}=Ne({queryKey:["stock-alerts"],queryFn:ue.getStockAlerts});if(s)return e.jsx(tt,{className:"h-24 w-full rounded-xl"});if(!t||t.totalAlerts===0)return e.jsx(N,{className:"bg-emerald-500/10 border-emerald-500/20 shadow-none",children:e.jsx(S,{className:"flex items-center justify-between p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-full",children:e.jsx(Ku,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-emerald-900 dark:text-emerald-100",children:"Healthy Inventory"}),e.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-300",children:"All products are well stocked."})]})]})})});const r=t.criticalAlerts,n=t.highAlerts;return e.jsx(N,{className:O("border-none shadow-soft overflow-hidden",r>0?"bg-red-500/5 border-l-4 border-l-red-500":"bg-amber-500/5 border-l-4 border-l-amber-500"),children:e.jsxs(S,{className:"p-0",children:[e.jsxs("div",{className:"p-6 flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:O("p-3 rounded-xl",r>0?"bg-red-500/10 text-red-600":"bg-amber-500/10 text-amber-600"),children:r>0?e.jsx(Xb,{className:"h-6 w-6"}):e.jsx(Ht,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:["Inventory Alerts",r>0&&e.jsxs(re,{variant:"destructive",className:"rounded-full px-2.5",children:[r," Critical"]}),n>0&&e.jsxs(re,{variant:"secondary",className:"bg-amber-500/10 text-amber-700 hover:bg-amber-500/20 border-amber-200",children:[n," Low Stock"]})]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:r>0?"Action required: Some products are out of stock or critically low.":"Several products are running low on stock. Consider restocking soon."})]})]}),e.jsxs(Z,{variant:r>0?"destructive":"default",className:"shrink-0",children:["Manage Inventory ",e.jsx(Wu,{className:"ml-2 h-4 w-4"})]})]}),e.jsxs("div",{className:"bg-background/50 border-t border-border/50 px-6 py-3 flex items-center gap-4 overflow-x-auto",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground whitespace-nowrap uppercase tracking-wider",children:"Needs Attention:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.alerts.slice(0,5).map(a=>e.jsxs(re,{variant:"outline",className:"bg-background border-border/50 whitespace-nowrap",children:[e.jsx("span",{className:O("mr-1.5 h-1.5 w-1.5 rounded-full",a.status==="out"?"bg-red-500":"bg-amber-500")}),a.productName," (",a.currentStock,")"]},a.productId)),t.alerts.length>5&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",t.alerts.length-5," more"]})]})]})]})})}function YC(){const{data:t,isLoading:s}=Ne({queryKey:["stock-analytics"],queryFn:ue.getStockAnalyticsAdvanced});if(s)return e.jsx(tt,{className:"h-[400px] w-full rounded-xl"});if(!t)return null;const r=t.performance.stockTurnover.map(n=>({name:n.name,turnover:n.turnoverRate,status:n.status}));return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Stock Turnover Rate"}),e.jsx(X,{children:"Fastest moving products this month"})]}),e.jsxs(re,{variant:"secondary",className:"bg-blue-500/10 text-blue-700",children:[e.jsx(ft,{className:"mr-1 h-3 w-3"}),"High Velocity"]})]})}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:r,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(De,{strokeDasharray:"3 3",horizontal:!0,vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{type:"number",hide:!0}),e.jsx(Me,{dataKey:"name",type:"category",width:100,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(_e,{cursor:{fill:"hsl(var(--muted)/0.2)"},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.5rem"}}),e.jsx(dt,{dataKey:"turnover",radius:[0,4,4,0],barSize:20,children:r.map((n,a)=>e.jsx(Ot,{fill:a<3?"hsl(var(--primary))":"hsl(var(--muted-foreground))"},`cell-${a}`))})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Demand Forecast"}),e.jsx(X,{children:"Predicted stock needs for next 30 days"})]}),e.jsxs(re,{variant:"secondary",className:"bg-purple-500/10 text-purple-700",children:[e.jsx($e,{className:"mr-1 h-3 w-3"}),"AI Forecast"]})]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[t.predictions.demandForecast.slice(0,4).map((n,a)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:n.productName}),e.jsxs("span",{className:"text-muted-foreground",children:[n.predictedDemand," units needed"]})]}),e.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Math.min(n.predictedDemand/100*100,100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Current: ",n.currentStock]}),e.jsx("span",{className:n.trend==="up"?"text-emerald-500":"text-rose-500",children:n.trend==="up"?"Trending Up":"Trending Down"})]})]},a)),t.predictions.demandForecast.length===0&&e.jsx("div",{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground",children:e.jsx("p",{children:"Not enough data for forecast"})})]})})]})]})}const au=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899"];function JC(){var u,h,x;const[t,s]=m.useState(""),{data:r,isLoading:n,error:a}=Ne({queryKey:["product-stats"],queryFn:ue.getProductStats}),o=f=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(f),i=(f,b)=>{const g=f/b*100;return g>=20?"default":g>=10?"secondary":"outline"},l=(r==null?void 0:r.products.filter(f=>f.name.toLowerCase().includes(t.toLowerCase())||f.id.toLowerCase().includes(t.toLowerCase())))||[];if(n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading products..."})]})});if(a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-destructive/5 rounded-2xl border border-destructive/20",children:[e.jsx("h3",{className:"text-lg font-bold text-destructive mb-2",children:"Failed to load products"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a instanceof Error?a.message:"Unknown error occurred"}),e.jsx(Z,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})});const c=(r==null?void 0:r.topProducts.slice(0,8).map(f=>({name:f.name.length>15?f.name.substring(0,15)+"...":f.name,fullName:f.name,sold:f.totalSold,revenue:f.totalRevenue})))||[],d=(r==null?void 0:r.topProducts.slice(0,5).map(f=>({name:f.name,value:f.totalSold,revenue:f.totalRevenue})))||[];return e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Product Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Track product performance, sales, and revenue insights"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{variant:"outline",className:"bg-background/50 backdrop-blur-sm",children:[e.jsx(bl,{className:"mr-2 h-4 w-4"}),"Filter"]}),e.jsxs(Z,{className:"bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg shadow-primary/20",children:[e.jsx(Ns,{className:"mr-2 h-4 w-4"}),"Add Product"]})]})]}),e.jsx(XC,{}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Products"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(r==null?void 0:r.totalProducts)||0}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"+12 new this month"]})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:e.jsx(Ns,{className:"h-6 w-6 text-blue-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Sales"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(r==null?void 0:r.totalSold)||0}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"+8.2% vs last month"]})]}),e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:e.jsx(gl,{className:"h-6 w-6 text-emerald-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Top Product Revenue"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:o(((u=r==null?void 0:r.topProducts[0])==null?void 0:u.totalRevenue)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate max-w-[150px]",children:((h=r==null?void 0:r.topProducts[0])==null?void 0:h.name)||"N/A"})]}),e.jsx("div",{className:"p-3 bg-purple-500/10 rounded-xl",children:e.jsx(Ft,{className:"h-6 w-6 text-purple-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Average Price"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:o((r==null?void 0:r.products.reduce((f,b)=>f+b.averagePrice,0))/((r==null?void 0:r.products.length)||1)||0)}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-amber-500",children:[e.jsx(br,{className:"h-3 w-3 mr-1"}),"-2.1% price adj."]})]}),e.jsx("div",{className:"p-3 bg-orange-500/10 rounded-xl",children:e.jsx($e,{className:"h-6 w-6 text-orange-500"})})]})})})]}),e.jsx(YC,{}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Top Products by Sales"}),e.jsx(X,{children:"Number of units sold per product"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(jn,{data:c,layout:"horizontal",margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorSold",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{type:"number",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(Me,{dataKey:"name",type:"category",width:100,axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(_e,{formatter:(f,b)=>[f.toLocaleString(),"Units Sold"],labelFormatter:f=>{var b;return`Product: ${((b=c.find(g=>g.name===f))==null?void 0:b.fullName)||f}`},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx(is,{type:"monotone",dataKey:"sold",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#colorSold)",activeDot:{r:6,strokeWidth:0}})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Revenue Distribution"}),e.jsx(X,{children:"Revenue share by top products"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(js,{children:[e.jsx(ws,{data:d,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"revenue",children:d.map((f,b)=>e.jsx(Ot,{fill:au[b%au.length],strokeWidth:0},`cell-${b}`))}),e.jsx(_e,{formatter:f=>[o(f),"Revenue"],contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx($s,{verticalAlign:"bottom",height:36,iconType:"circle"})]})})})})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(F,{children:"Product Performance"}),e.jsx(X,{children:"Detailed performance metrics for all products"})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(ys,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(st,{type:"search",placeholder:"Search products...",className:"pl-9 bg-background/50 border-border/50 focus:bg-background transition-colors",value:t,onChange:f=>s(f.target.value)})]})]}),e.jsxs(S,{children:[(x=r==null?void 0:r.topProducts)!=null&&x.length?e.jsxs("div",{className:"mb-8 space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Top Performers"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.topProducts.slice(0,6).map((f,b)=>{var g,p;return e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-border/50 bg-secondary/20 p-4 hover:bg-secondary/40 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[e.jsx("div",{className:O("flex h-8 w-8 shrink-0 items-center justify-center rounded-full text-xs font-bold",b===0?"bg-yellow-500/20 text-yellow-600":b===1?"bg-slate-400/20 text-slate-600":b===2?"bg-orange-600/20 text-orange-700":"bg-primary/10 text-primary"),children:b+1}),e.jsxs("div",{className:"truncate",children:[e.jsx("p",{className:"font-medium truncate text-sm",title:f.name,children:f.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((p=(g=f.totalSold)==null?void 0:g.toLocaleString)==null?void 0:p.call(g))??f.sold??0," sold"]})]})]}),e.jsx("div",{className:"text-right shrink-0",children:e.jsx("p",{className:"font-semibold text-sm",children:o(f.totalRevenue??f.revenue??0)})})]},f.id??b)})})]}):null,e.jsx("div",{className:"rounded-xl border border-border/50 overflow-hidden",children:e.jsxs(Xs,{children:[e.jsx(Ys,{className:"bg-muted/50",children:e.jsxs(rt,{children:[e.jsx(we,{children:"Product"}),e.jsx(we,{children:"Units Sold"}),e.jsx(we,{children:"Revenue"}),e.jsx(we,{children:"Avg Price"}),e.jsx(we,{children:"Transactions"}),e.jsx(we,{children:"Performance"}),e.jsx(we,{children:"Market Share"})]})}),e.jsx(Js,{children:l.length>0?l.map(f=>{const b=f.totalSold/((r==null?void 0:r.totalSold)||1)*100;return e.jsxs(rt,{className:"hover:bg-muted/30 transition-colors",children:[e.jsx(ge,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:f.name}),e.jsxs("p",{className:"text-xs text-muted-foreground font-mono mt-0.5",children:["ID: ",f.id.substring(0,8),"..."]})]})}),e.jsx(ge,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"font-medium",children:f.totalSold.toLocaleString()})})}),e.jsx(ge,{children:e.jsx("p",{className:"font-medium text-foreground",children:o(f.totalRevenue)})}),e.jsx(ge,{children:e.jsx("p",{className:"text-muted-foreground",children:o(f.averagePrice)})}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:f.transactionCount}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"txns"})]})}),e.jsx(ge,{children:e.jsx(re,{variant:i(f.totalSold,(r==null?void 0:r.totalSold)||1),className:"capitalize",children:i(f.totalSold,(r==null?void 0:r.totalSold)||1)==="default"?"High":i(f.totalSold,(r==null?void 0:r.totalSold)||1)==="secondary"?"Medium":"Low"})}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{value:b,className:"w-[80px] h-2"}),e.jsxs("span",{className:"text-xs text-muted-foreground w-8 text-right",children:[b.toFixed(1),"%"]})]})})]},f.id)}):e.jsx(rt,{children:e.jsxs(ge,{colSpan:7,className:"h-24 text-center text-muted-foreground",children:['No products found matching "',t,'"']})})})]})})]})]})]})}const Zn=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"],QC=()=>{const t=yn(),{data:s,isLoading:r}=Ne({queryKey:["product-stock"],queryFn:ue.getProductStock}),{data:n}=Ne({queryKey:["stock-summary"],queryFn:ue.getStockSummary});Ne({queryKey:["stock-alerts"],queryFn:ue.getStockAlerts});const[a,o]=m.useState("stock"),[i,l]=m.useState("desc"),c=(s==null?void 0:s.products)||[];console.log("Stock data:",s),console.log("Summary data:",n),console.log("Products:",c);const d=m.useMemo(()=>{const p=[...c];return p.sort((y,v)=>{const j=a==="stock"?y.stockCount??0:y.terjual??0,w=a==="stock"?v.stockCount??0:v.terjual??0;return i==="asc"?j-w:w-j}),p},[c,a,i]),u=m.useMemo(()=>c.filter(p=>p.stockStatus==="low"||p.stockStatus==="out"),[c]),h=m.useMemo(()=>{const p={};c.forEach(v=>{const j=v.category||"Uncategorized";p[j]=(p[j]||0)+(v.stockCount||0)}),console.log("Category breakdown:",p);const y=Object.entries(p).map(([v,j])=>({name:v,value:j}));return console.log("Final pie data:",y),y},[c]),x=m.useMemo(()=>{const p=[...c].sort((y,v)=>(v.stockCount||0)-(y.stockCount||0)).slice(0,10).map(y=>({name:y.name.length>14?y.name.slice(0,14)+"":y.name,fullName:y.name,stock:y.stockCount||0}));return console.log("Top by stock:",p),p},[c]),f=m.useMemo(()=>{const p=[...c].sort((y,v)=>(v.terjual||0)-(y.terjual||0)).slice(0,10).map(y=>({name:y.name.length>14?y.name.slice(0,14)+"":y.name,fullName:y.name,sold:y.terjual||0}));return console.log("Top by sold:",p),p},[c]),b=p=>{a===p?l(i==="asc"?"desc":"asc"):(o(p),l("desc"))},g=p=>a!==p?null:i==="asc"?e.jsx(qu,{className:"h-4 w-4"}):e.jsx(Ja,{className:"h-4 w-4"});return r?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Memuat data stok..."})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Manajemen Produk"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Visualisasi dan pemantauan stok produk"})]}),e.jsx(Z,{variant:"secondary",onClick:()=>ue.exportStockCSV(),className:"bg-gray-800 border-gray-600 text-white hover:bg-gray-700",children:"Export CSV"})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Ringkasan Stok"}),e.jsx(X,{className:"text-gray-400",children:"Status stok saat ini"})]}),e.jsxs(S,{className:"space-y-2",children:[e.jsxs("p",{children:["Total Produk: ",e.jsx("span",{className:"font-medium",children:(n==null?void 0:n.totalProducts)??(s==null?void 0:s.totalProducts)??0})]}),e.jsxs("p",{children:["Total Item Stok: ",e.jsx("span",{className:"font-medium",children:(n==null?void 0:n.totalStockItems)??c.reduce((p,y)=>p+(y.stockCount||0),0)})]}),e.jsxs("p",{children:["Low Stock: ",e.jsx("span",{className:"font-medium",children:(n==null?void 0:n.lowStockProducts)??u.length})]}),e.jsxs("p",{children:["Out of Stock: ",e.jsx("span",{className:"font-medium",children:(n==null?void 0:n.outOfStockProducts)??c.filter(p=>p.stockStatus==="out").length})]})]})]}),e.jsxs(N,{className:"bg-gray-800 border-gray-700 md:col-span-2",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Distribusi Stok per Kategori"}),e.jsx(X,{className:"text-gray-400",children:"Total stok per kategori"})]}),e.jsx(S,{children:h.length>0?e.jsx("div",{className:"h-[280px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(js,{children:[e.jsx(ws,{data:h,cx:"50%",cy:"50%",outerRadius:90,dataKey:"value",label:({name:p,value:y,percent:v})=>`${p.substring(0,8)} ${(v*100).toFixed(0)}%`,children:h.map((p,y)=>e.jsx(Ot,{fill:Zn[y%Zn.length]},y))}),e.jsx(_e,{formatter:p=>[p.toLocaleString("id-ID"),"Stok"],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:8}})]})})}):e.jsx("div",{className:"h-[280px] flex items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Tidak ada data kategori"})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{className:"shadow-card border-0 bg-card/50 backdrop-blur-sm",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Top Produk Berdasarkan Stok"}),e.jsx(X,{children:"10 produk dengan stok tertinggi"})]}),e.jsx(S,{children:x.length>0?e.jsx("div",{className:"h-[280px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:x,layout:"vertical",children:[e.jsx(De,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(Oe,{type:"number"}),e.jsx(Me,{dataKey:"name",type:"category",width:120}),e.jsx(_e,{formatter:p=>[p.toLocaleString("id-ID"),"Stok"],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:8}}),e.jsx(dt,{dataKey:"stock",fill:Zn[1]})]})})}):e.jsx("div",{className:"h-[280px] flex items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Tidak ada data stok"})})})]}),e.jsxs(N,{className:"shadow-card border-0 bg-card/50 backdrop-blur-sm",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Top Produk Berdasarkan Terjual"}),e.jsx(X,{children:"10 produk dengan penjualan tertinggi"})]}),e.jsx(S,{children:f.length>0?e.jsx("div",{className:"h-[280px]",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:f,layout:"vertical",children:[e.jsx(De,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(Oe,{type:"number"}),e.jsx(Me,{dataKey:"name",type:"category",width:120}),e.jsx(_e,{formatter:p=>[p.toLocaleString("id-ID"),"Terjual"],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:8}}),e.jsx(dt,{dataKey:"sold",fill:Zn[2]})]})})}):e.jsx("div",{className:"h-[280px] flex items-center justify-center text-muted-foreground",children:e.jsx("p",{children:"Tidak ada data terjual"})})})]})]}),e.jsxs(N,{className:"shadow-card border-0 bg-card/50 backdrop-blur-sm",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Daftar Produk & Stok"}),e.jsx(X,{children:"Klik header Stok/Terjual untuk mengurutkan, klik detail untuk melihat stok dan riwayat"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-end gap-3",children:[e.jsxs(re,{variant:"secondary",children:[d.length," produk"]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Sort"}),e.jsxs("select",{className:"border rounded px-2 py-1 bg-background",value:a,onChange:p=>o(p.target.value),children:[e.jsx("option",{value:"stock",children:"Stok"}),e.jsx("option",{value:"sold",children:"Terjual"})]}),e.jsxs("select",{className:"border rounded px-2 py-1 bg-background",value:i,onChange:p=>l(p.target.value),children:[e.jsx("option",{value:"desc",children:"Tertinggi"}),e.jsx("option",{value:"asc",children:"Terendah"})]})]})]}),e.jsxs(Xs,{children:[e.jsx(Ys,{children:e.jsxs(rt,{children:[e.jsx(we,{children:"Produk"}),e.jsx(we,{className:"cursor-pointer hover:bg-accent/50 select-none",onClick:()=>b("stock"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Stok",g("stock")]})}),e.jsx(we,{children:"Status"}),e.jsx(we,{className:"cursor-pointer hover:bg-accent/50 select-none",onClick:()=>b("sold"),children:e.jsxs("div",{className:"flex items-center gap-2",children:["Terjual",g("sold")]})}),e.jsx(we,{children:"Kategori"}),e.jsx(we,{children:"Aksi"})]})}),e.jsx(Js,{children:d.map(p=>e.jsxs(rt,{className:"hover:bg-accent/50",children:[e.jsxs(ge,{children:[e.jsx("div",{className:"font-medium",children:p.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["ID: ",p.id]})]}),e.jsx(ge,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{value:Math.min(100,p.utilization??(p.stockCount>0?100:0)),className:"w-[120px]"}),e.jsx("span",{className:"text-sm",children:p.stockCount})]})}),e.jsx(ge,{children:e.jsx(re,{variant:p.stockStatus==="good"?"default":p.stockStatus==="medium"?"secondary":p.stockStatus==="low"?"outline":"destructive",children:p.stockStatus})}),e.jsx(ge,{children:p.terjual??"-"}),e.jsx(ge,{children:p.category??"Uncategorized"}),e.jsxs(ge,{className:"space-x-2",children:[e.jsx(Z,{size:"sm",variant:"outline",onClick:()=>t(`/products/${p.id}`),children:"Detail"}),e.jsx(Z,{size:"sm",onClick:()=>{window.scrollTo({top:0,behavior:"smooth"}),t(`/products/${p.id}`)},children:"Kelola"})]})]},p.id))})]})]})]})]})]})};var ZC="Label",Ep=m.forwardRef((t,s)=>e.jsx(oe.label,{...t,ref:s,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Ep.displayName=ZC;var Tp=Ep;const eR=kr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ee=m.forwardRef(({className:t,...s},r)=>e.jsx(Tp,{ref:r,className:O(eR(),t),...s}));Ee.displayName=Tp.displayName;const za=m.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:O("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...s}));za.displayName="Textarea";function ou({open:t,onOpenChange:s,mode:r,title:n,initialData:a,onSubmit:o,isLoading:i=!1}){const[l,c]=m.useState([{email:"",password:"",profile:"",pin:"",notes:""}]),[d,u]=m.useState("");m.useEffect(()=>{r==="edit"&&a?c([a]):r==="add"&&c([{email:"",password:"",profile:"",pin:"",notes:""}]),u("")},[r,a,t]);const h=()=>{c([...l,{email:"",password:"",profile:"",pin:"",notes:""}])},x=g=>{l.length>1&&c(l.filter((p,y)=>y!==g))},f=(g,p,y)=>{const v=l.map((j,w)=>w===g?{...j,[p]:y}:j);c(v)},b=async g=>{g.preventDefault();try{r==="add"?await o({stockItems:l,notes:d}):await o({stockItem:l[0],notes:d}),s(!1)}catch(p){console.error("Failed to submit stock data:",p)}};return e.jsx(mc,{open:t,onOpenChange:s,children:e.jsxs(_o,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ao,{children:[e.jsx(Eo,{children:n}),e.jsx(To,{children:r==="add"?"Add new stock items to this product. Email and password are required fields.":"Edit the stock item details. Email and password are required fields."})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",autoComplete:"off",children:[l.map((g,p)=>e.jsxs("div",{className:"space-y-3 p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ee,{className:"text-sm font-medium",children:["Stock Item ",p+1]}),r==="add"&&l.length>1&&e.jsx(Z,{type:"button",variant:"ghost",size:"sm",onClick:()=>x(p),className:"text-red-500 hover:text-red-700",children:e.jsx(Ra,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:`email-${p}`,children:"Email *"}),e.jsx(st,{id:`email-${p}`,type:"email",value:g.email,onChange:y=>f(p,"email",y.target.value),placeholder:"user@example.com",required:!0,autoComplete:"off","data-form-type":"other","data-lpignore":"true"})]}),e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:`password-${p}`,children:"Password *"}),e.jsx(st,{id:`password-${p}`,type:"text",value:g.password,onChange:y=>f(p,"password",y.target.value),placeholder:"password123",required:!0,autoComplete:"off","data-form-type":"other","data-lpignore":"true"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:`profile-${p}`,children:"Profile"}),e.jsx(st,{id:`profile-${p}`,value:g.profile||"",onChange:y=>f(p,"profile",y.target.value),placeholder:"profile1",autoComplete:"off","data-form-type":"other","data-lpignore":"true"})]}),e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:`pin-${p}`,children:"PIN"}),e.jsx(st,{id:`pin-${p}`,value:g.pin||"",onChange:y=>f(p,"pin",y.target.value),placeholder:"1234",autoComplete:"off","data-form-type":"other","data-lpignore":"true"})]})]}),e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:`notes-${p}`,children:"Notes"}),e.jsx(za,{id:`notes-${p}`,value:g.notes||"",onChange:y=>f(p,"notes",y.target.value),placeholder:"Optional notes for this stock item",rows:2,autoComplete:"off","data-form-type":"other","data-lpignore":"true"})]})]},p)),r==="add"&&e.jsxs(Z,{type:"button",variant:"outline",onClick:h,className:"w-full",children:[e.jsx(cn,{className:"h-4 w-4 mr-2"}),"Add Another Stock Item"]}),e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:"global-notes",children:"Global Notes"}),e.jsx(za,{id:"global-notes",value:d,onChange:g=>u(g.target.value),placeholder:"Notes for this operation",rows:2,autoComplete:"off","data-form-type":"other","data-lpignore":"true"})]}),e.jsxs(hc,{children:[e.jsx(Z,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:i,children:"Cancel"}),e.jsx(Z,{type:"submit",disabled:i,children:i?"Processing...":r==="add"?"Add Stock":"Update Stock"})]})]})]})})}var bc="Radio",[tR,Pp]=at(bc),[sR,rR]=tR(bc),Ip=m.forwardRef((t,s)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:o,disabled:i,value:l="on",onCheck:c,form:d,...u}=t,[h,x]=m.useState(null),f=Ce(s,p=>x(p)),b=m.useRef(!1),g=h?d||!!h.closest("form"):!0;return e.jsxs(sR,{scope:r,checked:a,disabled:i,children:[e.jsx(oe.button,{type:"button",role:"radio","aria-checked":a,"data-state":Lp(a),"data-disabled":i?"":void 0,disabled:i,value:l,...u,ref:f,onClick:J(t.onClick,p=>{a||c==null||c(),g&&(b.current=p.isPropagationStopped(),b.current||p.stopPropagation())})}),g&&e.jsx(Mp,{control:h,bubbles:!b.current,name:n,value:l,checked:a,required:o,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});Ip.displayName=bc;var Dp="RadioIndicator",Op=m.forwardRef((t,s)=>{const{__scopeRadio:r,forceMount:n,...a}=t,o=rR(Dp,r);return e.jsx(Rt,{present:n||o.checked,children:e.jsx(oe.span,{"data-state":Lp(o.checked),"data-disabled":o.disabled?"":void 0,...a,ref:s})})});Op.displayName=Dp;var nR="RadioBubbleInput",Mp=m.forwardRef(({__scopeRadio:t,control:s,checked:r,bubbles:n=!0,...a},o)=>{const i=m.useRef(null),l=Ce(i,o),c=fc(r),d=Dl(s);return m.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&f){const b=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(b)}},[c,r,n]),e.jsx(oe.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Mp.displayName=nR;function Lp(t){return t?"checked":"unchecked"}var aR=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Oo="RadioGroup",[oR,uA]=at(Oo,[Er,Pp]),Fp=Er(),$p=Pp(),[iR,lR]=oR(Oo),Bp=m.forwardRef((t,s)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:o,required:i=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...x}=t,f=Fp(r),b=An(d),[g,p]=Xt({prop:o,defaultProp:a??null,onChange:h,caller:Oo});return e.jsx(iR,{scope:r,name:n,required:i,disabled:l,value:g,onValueChange:p,children:e.jsx(Jl,{asChild:!0,...f,orientation:c,dir:b,loop:u,children:e.jsx(oe.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:b,...x,ref:s})})})});Bp.displayName=Oo;var Up="RadioGroupItem",zp=m.forwardRef((t,s)=>{const{__scopeRadioGroup:r,disabled:n,...a}=t,o=lR(Up,r),i=o.disabled||n,l=Fp(r),c=$p(r),d=m.useRef(null),u=Ce(s,d),h=o.value===a.value,x=m.useRef(!1);return m.useEffect(()=>{const f=g=>{aR.includes(g.key)&&(x.current=!0)},b=()=>x.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",b)}},[]),e.jsx(Ql,{asChild:!0,...l,focusable:!i,active:h,children:e.jsx(Ip,{disabled:i,required:o.required,checked:h,...c,...a,name:o.name,ref:u,onCheck:()=>o.onValueChange(a.value),onKeyDown:J(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:J(a.onFocus,()=>{var f;x.current&&((f=d.current)==null||f.click())})})})});zp.displayName=Up;var cR="RadioGroupIndicator",Wp=m.forwardRef((t,s)=>{const{__scopeRadioGroup:r,...n}=t,a=$p(r);return e.jsx(Op,{...a,...n,ref:s})});Wp.displayName=cR;var Hp=Bp,qp=zp,dR=Wp;const Kp=m.forwardRef(({className:t,...s},r)=>e.jsx(Hp,{className:O("grid gap-2",t),...s,ref:r}));Kp.displayName=Hp.displayName;const Wr=m.forwardRef(({className:t,...s},r)=>e.jsx(qp,{ref:r,className:O("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(dR,{className:"flex items-center justify-center",children:e.jsx(Uu,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Wr.displayName=qp.displayName;function uR({open:t,onOpenChange:s,onSubmit:r,isLoading:n=!1,totalStockCount:a}){const[o,i]=m.useState("first"),[l,c]=m.useState(""),[d,u]=m.useState(""),h=async f=>{f.preventDefault();try{const b={deleteType:o,notes:d.trim()||void 0};if(o==="indexes"){const g=l.split(",").map(p=>parseInt(p.trim())).filter(p=>!isNaN(p)&&p>=0&&p<a);if(g.length===0){alert("Please enter valid stock indexes (0 to "+(a-1)+")");return}b.stockIndexes=g}await r(b),s(!1),i("first"),c(""),u("")}catch(b){console.error("Failed to delete stock:",b)}},x=()=>{switch(o){case"indexes":return"Delete specific stock items by their index numbers (0-based, comma separated)";case"first":return"Delete the first stock item";case"last":return"Delete the last stock item";case"all":return"Delete ALL stock items - this action cannot be undone!";default:return""}};return e.jsx(mc,{open:t,onOpenChange:s,children:e.jsxs(_o,{className:"max-w-md",children:[e.jsxs(Ao,{children:[e.jsxs(Eo,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-5 w-5 text-red-500"}),"Delete Stock Items"]}),e.jsx(To,{children:"Choose how you want to delete stock items. This action cannot be undone."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ee,{children:"Delete Type"}),e.jsxs(Kp,{value:o,onValueChange:f=>i(f),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wr,{value:"first",id:"first"}),e.jsx(Ee,{htmlFor:"first",children:"First item"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wr,{value:"last",id:"last"}),e.jsx(Ee,{htmlFor:"last",children:"Last item"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wr,{value:"indexes",id:"indexes"}),e.jsx(Ee,{htmlFor:"indexes",children:"Specific indexes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Wr,{value:"all",id:"all"}),e.jsx(Ee,{htmlFor:"all",className:"text-red-600 font-medium",children:"All items"})]})]})]}),o==="indexes"&&e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:"indexes-input",children:"Stock Indexes (comma separated)"}),e.jsx(st,{id:"indexes-input",value:l,onChange:f=>c(f.target.value),placeholder:"0, 2, 4",required:!0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Valid range: 0 to ",a-1]})]}),e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:x()})}),e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:"delete-notes",children:"Notes"}),e.jsx(za,{id:"delete-notes",value:d,onChange:f=>u(f.target.value),placeholder:"Optional reason for deletion",rows:2})]}),e.jsxs(hc,{children:[e.jsx(Z,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:n,children:"Cancel"}),e.jsx(Z,{type:"submit",variant:o==="all"?"destructive":"default",disabled:n,children:n?"Deleting...":`Delete ${o==="all"?"All":"Selected"}`})]})]})]})})}function mR(){var B,q,I,te,W,z,K;const{productId:t}=xl(),s=yn(),r=Db(),{toast:n}=Sn(),[a,o]=m.useState(!1),[i,l]=m.useState(!1),[c,d]=m.useState(!1),[u,h]=m.useState(null),{data:x,isLoading:f,error:b}=Ne({queryKey:["product-details",t],queryFn:()=>ue.getProductStockDetails(t),enabled:!!t}),g=((B=x==null?void 0:x.stock)==null?void 0:B.items)||[],p=((q=x==null?void 0:x.stock)==null?void 0:q.count)||0,y=zn({mutationFn:$=>{const D=(($==null?void 0:$.stockItems)??[]).map(Q=>{const ee=U=>(U??"").toString().trim().replace(/\|/g,"/"),T=ee(Q.email),Y=ee(Q.password),se=ee(Q.profile),H=ee(Q.pin),ne=ee(Q.notes);if(!T||!Y)throw new Error("Email and password are required");return[T,Y,se,H,ne].join("|")}),A=(($==null?void 0:$.notes)??"").toString();return ue.updateProductStock(t,{action:"add",stockItems:D,notes:A})},onSuccess:$=>{n({title:"Stock Added Successfully",description:`New stock count: ${$.newStockCount}`}),r.invalidateQueries({queryKey:["product-details",t]})},onError:$=>{n({title:"Failed to Add Stock",description:$.message||"An error occurred while adding stock",variant:"destructive"})}}),v=zn({mutationFn:({index:$,data:D})=>{const A=(D==null?void 0:D.stockItem)??D,Q=((A==null?void 0:A.email)??"").trim(),ee=((A==null?void 0:A.password)??"").trim(),T=((A==null?void 0:A.profile)??"").toString(),Y=((A==null?void 0:A.pin)??"").toString(),se=((A==null?void 0:A.notes)??"").toString();if(!Q||!ee)return Promise.reject(new Error("Email and password are required"));const H=U=>U.replace(/\|/g,"/"),ne=[Q,ee,T,Y,se].map(H).join("|");return ue.editStockItem(t,{index:$,value:ne})},onSuccess:()=>{n({title:"Stock Updated Successfully",description:"Stock item has been updated"}),r.invalidateQueries({queryKey:["product-details",t]})},onError:$=>{n({title:"Failed to Update Stock",description:$.message||"An error occurred while updating stock",variant:"destructive"})}}),j=zn({mutationFn:$=>ue.deleteStockItem(t,{index:$}),onSuccess:()=>{n({title:"Stock Deleted Successfully",description:"Stock item has been deleted"}),r.invalidateQueries({queryKey:["product-details",t]})},onError:$=>{n({title:"Failed to Delete Stock",description:$.message||"An error occurred while deleting stock",variant:"destructive"})}}),w=zn({mutationFn:$=>ue.deleteMultipleStock(t,$),onSuccess:$=>{n({title:"Stock Deleted Successfully",description:`Deleted ${$.deletedItemsCount||1} stock items from ${$.productName}`}),r.invalidateQueries({queryKey:["product-details",t]})},onError:$=>{n({title:"Failed to Delete Stock",description:$.message||"An error occurred while deleting stock",variant:"destructive"})}}),k=async $=>{try{await y.mutateAsync($)}catch(D){console.error("Add stock failed:",D)}},R=$=>{var A,Q;const D=(Q=(A=x==null?void 0:x.stock)==null?void 0:A.items)==null?void 0:Q[$];D!=null&&D.parsed&&(h({index:$,data:{email:D.parsed.email||"",password:D.parsed.password||"",profile:D.parsed.profile||"",pin:D.parsed.pin||"",notes:D.parsed.notes||""}}),l(!0))},C=async $=>{if(u)try{await v.mutateAsync({index:u.index,data:$}),h(null)}catch(D){console.error("Update stock failed:",D)}},E=async $=>{if(confirm("Are you sure you want to delete this stock item?"))try{await j.mutateAsync($)}catch(D){console.error("Delete stock failed:",D)}},M=async $=>{try{await w.mutateAsync($)}catch(D){console.error("Bulk delete failed:",D)}};return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading product details..."})]})}):b||!x?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-destructive/5 rounded-2xl border border-destructive/20",children:[e.jsx("h3",{className:"text-lg font-bold text-destructive mb-2",children:"Error loading product details"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Product ID: ",t,e.jsx("br",{}),"Error: ",(b==null?void 0:b.message)||"Product not found"]}),e.jsx(Z,{onClick:()=>s("/products"),variant:"outline",children:"Back to Products"})]})}):e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[e.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>s("/products"),className:"h-auto p-0 hover:bg-transparent hover:text-primary",children:[e.jsx(Ca,{className:"h-4 w-4 mr-1"}),"Products"]}),e.jsx("span",{children:"/"}),e.jsx("span",{children:"Details"})]}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:x.productName}),e.jsx("p",{className:"text-muted-foreground mt-1",children:x.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(re,{variant:"outline",className:"bg-background/50 backdrop-blur-sm px-3 py-1 text-sm font-medium",children:[e.jsx(Yb,{className:"h-3.5 w-3.5 mr-1.5 text-primary"}),x.category]}),e.jsxs(re,{variant:((I=x.stock)==null?void 0:I.status)==="good"?"default":"destructive",className:O("px-3 py-1 text-sm font-medium",((te=x.stock)==null?void 0:te.status)==="good"?"bg-emerald-500/10 text-emerald-600 hover:bg-emerald-500/20 border-emerald-500/20":"bg-red-500/10 text-red-600 hover:bg-red-500/20 border-red-500/20"),children:[((W=x.stock)==null?void 0:W.status)==="good"?e.jsx(Ku,{className:"h-3.5 w-3.5 mr-1.5"}):e.jsx(dn,{className:"h-3.5 w-3.5 mr-1.5"}),((z=x.stock)==null?void 0:z.status)==="good"?"In Stock":"Low Stock"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{className:"pb-2",children:e.jsx(F,{className:"text-sm font-medium text-muted-foreground",children:"Total Sales"})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:((K=x.sales)==null?void 0:K.total)||0}),e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(Qa,{className:"h-5 w-5 text-blue-500"})})]})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{className:"pb-2",children:e.jsx(F,{className:"text-sm font-medium text-muted-foreground",children:"Available Stock"})}),e.jsx(S,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:p}),e.jsx("div",{className:O("p-2 rounded-lg",p>0?"bg-emerald-500/10":"bg-red-500/10"),children:e.jsx(Ns,{className:O("h-5 w-5",p>0?"text-emerald-500":"text-red-500")})})]})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{className:"pb-2",children:e.jsx(F,{className:"text-sm font-medium text-muted-foreground",children:"Pricing Tiers"})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-1.5",children:x.prices&&Object.entries(x.prices).map(([$,D])=>e.jsxs("div",{className:"flex justify-between text-sm items-center",children:[e.jsx("span",{className:"capitalize text-muted-foreground",children:$}),e.jsxs("span",{className:"font-medium text-foreground",children:["Rp ",Number(D).toLocaleString()]})]},$))})})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{className:"border-b border-border/50 bg-muted/30",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Jb,{className:"h-5 w-5 text-primary"}),"Stock Management"]}),e.jsxs(X,{className:"mt-1",children:["Manage inventory items for this product. Total: ",p," items"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Z,{onClick:()=>o(!0),size:"sm",className:"bg-primary hover:bg-primary/90 shadow-lg shadow-primary/20",children:[e.jsx(cn,{className:"h-4 w-4 mr-2"}),"Add Stock"]}),p>0&&e.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>d(!0),className:"text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/20",children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Bulk Delete"]})]})]})}),e.jsx(S,{className:"p-0",children:p===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ns,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium text-foreground mb-1",children:"No stock items available"}),e.jsx("p",{className:"text-muted-foreground mb-6 max-w-sm mx-auto",children:"This product currently has no inventory. Add stock items to make it available for purchase."}),e.jsxs(Z,{onClick:()=>o(!0),children:[e.jsx(cn,{className:"h-4 w-4 mr-2"}),"Add First Stock Item"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Xs,{children:[e.jsx(Ys,{className:"bg-muted/50",children:e.jsxs(rt,{className:"hover:bg-transparent border-border/50",children:[e.jsx(we,{className:"w-[80px]",children:"Index"}),e.jsx(we,{children:"Email / Account"}),e.jsx(we,{children:"Password / Key"}),e.jsx(we,{children:"Profile"}),e.jsx(we,{children:"PIN"}),e.jsx(we,{children:"Notes"}),e.jsx(we,{className:"w-[80px] text-right",children:"Actions"})]})}),e.jsx(Js,{children:g.map(($,D)=>{var A,Q,ee,T,Y;return e.jsxs(rt,{className:"hover:bg-muted/30 border-border/50 transition-colors",children:[e.jsx(ge,{children:e.jsxs("code",{className:"text-xs bg-muted px-1.5 py-0.5 rounded text-muted-foreground border border-border",children:["#",D]})}),e.jsx(ge,{className:"font-medium",children:((A=$.parsed)==null?void 0:A.email)||"-"}),e.jsx(ge,{children:e.jsx("code",{className:"text-xs bg-muted/50 px-1.5 py-0.5 rounded text-muted-foreground font-mono",children:((Q=$.parsed)==null?void 0:Q.password)||"-"})}),e.jsx(ge,{className:"text-muted-foreground text-sm",children:((ee=$.parsed)==null?void 0:ee.profile)||"-"}),e.jsx(ge,{className:"text-muted-foreground text-sm",children:((T=$.parsed)==null?void 0:T.pin)||"-"}),e.jsx(ge,{className:"max-w-[200px] truncate text-muted-foreground text-sm",children:((Y=$.parsed)==null?void 0:Y.notes)||"-"}),e.jsx(ge,{className:"text-right",children:e.jsxs(tx,{children:[e.jsx(sx,{asChild:!0,children:e.jsx(Z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-primary",children:e.jsx(vl,{className:"h-4 w-4"})})}),e.jsxs(oc,{align:"end",className:"w-40",children:[e.jsxs(gr,{onClick:()=>R(D),children:[e.jsx(Qb,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(gr,{onClick:()=>E(D),className:"text-destructive focus:text-destructive focus:bg-destructive/10",children:[e.jsx(Ra,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},D)})})]})})})]}),e.jsx(ou,{open:a,onOpenChange:o,mode:"add",title:"Add Stock Items",onSubmit:k,isLoading:y.isPending}),e.jsx(ou,{open:i,onOpenChange:l,mode:"edit",title:"Edit Stock Item",initialData:u==null?void 0:u.data,onSubmit:C,isLoading:v.isPending}),e.jsx(uR,{open:c,onOpenChange:d,totalStockCount:p,onSubmit:M,isLoading:w.isPending})]})}function xe(t,s,r,n,a){if(typeof s=="function"?t!==s||!a:!s.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s.set(t,r),r}function _(t,s,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?t!==s||!n:!s.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:s.get(t)}let Vp=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return Vp=t.randomUUID.bind(t),t.randomUUID();const s=new Uint8Array(1),r=t?()=>t.getRandomValues(s)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^r()&15>>+n/4).toString(16))};function sl(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const rl=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const s=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(s.stack=t.stack),t.cause&&!s.cause&&(s.cause=t.cause),t.name&&(s.name=t.name),s}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class he extends Error{}class Ye extends he{constructor(s,r,n,a){super(`${Ye.makeMessage(s,r,n)}`),this.status=s,this.headers=a,this.requestID=a==null?void 0:a.get("x-request-id"),this.error=r;const o=r;this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(s,r,n){const a=r!=null&&r.message?typeof r.message=="string"?r.message:JSON.stringify(r.message):r?JSON.stringify(r):n;return s&&a?`${s} ${a}`:s?`${s} status code (no body)`:a||"(no status code or body)"}static generate(s,r,n,a){if(!s||!a)return new Mo({message:n,cause:rl(r)});const o=r==null?void 0:r.error;return s===400?new Gp(s,o,n,a):s===401?new Xp(s,o,n,a):s===403?new Yp(s,o,n,a):s===404?new Jp(s,o,n,a):s===409?new Qp(s,o,n,a):s===422?new Zp(s,o,n,a):s===429?new eg(s,o,n,a):s>=500?new tg(s,o,n,a):new Ye(s,o,n,a)}}class St extends Ye{constructor({message:s}={}){super(void 0,void 0,s||"Request was aborted.",void 0)}}class Mo extends Ye{constructor({message:s,cause:r}){super(void 0,void 0,s||"Connection error.",void 0),r&&(this.cause=r)}}class vc extends Mo{constructor({message:s}={}){super({message:s??"Request timed out."})}}class Gp extends Ye{}class Xp extends Ye{}class Yp extends Ye{}class Jp extends Ye{}class Qp extends Ye{}class Zp extends Ye{}class eg extends Ye{}class tg extends Ye{}class sg extends he{constructor(){super("Could not parse response content as the length limit was reached")}}class rg extends he{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Hr extends Error{constructor(s){super(s)}}const hR=/^[a-z][a-z0-9+.-]*:/i,fR=t=>hR.test(t);let ct=t=>(ct=Array.isArray,ct(t)),iu=ct;function ng(t){return typeof t!="object"?{}:t??{}}function xR(t){if(!t)return!0;for(const s in t)return!1;return!0}function pR(t,s){return Object.prototype.hasOwnProperty.call(t,s)}function ui(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const gR=(t,s)=>{if(typeof s!="number"||!Number.isInteger(s))throw new he(`${t} must be an integer`);if(s<0)throw new he(`${t} must be a positive integer`);return s},bR=t=>{try{return JSON.parse(t)}catch{return}},Ln=t=>new Promise(s=>setTimeout(s,t)),lr="5.15.0",vR=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function yR(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const jR=()=>{var r;const t=yR();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lr,"X-Stainless-OS":cu(Deno.build.os),"X-Stainless-Arch":lu(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((r=Deno.version)==null?void 0:r.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lr,"X-Stainless-OS":cu(globalThis.process.platform??"unknown"),"X-Stainless-Arch":lu(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const s=wR();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":lr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function wR(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:s,pattern:r}of t){const n=r.exec(navigator.userAgent);if(n){const a=n[1]||0,o=n[2]||0,i=n[3]||0;return{browser:s,version:`${a}.${o}.${i}`}}}return null}const lu=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",cu=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let du;const NR=()=>du??(du=jR());function SR(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ag(...t){const s=globalThis.ReadableStream;if(typeof s>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new s(...t)}function og(t){let s=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return ag({start(){},async pull(r){const{done:n,value:a}=await s.next();n?r.close():r.enqueue(a)},async cancel(){var r;await((r=s.return)==null?void 0:r.call(s))}})}function ig(t){if(t[Symbol.asyncIterator])return t;const s=t.getReader();return{async next(){try{const r=await s.read();return r!=null&&r.done&&s.releaseLock(),r}catch(r){throw s.releaseLock(),r}},async return(){const r=s.cancel();return s.releaseLock(),await r,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function kR(t){var n,a;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((a=(n=t[Symbol.asyncIterator]()).return)==null?void 0:a.call(n));return}const s=t.getReader(),r=s.cancel();s.releaseLock(),await r}const CR=({headers:t,body:s})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(s)}),lg="RFC3986",cg=t=>String(t),uu={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:cg},RR="RFC1738";let nl=(t,s)=>(nl=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),nl(t,s));const zt=(()=>{const t=[];for(let s=0;s<256;++s)t.push("%"+((s<16?"0":"")+s.toString(16)).toUpperCase());return t})(),mi=1024,_R=(t,s,r,n,a)=>{if(t.length===0)return t;let o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});let i="";for(let l=0;l<o.length;l+=mi){const c=o.length>=mi?o.slice(l,l+mi):o,d=[];for(let u=0;u<c.length;++u){let h=c.charCodeAt(u);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||a===RR&&(h===40||h===41)){d[d.length]=c.charAt(u);continue}if(h<128){d[d.length]=zt[h];continue}if(h<2048){d[d.length]=zt[192|h>>6]+zt[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=zt[224|h>>12]+zt[128|h>>6&63]+zt[128|h&63];continue}u+=1,h=65536+((h&1023)<<10|c.charCodeAt(u)&1023),d[d.length]=zt[240|h>>18]+zt[128|h>>12&63]+zt[128|h>>6&63]+zt[128|h&63]}i+=d.join("")}return i};function AR(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function mu(t,s){if(ct(t)){const r=[];for(let n=0;n<t.length;n+=1)r.push(s(t[n]));return r}return s(t)}const dg={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,s){return String(t)+"["+s+"]"},repeat(t){return String(t)}},ug=function(t,s){Array.prototype.push.apply(t,ct(s)?s:[s])};let hu;const He={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:_R,encodeValuesOnly:!1,format:lg,formatter:cg,indices:!1,serializeDate(t){return(hu??(hu=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function ER(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const hi={};function mg(t,s,r,n,a,o,i,l,c,d,u,h,x,f,b,g,p,y){let v=t,j=y,w=0,k=!1;for(;(j=j.get(hi))!==void 0&&!k;){const B=j.get(t);if(w+=1,typeof B<"u"){if(B===w)throw new RangeError("Cyclic object value");k=!0}typeof j.get(hi)>"u"&&(w=0)}if(typeof d=="function"?v=d(s,v):v instanceof Date?v=x==null?void 0:x(v):r==="comma"&&ct(v)&&(v=mu(v,function(B){return B instanceof Date?x==null?void 0:x(B):B})),v===null){if(o)return c&&!g?c(s,He.encoder,p,"key",f):s;v=""}if(ER(v)||AR(v)){if(c){const B=g?s:c(s,He.encoder,p,"key",f);return[(b==null?void 0:b(B))+"="+(b==null?void 0:b(c(v,He.encoder,p,"value",f)))]}return[(b==null?void 0:b(s))+"="+(b==null?void 0:b(String(v)))]}const R=[];if(typeof v>"u")return R;let C;if(r==="comma"&&ct(v))g&&c&&(v=mu(v,c)),C=[{value:v.length>0?v.join(",")||null:void 0}];else if(ct(d))C=d;else{const B=Object.keys(v);C=u?B.sort(u):B}const E=l?String(s).replace(/\./g,"%2E"):String(s),M=n&&ct(v)&&v.length===1?E+"[]":E;if(a&&ct(v)&&v.length===0)return M+"[]";for(let B=0;B<C.length;++B){const q=C[B],I=typeof q=="object"&&typeof q.value<"u"?q.value:v[q];if(i&&I===null)continue;const te=h&&l?q.replace(/\./g,"%2E"):q,W=ct(v)?typeof r=="function"?r(M,te):M:M+(h?"."+te:"["+te+"]");y.set(t,w);const z=new WeakMap;z.set(hi,y),ug(R,mg(I,W,r,n,a,o,i,l,r==="comma"&&g&&ct(v)?null:c,d,u,h,x,f,b,g,p,z))}return R}function TR(t=He){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const s=t.charset||He.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=lg;if(typeof t.format<"u"){if(!nl(uu,t.format))throw new TypeError("Unknown format option provided.");r=t.format}const n=uu[r];let a=He.filter;(typeof t.filter=="function"||ct(t.filter))&&(a=t.filter);let o;if(t.arrayFormat&&t.arrayFormat in dg?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=He.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const i=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:He.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:He.addQueryPrefix,allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:He.allowEmptyArrays,arrayFormat:o,charset:s,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:He.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?He.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:He.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:He.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:He.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:He.encodeValuesOnly,filter:a,format:r,formatter:n,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:He.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:He.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:He.strictNullHandling}}function PR(t,s={}){let r=t;const n=TR(s);let a,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):ct(n.filter)&&(o=n.filter,a=o);const i=[];if(typeof r!="object"||r===null)return"";const l=dg[n.arrayFormat],c=l==="comma"&&n.commaRoundTrip;a||(a=Object.keys(r)),n.sort&&a.sort(n.sort);const d=new WeakMap;for(let x=0;x<a.length;++x){const f=a[x];n.skipNulls&&r[f]===null||ug(i,mg(r[f],f,l,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,d))}const u=i.join(n.delimiter);let h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),u.length>0?h+u:""}function IR(t){let s=0;for(const a of t)s+=a.length;const r=new Uint8Array(s);let n=0;for(const a of t)r.set(a,n),n+=a.length;return r}let fu;function yc(t){let s;return(fu??(s=new globalThis.TextEncoder,fu=s.encode.bind(s)))(t)}let xu;function pu(t){let s;return(xu??(s=new globalThis.TextDecoder,xu=s.decode.bind(s)))(t)}var xt,pt;class Lo{constructor(){xt.set(this,void 0),pt.set(this,void 0),xe(this,xt,new Uint8Array),xe(this,pt,null)}decode(s){if(s==null)return[];const r=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?yc(s):s;xe(this,xt,IR([_(this,xt,"f"),r]));const n=[];let a;for(;(a=DR(_(this,xt,"f"),_(this,pt,"f")))!=null;){if(a.carriage&&_(this,pt,"f")==null){xe(this,pt,a.index);continue}if(_(this,pt,"f")!=null&&(a.index!==_(this,pt,"f")+1||a.carriage)){n.push(pu(_(this,xt,"f").subarray(0,_(this,pt,"f")-1))),xe(this,xt,_(this,xt,"f").subarray(_(this,pt,"f"))),xe(this,pt,null);continue}const o=_(this,pt,"f")!==null?a.preceding-1:a.preceding,i=pu(_(this,xt,"f").subarray(0,o));n.push(i),xe(this,xt,_(this,xt,"f").subarray(a.index)),xe(this,pt,null)}return n}flush(){return _(this,xt,"f").length?this.decode(`
`):[]}}xt=new WeakMap,pt=new WeakMap;Lo.NEWLINE_CHARS=new Set([`
`,"\r"]);Lo.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function DR(t,s){for(let a=s??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function OR(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}const Wa={off:0,error:200,warn:300,info:400,debug:500},gu=(t,s,r)=>{if(t){if(pR(Wa,t))return t;Ge(r).warn(`${s} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Wa))}`)}};function qr(){}function ea(t,s,r){return!s||Wa[t]>Wa[r]?qr:s[t].bind(s)}const MR={error:qr,warn:qr,info:qr,debug:qr};let bu=new WeakMap;function Ge(t){const s=t.logger,r=t.logLevel??"off";if(!s)return MR;const n=bu.get(s);if(n&&n[0]===r)return n[1];const a={error:ea("error",s,r),warn:ea("warn",s,r),info:ea("info",s,r),debug:ea("debug",s,r)};return bu.set(s,[r,a]),a}const Is=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([s,r])=>[s,s.toLowerCase()==="authorization"||s.toLowerCase()==="cookie"||s.toLowerCase()==="set-cookie"?"***":r]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Br;class Vt{constructor(s,r,n){this.iterator=s,Br.set(this,void 0),this.controller=r,xe(this,Br,n)}static fromSSEResponse(s,r,n){let a=!1;const o=n?Ge(n):console;async function*i(){if(a)throw new he("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let l=!1;try{for await(const c of LR(s,r))if(!l){if(c.data.startsWith("[DONE]")){l=!0;continue}if(c.event===null||!c.event.startsWith("thread.")){let d;try{d=JSON.parse(c.data)}catch(u){throw o.error("Could not parse message into JSON:",c.data),o.error("From chunk:",c.raw),u}if(d&&d.error)throw new Ye(void 0,d.error,void 0,s.headers);yield d}else{let d;try{d=JSON.parse(c.data)}catch(u){throw console.error("Could not parse message into JSON:",c.data),console.error("From chunk:",c.raw),u}if(c.event=="error")throw new Ye(void 0,d.error,d.message,void 0);yield{event:c.event,data:d}}}l=!0}catch(c){if(sl(c))return;throw c}finally{l||r.abort()}}return new Vt(i,r,n)}static fromReadableStream(s,r,n){let a=!1;async function*o(){const l=new Lo,c=ig(s);for await(const d of c)for(const u of l.decode(d))yield u;for(const d of l.flush())yield d}async function*i(){if(a)throw new he("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let l=!1;try{for await(const c of o())l||c&&(yield JSON.parse(c));l=!0}catch(c){if(sl(c))return;throw c}finally{l||r.abort()}}return new Vt(i,r,n)}[(Br=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const s=[],r=[],n=this.iterator(),a=o=>({next:()=>{if(o.length===0){const i=n.next();s.push(i),r.push(i)}return o.shift()}});return[new Vt(()=>a(s),this.controller,_(this,Br,"f")),new Vt(()=>a(r),this.controller,_(this,Br,"f"))]}toReadableStream(){const s=this;let r;return ag({async start(){r=s[Symbol.asyncIterator]()},async pull(n){try{const{value:a,done:o}=await r.next();if(o)return n.close();const i=yc(JSON.stringify(a)+`
`);n.enqueue(i)}catch(a){n.error(a)}},async cancel(){var n;await((n=r.return)==null?void 0:n.call(r))}})}}async function*LR(t,s){if(!t.body)throw s.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new he("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new he("Attempted to iterate over a response with no body");const r=new $R,n=new Lo,a=ig(t.body);for await(const o of FR(a))for(const i of n.decode(o)){const l=r.decode(i);l&&(yield l)}for(const o of n.flush()){const i=r.decode(o);i&&(yield i)}}async function*FR(t){let s=new Uint8Array;for await(const r of t){if(r==null)continue;const n=r instanceof ArrayBuffer?new Uint8Array(r):typeof r=="string"?yc(r):r;let a=new Uint8Array(s.length+n.length);a.set(s),a.set(n,s.length),s=a;let o;for(;(o=OR(s))!==-1;)yield s.slice(0,o),s=s.slice(o)}s.length>0&&(yield s)}class $R{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(s){if(s.endsWith("\r")&&(s=s.substring(0,s.length-1)),!s){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(s),s.startsWith(":"))return null;let[r,n,a]=BR(s,":");return a.startsWith(" ")&&(a=a.substring(1)),r==="event"?this.event=a:r==="data"&&this.data.push(a),null}}function BR(t,s){const r=t.indexOf(s);return r!==-1?[t.substring(0,r),s,t.substring(r+s.length)]:[t,"",""]}async function hg(t,s){const{response:r,requestLogID:n,retryOfRequestLogID:a,startTime:o}=s,i=await(async()=>{var h;if(s.options.stream)return Ge(t).debug("response",r.status,r.url,r.headers,r.body),s.options.__streamClass?s.options.__streamClass.fromSSEResponse(r,s.controller,t):Vt.fromSSEResponse(r,s.controller,t);if(r.status===204)return null;if(s.options.__binaryResponse)return r;const l=r.headers.get("content-type"),c=(h=l==null?void 0:l.split(";")[0])==null?void 0:h.trim();if((c==null?void 0:c.includes("application/json"))||(c==null?void 0:c.endsWith("+json"))){const x=await r.json();return fg(x,r)}return await r.text()})();return Ge(t).debug(`[${n}] response parsed`,Is({retryOfRequestLogID:a,url:r.url,status:r.status,body:i,durationMs:Date.now()-o})),i}function fg(t,s){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:s.headers.get("x-request-id"),enumerable:!1})}var Kr;class Fo extends Promise{constructor(s,r,n=hg){super(a=>{a(null)}),this.responsePromise=r,this.parseResponse=n,Kr.set(this,void 0),xe(this,Kr,s)}_thenUnwrap(s){return new Fo(_(this,Kr,"f"),this.responsePromise,async(r,n)=>fg(s(await this.parseResponse(r,n),n),n.response))}asResponse(){return this.responsePromise.then(s=>s.response)}async withResponse(){const[s,r]=await Promise.all([this.parse(),this.asResponse()]);return{data:s,response:r,request_id:r.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(s=>this.parseResponse(_(this,Kr,"f"),s))),this.parsedPromise}then(s,r){return this.parse().then(s,r)}catch(s){return this.parse().catch(s)}finally(s){return this.parse().finally(s)}}Kr=new WeakMap;var ta;class jc{constructor(s,r,n,a){ta.set(this,void 0),xe(this,ta,s),this.options=a,this.response=r,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const s=this.nextPageRequestOptions();if(!s)throw new he("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await _(this,ta,"f").requestAPIList(this.constructor,s)}async*iterPages(){let s=this;for(yield s;s.hasNextPage();)s=await s.getNextPage(),yield s}async*[(ta=new WeakMap,Symbol.asyncIterator)](){for await(const s of this.iterPages())for(const r of s.getPaginatedItems())yield r}}class UR extends Fo{constructor(s,r,n){super(s,r,async(a,o)=>new n(a,o.response,await hg(a,o),o.options))}async*[Symbol.asyncIterator](){const s=await this;for await(const r of s)yield r}}class $o extends jc{constructor(s,r,n,a){super(s,r,n,a),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class ze extends jc{constructor(s,r,n,a){super(s,r,n,a),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){var n;const s=this.getPaginatedItems(),r=(n=s[s.length-1])==null?void 0:n.id;return r?{...this.options,query:{...ng(this.options.query),after:r}}:null}}class zR extends jc{constructor(s,r,n,a){super(s,r,n,a),this.data=n.data||[],this.has_more=n.has_more||!1,this.last_id=n.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const s=this.last_id;return s?{...this.options,query:{...ng(this.options.query),after:s}}:null}}const xg=()=>{var t;if(typeof File>"u"){const{process:s}=globalThis,r=typeof((t=s==null?void 0:s.versions)==null?void 0:t.node)=="string"&&parseInt(s.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(r?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function en(t,s,r){return xg(),new File(t,s??"unknown_file",r)}function pa(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const pg=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",Ks=async(t,s)=>({...t,body:await HR(t.body,s)}),vu=new WeakMap;function WR(t){const s=typeof t=="function"?t:t.fetch,r=vu.get(s);if(r)return r;const n=(async()=>{try{const a="Response"in s?s.Response:(await s("data:,")).constructor,o=new FormData;return o.toString()!==await new a(o).text()}catch{return!0}})();return vu.set(s,n),n}const HR=async(t,s)=>{if(!await WR(s))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(t||{}).map(([n,a])=>al(r,n,a))),r},qR=t=>t instanceof Blob&&"name"in t,al=async(t,s,r)=>{if(r!==void 0){if(r==null)throw new TypeError(`Received null for "${s}"; to pass null in FormData, you must use the string 'null'`);if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")t.append(s,String(r));else if(r instanceof Response)t.append(s,en([await r.blob()],pa(r)));else if(pg(r))t.append(s,en([await new Response(og(r)).blob()],pa(r)));else if(qR(r))t.append(s,r,pa(r));else if(Array.isArray(r))await Promise.all(r.map(n=>al(t,s+"[]",n)));else if(typeof r=="object")await Promise.all(Object.entries(r).map(([n,a])=>al(t,`${s}[${n}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}},gg=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",KR=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&gg(t),VR=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function GR(t,s,r){if(xg(),t=await t,KR(t))return t instanceof File?t:en([await t.arrayBuffer()],t.name);if(VR(t)){const a=await t.blob();return s||(s=new URL(t.url).pathname.split(/[\\/]/).pop()),en(await ol(a),s,r)}const n=await ol(t);if(s||(s=pa(t)),!(r!=null&&r.type)){const a=n.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(r={...r,type:a})}return en(n,s,r)}async function ol(t){var r;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(gg(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(pg(t))for await(const n of t)s.push(...await ol(n));else{const n=(r=t==null?void 0:t.constructor)==null?void 0:r.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${XR(t)}`)}return s}function XR(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(r=>`"${r}"`).join(", ")}]`}class fe{constructor(s){this._client=s}}function bg(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const yu=Object.freeze(Object.create(null)),YR=(t=bg)=>function(r,...n){if(r.length===1)return r[0];let a=!1;const o=[],i=r.reduce((u,h,x)=>{var g;/[?#]/.test(h)&&(a=!0);const f=n[x];let b=(a?encodeURIComponent:t)(""+f);return x!==n.length&&(f==null||typeof f=="object"&&f.toString===((g=Object.getPrototypeOf(Object.getPrototypeOf(f.hasOwnProperty??yu)??yu))==null?void 0:g.toString))&&(b=f+"",o.push({start:u.length+h.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(f).slice(8,-1)} is not a valid path parameter`})),u+h+(x===n.length?"":b)},""),l=i.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let d;for(;(d=c.exec(l))!==null;)o.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(o.sort((u,h)=>u.start-h.start),o.length>0){let u=0;const h=o.reduce((x,f)=>{const b=" ".repeat(f.start-u),g="^".repeat(f.length);return u=f.start+f.length,x+b+g},"");throw new he(`Path parameters result in path with invalid segments:
${o.map(x=>x.error).join(`
`)}
${i}
${h}`)}return i},V=YR(bg);let vg=class extends fe{list(s,r={},n){return this._client.getAPIList(V`/chat/completions/${s}/messages`,ze,{query:r,...n})}};function Ha(t){return t!==void 0&&"function"in t&&t.function!==void 0}function wc(t){return(t==null?void 0:t.$brand)==="auto-parseable-response-format"}function Fn(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function JR(t,s){return!s||!yg(s)?{...t,choices:t.choices.map(r=>(jg(r.message.tool_calls),{...r,message:{...r.message,parsed:null,...r.message.tool_calls?{tool_calls:r.message.tool_calls}:void 0}}))}:Nc(t,s)}function Nc(t,s){const r=t.choices.map(n=>{var a;if(n.finish_reason==="length")throw new sg;if(n.finish_reason==="content_filter")throw new rg;return jg(n.message.tool_calls),{...n,message:{...n.message,...n.message.tool_calls?{tool_calls:((a=n.message.tool_calls)==null?void 0:a.map(o=>ZR(s,o)))??void 0}:void 0,parsed:n.message.content&&!n.message.refusal?QR(s,n.message.content):null}}});return{...t,choices:r}}function QR(t,s){var r,n;return((r=t.response_format)==null?void 0:r.type)!=="json_schema"?null:((n=t.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(s):JSON.parse(s):null}function ZR(t,s){var n;const r=(n=t.tools)==null?void 0:n.find(a=>{var o;return Ha(a)&&((o=a.function)==null?void 0:o.name)===s.function.name});return{...s,function:{...s.function,parsed_arguments:Fn(r)?r.$parseRaw(s.function.arguments):r!=null&&r.function.strict?JSON.parse(s.function.arguments):null}}}function e_(t,s){var n;if(!t||!("tools"in t)||!t.tools)return!1;const r=(n=t.tools)==null?void 0:n.find(a=>{var o;return Ha(a)&&((o=a.function)==null?void 0:o.name)===s.function.name});return Ha(r)&&(Fn(r)||(r==null?void 0:r.function.strict)||!1)}function yg(t){var s;return wc(t.response_format)?!0:((s=t.tools)==null?void 0:s.some(r=>Fn(r)||r.type==="function"&&r.function.strict===!0))??!1}function jg(t){for(const s of t||[])if(s.type!=="function")throw new he(`Currently only \`function\` tool calls are supported; Received \`${s.type}\``)}function t_(t){for(const s of t??[]){if(s.type!=="function")throw new he(`Currently only \`function\` tool types support auto-parsing; Received \`${s.type}\``);if(s.function.strict!==!0)throw new he(`The \`${s.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const qa=t=>(t==null?void 0:t.role)==="assistant",wg=t=>(t==null?void 0:t.role)==="tool";var il,ga,ba,Vr,Gr,va,Xr,ts,Yr,Ka,Va,cr,Ng;class Sc{constructor(){il.add(this),this.controller=new AbortController,ga.set(this,void 0),ba.set(this,()=>{}),Vr.set(this,()=>{}),Gr.set(this,void 0),va.set(this,()=>{}),Xr.set(this,()=>{}),ts.set(this,{}),Yr.set(this,!1),Ka.set(this,!1),Va.set(this,!1),cr.set(this,!1),xe(this,ga,new Promise((s,r)=>{xe(this,ba,s,"f"),xe(this,Vr,r,"f")})),xe(this,Gr,new Promise((s,r)=>{xe(this,va,s,"f"),xe(this,Xr,r,"f")})),_(this,ga,"f").catch(()=>{}),_(this,Gr,"f").catch(()=>{})}_run(s){setTimeout(()=>{s().then(()=>{this._emitFinal(),this._emit("end")},_(this,il,"m",Ng).bind(this))},0)}_connected(){this.ended||(_(this,ba,"f").call(this),this._emit("connect"))}get ended(){return _(this,Yr,"f")}get errored(){return _(this,Ka,"f")}get aborted(){return _(this,Va,"f")}abort(){this.controller.abort()}on(s,r){return(_(this,ts,"f")[s]||(_(this,ts,"f")[s]=[])).push({listener:r}),this}off(s,r){const n=_(this,ts,"f")[s];if(!n)return this;const a=n.findIndex(o=>o.listener===r);return a>=0&&n.splice(a,1),this}once(s,r){return(_(this,ts,"f")[s]||(_(this,ts,"f")[s]=[])).push({listener:r,once:!0}),this}emitted(s){return new Promise((r,n)=>{xe(this,cr,!0),s!=="error"&&this.once("error",n),this.once(s,r)})}async done(){xe(this,cr,!0),await _(this,Gr,"f")}_emit(s,...r){if(_(this,Yr,"f"))return;s==="end"&&(xe(this,Yr,!0),_(this,va,"f").call(this));const n=_(this,ts,"f")[s];if(n&&(_(this,ts,"f")[s]=n.filter(a=>!a.once),n.forEach(({listener:a})=>a(...r))),s==="abort"){const a=r[0];!_(this,cr,"f")&&!(n!=null&&n.length)&&Promise.reject(a),_(this,Vr,"f").call(this,a),_(this,Xr,"f").call(this,a),this._emit("end");return}if(s==="error"){const a=r[0];!_(this,cr,"f")&&!(n!=null&&n.length)&&Promise.reject(a),_(this,Vr,"f").call(this,a),_(this,Xr,"f").call(this,a),this._emit("end")}}_emitFinal(){}}ga=new WeakMap,ba=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,va=new WeakMap,Xr=new WeakMap,ts=new WeakMap,Yr=new WeakMap,Ka=new WeakMap,Va=new WeakMap,cr=new WeakMap,il=new WeakSet,Ng=function(s){if(xe(this,Ka,!0),s instanceof Error&&s.name==="AbortError"&&(s=new St),s instanceof St)return xe(this,Va,!0),this._emit("abort",s);if(s instanceof he)return this._emit("error",s);if(s instanceof Error){const r=new he(s.message);return r.cause=s,this._emit("error",r)}return this._emit("error",new he(String(s)))};function s_(t){return typeof t.parse=="function"}var et,ll,Ga,cl,dl,ul,Sg,kg;const r_=10;class Cg extends Sc{constructor(){super(...arguments),et.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(s){var n;this._chatCompletions.push(s),this._emit("chatCompletion",s);const r=(n=s.choices[0])==null?void 0:n.message;return r&&this._addMessage(r),s}_addMessage(s,r=!0){if("content"in s||(s.content=null),this.messages.push(s),r){if(this._emit("message",s),wg(s)&&s.content)this._emit("functionToolCallResult",s.content);else if(qa(s)&&s.tool_calls)for(const n of s.tool_calls)n.type==="function"&&this._emit("functionToolCall",n.function)}}async finalChatCompletion(){await this.done();const s=this._chatCompletions[this._chatCompletions.length-1];if(!s)throw new he("stream ended without producing a ChatCompletion");return s}async finalContent(){return await this.done(),_(this,et,"m",ll).call(this)}async finalMessage(){return await this.done(),_(this,et,"m",Ga).call(this)}async finalFunctionToolCall(){return await this.done(),_(this,et,"m",cl).call(this)}async finalFunctionToolCallResult(){return await this.done(),_(this,et,"m",dl).call(this)}async totalUsage(){return await this.done(),_(this,et,"m",ul).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const s=this._chatCompletions[this._chatCompletions.length-1];s&&this._emit("finalChatCompletion",s);const r=_(this,et,"m",Ga).call(this);r&&this._emit("finalMessage",r);const n=_(this,et,"m",ll).call(this);n&&this._emit("finalContent",n);const a=_(this,et,"m",cl).call(this);a&&this._emit("finalFunctionToolCall",a);const o=_(this,et,"m",dl).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(i=>i.usage)&&this._emit("totalUsage",_(this,et,"m",ul).call(this))}async _createChatCompletion(s,r,n){const a=n==null?void 0:n.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),_(this,et,"m",Sg).call(this,r);const o=await s.chat.completions.create({...r,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Nc(o,r))}async _runChatCompletion(s,r,n){for(const a of r.messages)this._addMessage(a,!1);return await this._createChatCompletion(s,r,n)}async _runTools(s,r,n){var f,b,g;const a="tool",{tool_choice:o="auto",stream:i,...l}=r,c=typeof o!="string"&&o.type==="function"&&((f=o==null?void 0:o.function)==null?void 0:f.name),{maxChatCompletions:d=r_}=n||{},u=r.tools.map(p=>{if(Fn(p)){if(!p.$callback)throw new he("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:p.$callback,name:p.function.name,description:p.function.description||"",parameters:p.function.parameters,parse:p.$parseRaw,strict:!0}}}return p}),h={};for(const p of u)p.type==="function"&&(h[p.function.name||p.function.function.name]=p.function);const x="tools"in r?u.map(p=>p.type==="function"?{type:"function",function:{name:p.function.name||p.function.function.name,parameters:p.function.parameters,description:p.function.description,strict:p.function.strict}}:p):void 0;for(const p of r.messages)this._addMessage(p,!1);for(let p=0;p<d;++p){const v=(b=(await this._createChatCompletion(s,{...l,tool_choice:o,tools:x,messages:[...this.messages]},n)).choices[0])==null?void 0:b.message;if(!v)throw new he("missing message in ChatCompletion response");if(!((g=v.tool_calls)!=null&&g.length))return;for(const j of v.tool_calls){if(j.type!=="function")continue;const w=j.id,{name:k,arguments:R}=j.function,C=h[k];if(C){if(c&&c!==k){const q=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:a,tool_call_id:w,content:q});continue}}else{const q=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(h).map(I=>JSON.stringify(I)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:w,content:q});continue}let E;try{E=s_(C)?await C.parse(R):R}catch(q){const I=q instanceof Error?q.message:String(q);this._addMessage({role:a,tool_call_id:w,content:I});continue}const M=await C.function(E,this),B=_(this,et,"m",kg).call(this,M);if(this._addMessage({role:a,tool_call_id:w,content:B}),c)return}}}}et=new WeakSet,ll=function(){return _(this,et,"m",Ga).call(this).content??null},Ga=function(){let s=this.messages.length;for(;s-- >0;){const r=this.messages[s];if(qa(r))return{...r,content:r.content??null,refusal:r.refusal??null}}throw new he("stream ended without producing a ChatCompletionMessage with role=assistant")},cl=function(){var s,r;for(let n=this.messages.length-1;n>=0;n--){const a=this.messages[n];if(qa(a)&&((s=a==null?void 0:a.tool_calls)!=null&&s.length))return(r=a.tool_calls.filter(o=>o.type==="function").at(-1))==null?void 0:r.function}},dl=function(){for(let s=this.messages.length-1;s>=0;s--){const r=this.messages[s];if(wg(r)&&r.content!=null&&typeof r.content=="string"&&this.messages.some(n=>{var a;return n.role==="assistant"&&((a=n.tool_calls)==null?void 0:a.some(o=>o.type==="function"&&o.id===r.tool_call_id))}))return r.content}},ul=function(){const s={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:r}of this._chatCompletions)r&&(s.completion_tokens+=r.completion_tokens,s.prompt_tokens+=r.prompt_tokens,s.total_tokens+=r.total_tokens);return s},Sg=function(s){if(s.n!=null&&s.n>1)throw new he("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},kg=function(s){return typeof s=="string"?s:s===void 0?"undefined":JSON.stringify(s)};class kc extends Cg{static runTools(s,r,n){const a=new kc,o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(s,r,o)),a}_addMessage(s,r=!0){super._addMessage(s,r),qa(s)&&s.content&&this._emit("content",s.content)}}const Rg=1,_g=2,Ag=4,Eg=8,Tg=16,Pg=32,Ig=64,Dg=128,Og=256,Mg=Dg|Og,Lg=Tg|Pg|Mg|Ig,Fg=Rg|_g|Lg,$g=Ag|Eg,n_=Fg|$g,Ke={STR:Rg,NUM:_g,ARR:Ag,OBJ:Eg,NULL:Tg,BOOL:Pg,NAN:Ig,INFINITY:Dg,MINUS_INFINITY:Og,INF:Mg,SPECIAL:Lg,ATOM:Fg,COLLECTION:$g,ALL:n_};class a_ extends Error{}class o_ extends Error{}function i_(t,s=Ke.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return l_(t.trim(),s)}const l_=(t,s)=>{const r=t.length;let n=0;const a=x=>{throw new a_(`${x} at position ${n}`)},o=x=>{throw new o_(`${x} at position ${n}`)},i=()=>(h(),n>=r&&a("Unexpected end of input"),t[n]==='"'?l():t[n]==="{"?c():t[n]==="["?d():t.substring(n,n+4)==="null"||Ke.NULL&s&&r-n<4&&"null".startsWith(t.substring(n))?(n+=4,null):t.substring(n,n+4)==="true"||Ke.BOOL&s&&r-n<4&&"true".startsWith(t.substring(n))?(n+=4,!0):t.substring(n,n+5)==="false"||Ke.BOOL&s&&r-n<5&&"false".startsWith(t.substring(n))?(n+=5,!1):t.substring(n,n+8)==="Infinity"||Ke.INFINITY&s&&r-n<8&&"Infinity".startsWith(t.substring(n))?(n+=8,1/0):t.substring(n,n+9)==="-Infinity"||Ke.MINUS_INFINITY&s&&1<r-n&&r-n<9&&"-Infinity".startsWith(t.substring(n))?(n+=9,-1/0):t.substring(n,n+3)==="NaN"||Ke.NAN&s&&r-n<3&&"NaN".startsWith(t.substring(n))?(n+=3,NaN):u()),l=()=>{const x=n;let f=!1;for(n++;n<r&&(t[n]!=='"'||f&&t[n-1]==="\\");)f=t[n]==="\\"?!f:!1,n++;if(t.charAt(n)=='"')try{return JSON.parse(t.substring(x,++n-Number(f)))}catch(b){o(String(b))}else if(Ke.STR&s)try{return JSON.parse(t.substring(x,n-Number(f))+'"')}catch{return JSON.parse(t.substring(x,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},c=()=>{n++,h();const x={};try{for(;t[n]!=="}";){if(h(),n>=r&&Ke.OBJ&s)return x;const f=l();h(),n++;try{const b=i();Object.defineProperty(x,f,{value:b,writable:!0,enumerable:!0,configurable:!0})}catch(b){if(Ke.OBJ&s)return x;throw b}h(),t[n]===","&&n++}}catch{if(Ke.OBJ&s)return x;a("Expected '}' at end of object")}return n++,x},d=()=>{n++;const x=[];try{for(;t[n]!=="]";)x.push(i()),h(),t[n]===","&&n++}catch{if(Ke.ARR&s)return x;a("Expected ']' at end of array")}return n++,x},u=()=>{if(n===0){t==="-"&&Ke.NUM&s&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(f){if(Ke.NUM&s)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}o(String(f))}}const x=n;for(t[n]==="-"&&n++;t[n]&&!",]}".includes(t[n]);)n++;n==r&&!(Ke.NUM&s)&&a("Unterminated number literal");try{return JSON.parse(t.substring(x,n))}catch{t.substring(x,n)==="-"&&Ke.NUM&s&&a("Not sure what '-' is");try{return JSON.parse(t.substring(x,t.lastIndexOf("e")))}catch(b){o(String(b))}}},h=()=>{for(;n<r&&` 
\r	`.includes(t[n]);)n++};return i()},ju=t=>i_(t,Ke.ALL^Ke.NUM);var We,es,ar,gs,fi,sa,xi,pi,gi,ra,bi,wu;class vn extends Cg{constructor(s){super(),We.add(this),es.set(this,void 0),ar.set(this,void 0),gs.set(this,void 0),xe(this,es,s),xe(this,ar,[])}get currentChatCompletionSnapshot(){return _(this,gs,"f")}static fromReadableStream(s){const r=new vn(null);return r._run(()=>r._fromReadableStream(s)),r}static createChatCompletion(s,r,n){const a=new vn(r);return a._run(()=>a._runChatCompletion(s,{...r,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(s,r,n){var i;super._createChatCompletion;const a=n==null?void 0:n.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),_(this,We,"m",fi).call(this);const o=await s.chat.completions.create({...r,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const l of o)_(this,We,"m",xi).call(this,l);if((i=o.controller.signal)!=null&&i.aborted)throw new St;return this._addChatCompletion(_(this,We,"m",ra).call(this))}async _fromReadableStream(s,r){var i;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),_(this,We,"m",fi).call(this),this._connected();const a=Vt.fromReadableStream(s,this.controller);let o;for await(const l of a)o&&o!==l.id&&this._addChatCompletion(_(this,We,"m",ra).call(this)),_(this,We,"m",xi).call(this,l),o=l.id;if((i=a.controller.signal)!=null&&i.aborted)throw new St;return this._addChatCompletion(_(this,We,"m",ra).call(this))}[(es=new WeakMap,ar=new WeakMap,gs=new WeakMap,We=new WeakSet,fi=function(){this.ended||xe(this,gs,void 0)},sa=function(r){let n=_(this,ar,"f")[r.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},_(this,ar,"f")[r.index]=n,n)},xi=function(r){var a,o,i,l,c,d,u,h,x,f,b,g,p,y,v;if(this.ended)return;const n=_(this,We,"m",wu).call(this,r);this._emit("chunk",r,n);for(const j of r.choices){const w=n.choices[j.index];j.delta.content!=null&&((a=w.message)==null?void 0:a.role)==="assistant"&&((o=w.message)!=null&&o.content)&&(this._emit("content",j.delta.content,w.message.content),this._emit("content.delta",{delta:j.delta.content,snapshot:w.message.content,parsed:w.message.parsed})),j.delta.refusal!=null&&((i=w.message)==null?void 0:i.role)==="assistant"&&((l=w.message)!=null&&l.refusal)&&this._emit("refusal.delta",{delta:j.delta.refusal,snapshot:w.message.refusal}),((c=j.logprobs)==null?void 0:c.content)!=null&&((d=w.message)==null?void 0:d.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=j.logprobs)==null?void 0:u.content,snapshot:((h=w.logprobs)==null?void 0:h.content)??[]}),((x=j.logprobs)==null?void 0:x.refusal)!=null&&((f=w.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(b=j.logprobs)==null?void 0:b.refusal,snapshot:((g=w.logprobs)==null?void 0:g.refusal)??[]});const k=_(this,We,"m",sa).call(this,w);w.finish_reason&&(_(this,We,"m",gi).call(this,w),k.current_tool_call_index!=null&&_(this,We,"m",pi).call(this,w,k.current_tool_call_index));for(const R of j.delta.tool_calls??[])k.current_tool_call_index!==R.index&&(_(this,We,"m",gi).call(this,w),k.current_tool_call_index!=null&&_(this,We,"m",pi).call(this,w,k.current_tool_call_index)),k.current_tool_call_index=R.index;for(const R of j.delta.tool_calls??[]){const C=(p=w.message.tool_calls)==null?void 0:p[R.index];C!=null&&C.type&&((C==null?void 0:C.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(y=C.function)==null?void 0:y.name,index:R.index,arguments:C.function.arguments,parsed_arguments:C.function.parsed_arguments,arguments_delta:((v=R.function)==null?void 0:v.arguments)??""}):(C==null||C.type,void 0))}}},pi=function(r,n){var i,l,c;if(_(this,We,"m",sa).call(this,r).done_tool_calls.has(n))return;const o=(i=r.message.tool_calls)==null?void 0:i[n];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const d=(c=(l=_(this,es,"f"))==null?void 0:l.tools)==null?void 0:c.find(u=>Ha(u)&&u.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:n,arguments:o.function.arguments,parsed_arguments:Fn(d)?d.$parseRaw(o.function.arguments):d!=null&&d.function.strict?JSON.parse(o.function.arguments):null})}else o.type},gi=function(r){var a,o;const n=_(this,We,"m",sa).call(this,r);if(r.message.content&&!n.content_done){n.content_done=!0;const i=_(this,We,"m",bi).call(this);this._emit("content.done",{content:r.message.content,parsed:i?i.$parseRaw(r.message.content):null})}r.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:r.message.refusal})),(a=r.logprobs)!=null&&a.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:r.logprobs.content})),(o=r.logprobs)!=null&&o.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:r.logprobs.refusal}))},ra=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");const r=_(this,gs,"f");if(!r)throw new he("request ended without sending any chunks");return xe(this,gs,void 0),xe(this,ar,[]),c_(r,_(this,es,"f"))},bi=function(){var n;const r=(n=_(this,es,"f"))==null?void 0:n.response_format;return wc(r)?r:null},wu=function(r){var n,a,o,i;let l=_(this,gs,"f");const{choices:c,...d}=r;l?Object.assign(l,d):l=xe(this,gs,{...d,choices:[]});for(const{delta:u,finish_reason:h,index:x,logprobs:f=null,...b}of r.choices){let g=l.choices[x];if(g||(g=l.choices[x]={finish_reason:h,index:x,message:{},logprobs:f,...b}),f)if(!g.logprobs)g.logprobs=Object.assign({},f);else{const{content:R,refusal:C,...E}=f;Object.assign(g.logprobs,E),R&&((n=g.logprobs).content??(n.content=[]),g.logprobs.content.push(...R)),C&&((a=g.logprobs).refusal??(a.refusal=[]),g.logprobs.refusal.push(...C))}if(h&&(g.finish_reason=h,_(this,es,"f")&&yg(_(this,es,"f")))){if(h==="length")throw new sg;if(h==="content_filter")throw new rg}if(Object.assign(g,b),!u)continue;const{content:p,refusal:y,function_call:v,role:j,tool_calls:w,...k}=u;if(Object.assign(g.message,k),y&&(g.message.refusal=(g.message.refusal||"")+y),j&&(g.message.role=j),v&&(g.message.function_call?(v.name&&(g.message.function_call.name=v.name),v.arguments&&((o=g.message.function_call).arguments??(o.arguments=""),g.message.function_call.arguments+=v.arguments)):g.message.function_call=v),p&&(g.message.content=(g.message.content||"")+p,!g.message.refusal&&_(this,We,"m",bi).call(this)&&(g.message.parsed=ju(g.message.content))),w){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:R,id:C,type:E,function:M,...B}of w){const q=(i=g.message.tool_calls)[R]??(i[R]={});Object.assign(q,B),C&&(q.id=C),E&&(q.type=E),M&&(q.function??(q.function={name:M.name??"",arguments:""})),M!=null&&M.name&&(q.function.name=M.name),M!=null&&M.arguments&&(q.function.arguments+=M.arguments,e_(_(this,es,"f"),q)&&(q.function.parsed_arguments=ju(q.function.arguments)))}}}return l},Symbol.asyncIterator)](){const s=[],r=[];let n=!1;return this.on("chunk",a=>{const o=r.shift();o?o.resolve(a):s.push(a)}),this.on("end",()=>{n=!0;for(const a of r)a.resolve(void 0);r.length=0}),this.on("abort",a=>{n=!0;for(const o of r)o.reject(a);r.length=0}),this.on("error",a=>{n=!0;for(const o of r)o.reject(a);r.length=0}),{next:async()=>s.length?{value:s.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,i)=>r.push({resolve:o,reject:i})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Vt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function c_(t,s){const{id:r,choices:n,created:a,model:o,system_fingerprint:i,...l}=t,c={...l,id:r,choices:n.map(({message:d,finish_reason:u,index:h,logprobs:x,...f})=>{if(!u)throw new he(`missing finish_reason for choice ${h}`);const{content:b=null,function_call:g,tool_calls:p,...y}=d,v=d.role;if(!v)throw new he(`missing role for choice ${h}`);if(g){const{arguments:j,name:w}=g;if(j==null)throw new he(`missing function_call.arguments for choice ${h}`);if(!w)throw new he(`missing function_call.name for choice ${h}`);return{...f,message:{content:b,function_call:{arguments:j,name:w},role:v,refusal:d.refusal??null},finish_reason:u,index:h,logprobs:x}}return p?{...f,index:h,finish_reason:u,logprobs:x,message:{...y,role:v,content:b,refusal:d.refusal??null,tool_calls:p.map((j,w)=>{const{function:k,type:R,id:C,...E}=j,{arguments:M,name:B,...q}=k||{};if(C==null)throw new he(`missing choices[${h}].tool_calls[${w}].id
${na(t)}`);if(R==null)throw new he(`missing choices[${h}].tool_calls[${w}].type
${na(t)}`);if(B==null)throw new he(`missing choices[${h}].tool_calls[${w}].function.name
${na(t)}`);if(M==null)throw new he(`missing choices[${h}].tool_calls[${w}].function.arguments
${na(t)}`);return{...E,id:C,type:R,function:{...q,name:B,arguments:M}}})}}:{...f,message:{...y,content:b,role:v,refusal:d.refusal??null},finish_reason:u,index:h,logprobs:x}}),created:a,model:o,object:"chat.completion",...i?{system_fingerprint:i}:{}};return JR(c,s)}function na(t){return JSON.stringify(t)}class Xa extends vn{static fromReadableStream(s){const r=new Xa(null);return r._run(()=>r._fromReadableStream(s)),r}static runTools(s,r,n){const a=new Xa(r),o={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(s,r,o)),a}}let Cc=class extends fe{constructor(){super(...arguments),this.messages=new vg(this._client)}create(s,r){return this._client.post("/chat/completions",{body:s,...r,stream:s.stream??!1})}retrieve(s,r){return this._client.get(V`/chat/completions/${s}`,r)}update(s,r,n){return this._client.post(V`/chat/completions/${s}`,{body:r,...n})}list(s={},r){return this._client.getAPIList("/chat/completions",ze,{query:s,...r})}delete(s,r){return this._client.delete(V`/chat/completions/${s}`,r)}parse(s,r){return t_(s.tools),this._client.chat.completions.create(s,{...r,headers:{...r==null?void 0:r.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(n=>Nc(n,s))}runTools(s,r){return s.stream?Xa.runTools(this._client,s,r):kc.runTools(this._client,s,r)}stream(s,r){return vn.createChatCompletion(this._client,s,r)}};Cc.Messages=vg;class Rc extends fe{constructor(){super(...arguments),this.completions=new Cc(this._client)}}Rc.Completions=Cc;const Bg=Symbol("brand.privateNullableHeaders");function*d_(t){if(!t)return;if(Bg in t){const{values:n,nulls:a}=t;yield*n.entries();for(const o of a)yield[o,null];return}let s=!1,r;t instanceof Headers?r=t.entries():iu(t)?r=t:(s=!0,r=Object.entries(t??{}));for(let n of r){const a=n[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=iu(n[1])?n[1]:[n[1]];let i=!1;for(const l of o)l!==void 0&&(s&&!i&&(i=!0,yield[a,null]),yield[a,l])}}const ie=t=>{const s=new Headers,r=new Set;for(const n of t){const a=new Set;for(const[o,i]of d_(n)){const l=o.toLowerCase();a.has(l)||(s.delete(o),a.add(l)),i===null?(s.delete(o),r.add(l)):(s.append(o,i),r.delete(l))}}return{[Bg]:!0,values:s,nulls:r}};class Ug extends fe{create(s,r){return this._client.post("/audio/speech",{body:s,...r,headers:ie([{Accept:"application/octet-stream"},r==null?void 0:r.headers]),__binaryResponse:!0})}}class zg extends fe{create(s,r){return this._client.post("/audio/transcriptions",Ks({body:s,...r,stream:s.stream??!1,__metadata:{model:s.model}},this._client))}}class Wg extends fe{create(s,r){return this._client.post("/audio/translations",Ks({body:s,...r,__metadata:{model:s.model}},this._client))}}class $n extends fe{constructor(){super(...arguments),this.transcriptions=new zg(this._client),this.translations=new Wg(this._client),this.speech=new Ug(this._client)}}$n.Transcriptions=zg;$n.Translations=Wg;$n.Speech=Ug;class Hg extends fe{create(s,r){return this._client.post("/batches",{body:s,...r})}retrieve(s,r){return this._client.get(V`/batches/${s}`,r)}list(s={},r){return this._client.getAPIList("/batches",ze,{query:s,...r})}cancel(s,r){return this._client.post(V`/batches/${s}/cancel`,r)}}class qg extends fe{create(s,r){return this._client.post("/assistants",{body:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(s,r){return this._client.get(V`/assistants/${s}`,{...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(s,r,n){return this._client.post(V`/assistants/${s}`,{body:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(s={},r){return this._client.getAPIList("/assistants",ze,{query:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(s,r){return this._client.delete(V`/assistants/${s}`,{...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Kg extends fe{create(s,r){return this._client.post("/realtime/sessions",{body:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Vg extends fe{create(s,r){return this._client.post("/realtime/transcription_sessions",{body:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}}class Bo extends fe{constructor(){super(...arguments),this.sessions=new Kg(this._client),this.transcriptionSessions=new Vg(this._client)}}Bo.Sessions=Kg;Bo.TranscriptionSessions=Vg;class Gg extends fe{create(s,r,n){return this._client.post(V`/threads/${s}/messages`,{body:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(s,r,n){const{thread_id:a}=r;return this._client.get(V`/threads/${a}/messages/${s}`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(s,r,n){const{thread_id:a,...o}=r;return this._client.post(V`/threads/${a}/messages/${s}`,{body:o,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(s,r={},n){return this._client.getAPIList(V`/threads/${s}/messages`,ze,{query:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(s,r,n){const{thread_id:a}=r;return this._client.delete(V`/threads/${a}/messages/${s}`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class Xg extends fe{retrieve(s,r,n){const{thread_id:a,run_id:o,...i}=r;return this._client.get(V`/threads/${a}/runs/${o}/steps/${s}`,{query:i,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(s,r,n){const{thread_id:a,...o}=r;return this._client.getAPIList(V`/threads/${a}/runs/${s}/steps`,ze,{query:o,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}const u_=t=>{if(typeof Buffer<"u"){const s=Buffer.from(t,"base64");return Array.from(new Float32Array(s.buffer,s.byteOffset,s.length/Float32Array.BYTES_PER_ELEMENT))}else{const s=atob(t),r=s.length,n=new Uint8Array(r);for(let a=0;a<r;a++)n[a]=s.charCodeAt(a);return Array.from(new Float32Array(n.buffer))}};var vi={};const or=t=>{var s,r,n,a;if(typeof globalThis.process<"u")return((s=vi==null?void 0:vi[t])==null?void 0:s.trim())??void 0;if(typeof globalThis.Deno<"u")return(a=(n=(r=globalThis.Deno.env)==null?void 0:r.get)==null?void 0:n.call(r,t))==null?void 0:a.trim()};var Xe,Ms,ml,Wt,ya,It,Ls,mr,Ds,Ya,gt,ja,wa,tn,Jr,Qr,Nu,Su,ku,Cu,Ru,_u,Au;class sn extends Sc{constructor(){super(...arguments),Xe.add(this),ml.set(this,[]),Wt.set(this,{}),ya.set(this,{}),It.set(this,void 0),Ls.set(this,void 0),mr.set(this,void 0),Ds.set(this,void 0),Ya.set(this,void 0),gt.set(this,void 0),ja.set(this,void 0),wa.set(this,void 0),tn.set(this,void 0)}[(ml=new WeakMap,Wt=new WeakMap,ya=new WeakMap,It=new WeakMap,Ls=new WeakMap,mr=new WeakMap,Ds=new WeakMap,Ya=new WeakMap,gt=new WeakMap,ja=new WeakMap,wa=new WeakMap,tn=new WeakMap,Xe=new WeakSet,Symbol.asyncIterator)](){const s=[],r=[];let n=!1;return this.on("event",a=>{const o=r.shift();o?o.resolve(a):s.push(a)}),this.on("end",()=>{n=!0;for(const a of r)a.resolve(void 0);r.length=0}),this.on("abort",a=>{n=!0;for(const o of r)o.reject(a);r.length=0}),this.on("error",a=>{n=!0;for(const o of r)o.reject(a);r.length=0}),{next:async()=>s.length?{value:s.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,i)=>r.push({resolve:o,reject:i})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(s){const r=new Ms;return r._run(()=>r._fromReadableStream(s)),r}async _fromReadableStream(s,r){var o;const n=r==null?void 0:r.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Vt.fromReadableStream(s,this.controller);for await(const i of a)_(this,Xe,"m",Jr).call(this,i);if((o=a.controller.signal)!=null&&o.aborted)throw new St;return this._addRun(_(this,Xe,"m",Qr).call(this))}toReadableStream(){return new Vt(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(s,r,n,a){const o=new Ms;return o._run(()=>o._runToolAssistantStream(s,r,n,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(s,r,n,a){var c;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},l=await s.submitToolOutputs(r,i,{...a,signal:this.controller.signal});this._connected();for await(const d of l)_(this,Xe,"m",Jr).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new St;return this._addRun(_(this,Xe,"m",Qr).call(this))}static createThreadAssistantStream(s,r,n){const a=new Ms;return a._run(()=>a._threadAssistantStream(s,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(s,r,n,a){const o=new Ms;return o._run(()=>o._runAssistantStream(s,r,n,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return _(this,ja,"f")}currentRun(){return _(this,wa,"f")}currentMessageSnapshot(){return _(this,It,"f")}currentRunStepSnapshot(){return _(this,tn,"f")}async finalRunSteps(){return await this.done(),Object.values(_(this,Wt,"f"))}async finalMessages(){return await this.done(),Object.values(_(this,ya,"f"))}async finalRun(){if(await this.done(),!_(this,Ls,"f"))throw Error("Final run was not received.");return _(this,Ls,"f")}async _createThreadAssistantStream(s,r,n){var l;const a=n==null?void 0:n.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...r,stream:!0},i=await s.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(const c of i)_(this,Xe,"m",Jr).call(this,c);if((l=i.controller.signal)!=null&&l.aborted)throw new St;return this._addRun(_(this,Xe,"m",Qr).call(this))}async _createAssistantStream(s,r,n,a){var c;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},l=await s.create(r,i,{...a,signal:this.controller.signal});this._connected();for await(const d of l)_(this,Xe,"m",Jr).call(this,d);if((c=l.controller.signal)!=null&&c.aborted)throw new St;return this._addRun(_(this,Xe,"m",Qr).call(this))}static accumulateDelta(s,r){for(const[n,a]of Object.entries(r)){if(!s.hasOwnProperty(n)){s[n]=a;continue}let o=s[n];if(o==null){s[n]=a;continue}if(n==="index"||n==="type"){s[n]=a;continue}if(typeof o=="string"&&typeof a=="string")o+=a;else if(typeof o=="number"&&typeof a=="number")o+=a;else if(ui(o)&&ui(a))o=this.accumulateDelta(o,a);else if(Array.isArray(o)&&Array.isArray(a)){if(o.every(i=>typeof i=="string"||typeof i=="number")){o.push(...a);continue}for(const i of a){if(!ui(i))throw new Error(`Expected array delta entry to be an object but got: ${i}`);const l=i.index;if(l==null)throw console.error(i),new Error("Expected array delta entry to have an `index` property");if(typeof l!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${l}`);const c=o[l];c==null?o.push(i):o[l]=this.accumulateDelta(c,i)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${a}, accValue: ${o}`);s[n]=o}return s}_addRun(s){return s}async _threadAssistantStream(s,r,n){return await this._createThreadAssistantStream(r,s,n)}async _runAssistantStream(s,r,n,a){return await this._createAssistantStream(r,s,n,a)}async _runToolAssistantStream(s,r,n,a){return await this._createToolAssistantStream(r,s,n,a)}}Ms=sn,Jr=function(s){if(!this.ended)switch(xe(this,ja,s),_(this,Xe,"m",ku).call(this,s),s.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":_(this,Xe,"m",Au).call(this,s);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":_(this,Xe,"m",Su).call(this,s);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":_(this,Xe,"m",Nu).call(this,s);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Qr=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");if(!_(this,Ls,"f"))throw Error("Final run has not been received");return _(this,Ls,"f")},Nu=function(s){const[r,n]=_(this,Xe,"m",Ru).call(this,s,_(this,It,"f"));xe(this,It,r),_(this,ya,"f")[r.id]=r;for(const a of n){const o=r.content[a.index];(o==null?void 0:o.type)=="text"&&this._emit("textCreated",o.text)}switch(s.event){case"thread.message.created":this._emit("messageCreated",s.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",s.data.delta,r),s.data.delta.content)for(const a of s.data.delta.content){if(a.type=="text"&&a.text){let o=a.text,i=r.content[a.index];if(i&&i.type=="text")this._emit("textDelta",o,i.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=_(this,mr,"f")){if(_(this,Ds,"f"))switch(_(this,Ds,"f").type){case"text":this._emit("textDone",_(this,Ds,"f").text,_(this,It,"f"));break;case"image_file":this._emit("imageFileDone",_(this,Ds,"f").image_file,_(this,It,"f"));break}xe(this,mr,a.index)}xe(this,Ds,r.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(_(this,mr,"f")!==void 0){const a=s.data.content[_(this,mr,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,_(this,It,"f"));break;case"text":this._emit("textDone",a.text,_(this,It,"f"));break}}_(this,It,"f")&&this._emit("messageDone",s.data),xe(this,It,void 0)}},Su=function(s){const r=_(this,Xe,"m",Cu).call(this,s);switch(xe(this,tn,r),s.event){case"thread.run.step.created":this._emit("runStepCreated",s.data);break;case"thread.run.step.delta":const n=s.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&r.step_details.type=="tool_calls")for(const o of n.step_details.tool_calls)o.index==_(this,Ya,"f")?this._emit("toolCallDelta",o,r.step_details.tool_calls[o.index]):(_(this,gt,"f")&&this._emit("toolCallDone",_(this,gt,"f")),xe(this,Ya,o.index),xe(this,gt,r.step_details.tool_calls[o.index]),_(this,gt,"f")&&this._emit("toolCallCreated",_(this,gt,"f")));this._emit("runStepDelta",s.data.delta,r);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":xe(this,tn,void 0),s.data.step_details.type=="tool_calls"&&_(this,gt,"f")&&(this._emit("toolCallDone",_(this,gt,"f")),xe(this,gt,void 0)),this._emit("runStepDone",s.data,r);break}},ku=function(s){_(this,ml,"f").push(s),this._emit("event",s)},Cu=function(s){switch(s.event){case"thread.run.step.created":return _(this,Wt,"f")[s.data.id]=s.data,s.data;case"thread.run.step.delta":let r=_(this,Wt,"f")[s.data.id];if(!r)throw Error("Received a RunStepDelta before creation of a snapshot");let n=s.data;if(n.delta){const a=Ms.accumulateDelta(r,n.delta);_(this,Wt,"f")[s.data.id]=a}return _(this,Wt,"f")[s.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":_(this,Wt,"f")[s.data.id]=s.data;break}if(_(this,Wt,"f")[s.data.id])return _(this,Wt,"f")[s.data.id];throw new Error("No snapshot available")},Ru=function(s,r){let n=[];switch(s.event){case"thread.message.created":return[s.data,n];case"thread.message.delta":if(!r)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=s.data;if(a.delta.content)for(const o of a.delta.content)if(o.index in r.content){let i=r.content[o.index];r.content[o.index]=_(this,Xe,"m",_u).call(this,o,i)}else r.content[o.index]=o,n.push(o);return[r,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(r)return[r,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_u=function(s,r){return Ms.accumulateDelta(r,s)},Au=function(s){switch(xe(this,wa,s.data),s.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":xe(this,Ls,s.data),_(this,gt,"f")&&(this._emit("toolCallDone",_(this,gt,"f")),xe(this,gt,void 0));break}};let _c=class extends fe{constructor(){super(...arguments),this.steps=new Xg(this._client)}create(s,r,n){const{include:a,...o}=r;return this._client.post(V`/threads/${s}/runs`,{query:{include:a},body:o,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:r.stream??!1})}retrieve(s,r,n){const{thread_id:a}=r;return this._client.get(V`/threads/${a}/runs/${s}`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(s,r,n){const{thread_id:a,...o}=r;return this._client.post(V`/threads/${a}/runs/${s}`,{body:o,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(s,r={},n){return this._client.getAPIList(V`/threads/${s}/runs`,ze,{query:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(s,r,n){const{thread_id:a}=r;return this._client.post(V`/threads/${a}/runs/${s}/cancel`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(s,r,n){const a=await this.create(s,r,n);return await this.poll(a.id,{thread_id:s},n)}createAndStream(s,r,n){return sn.createAssistantStream(s,this._client.beta.threads.runs,r,n)}async poll(s,r,n){var o;const a=ie([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=n==null?void 0:n.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const{data:i,response:l}=await this.retrieve(s,r,{...n,headers:{...n==null?void 0:n.headers,...a}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let c=5e3;if(n!=null&&n.pollIntervalMs)c=n.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const u=parseInt(d);isNaN(u)||(c=u)}}await Ln(c);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(s,r,n){return sn.createAssistantStream(s,this._client.beta.threads.runs,r,n)}submitToolOutputs(s,r,n){const{thread_id:a,...o}=r;return this._client.post(V`/threads/${a}/runs/${s}/submit_tool_outputs`,{body:o,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers]),stream:r.stream??!1})}async submitToolOutputsAndPoll(s,r,n){const a=await this.submitToolOutputs(s,r,n);return await this.poll(a.id,r,n)}submitToolOutputsStream(s,r,n){return sn.createToolAssistantStream(s,this._client.beta.threads.runs,r,n)}};_c.Steps=Xg;class Uo extends fe{constructor(){super(...arguments),this.runs=new _c(this._client),this.messages=new Gg(this._client)}create(s={},r){return this._client.post("/threads",{body:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(s,r){return this._client.get(V`/threads/${s}`,{...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(s,r,n){return this._client.post(V`/threads/${s}`,{body:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(s,r){return this._client.delete(V`/threads/${s}`,{...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}createAndRun(s,r){return this._client.post("/threads/runs",{body:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers]),stream:s.stream??!1})}async createAndRunPoll(s,r){const n=await this.createAndRun(s,r);return await this.runs.poll(n.id,{thread_id:n.thread_id},r)}createAndRunStream(s,r){return sn.createThreadAssistantStream(s,this._client.beta.threads,r)}}Uo.Runs=_c;Uo.Messages=Gg;class Bn extends fe{constructor(){super(...arguments),this.realtime=new Bo(this._client),this.assistants=new qg(this._client),this.threads=new Uo(this._client)}}Bn.Realtime=Bo;Bn.Assistants=qg;Bn.Threads=Uo;class Yg extends fe{create(s,r){return this._client.post("/completions",{body:s,...r,stream:s.stream??!1})}}class Jg extends fe{retrieve(s,r,n){const{container_id:a}=r;return this._client.get(V`/containers/${a}/files/${s}/content`,{...n,headers:ie([{Accept:"application/binary"},n==null?void 0:n.headers]),__binaryResponse:!0})}}let Ac=class extends fe{constructor(){super(...arguments),this.content=new Jg(this._client)}create(s,r,n){return this._client.post(V`/containers/${s}/files`,Ks({body:r,...n},this._client))}retrieve(s,r,n){const{container_id:a}=r;return this._client.get(V`/containers/${a}/files/${s}`,n)}list(s,r={},n){return this._client.getAPIList(V`/containers/${s}/files`,ze,{query:r,...n})}delete(s,r,n){const{container_id:a}=r;return this._client.delete(V`/containers/${a}/files/${s}`,{...n,headers:ie([{Accept:"*/*"},n==null?void 0:n.headers])})}};Ac.Content=Jg;class Ec extends fe{constructor(){super(...arguments),this.files=new Ac(this._client)}create(s,r){return this._client.post("/containers",{body:s,...r})}retrieve(s,r){return this._client.get(V`/containers/${s}`,r)}list(s={},r){return this._client.getAPIList("/containers",ze,{query:s,...r})}delete(s,r){return this._client.delete(V`/containers/${s}`,{...r,headers:ie([{Accept:"*/*"},r==null?void 0:r.headers])})}}Ec.Files=Ac;class Qg extends fe{create(s,r,n){const{include:a,...o}=r;return this._client.post(V`/conversations/${s}/items`,{query:{include:a},body:o,...n})}retrieve(s,r,n){const{conversation_id:a,...o}=r;return this._client.get(V`/conversations/${a}/items/${s}`,{query:o,...n})}list(s,r={},n){return this._client.getAPIList(V`/conversations/${s}/items`,zR,{query:r,...n})}delete(s,r,n){const{conversation_id:a}=r;return this._client.delete(V`/conversations/${a}/items/${s}`,n)}}class Tc extends fe{constructor(){super(...arguments),this.items=new Qg(this._client)}create(s,r){return this._client.post("/conversations",{body:s,...r})}retrieve(s,r){return this._client.get(V`/conversations/${s}`,r)}update(s,r,n){return this._client.post(V`/conversations/${s}`,{body:r,...n})}delete(s,r){return this._client.delete(V`/conversations/${s}`,r)}}Tc.Items=Qg;class Zg extends fe{create(s,r){const n=!!s.encoding_format;let a=n?s.encoding_format:"base64";n&&Ge(this._client).debug("embeddings/user defined encoding_format:",s.encoding_format);const o=this._client.post("/embeddings",{body:{...s,encoding_format:a},...r});return n?o:(Ge(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(i=>(i&&i.data&&i.data.forEach(l=>{const c=l.embedding;l.embedding=u_(c)}),i)))}}class eb extends fe{retrieve(s,r,n){const{eval_id:a,run_id:o}=r;return this._client.get(V`/evals/${a}/runs/${o}/output_items/${s}`,n)}list(s,r,n){const{eval_id:a,...o}=r;return this._client.getAPIList(V`/evals/${a}/runs/${s}/output_items`,ze,{query:o,...n})}}class Pc extends fe{constructor(){super(...arguments),this.outputItems=new eb(this._client)}create(s,r,n){return this._client.post(V`/evals/${s}/runs`,{body:r,...n})}retrieve(s,r,n){const{eval_id:a}=r;return this._client.get(V`/evals/${a}/runs/${s}`,n)}list(s,r={},n){return this._client.getAPIList(V`/evals/${s}/runs`,ze,{query:r,...n})}delete(s,r,n){const{eval_id:a}=r;return this._client.delete(V`/evals/${a}/runs/${s}`,n)}cancel(s,r,n){const{eval_id:a}=r;return this._client.post(V`/evals/${a}/runs/${s}`,n)}}Pc.OutputItems=eb;class Ic extends fe{constructor(){super(...arguments),this.runs=new Pc(this._client)}create(s,r){return this._client.post("/evals",{body:s,...r})}retrieve(s,r){return this._client.get(V`/evals/${s}`,r)}update(s,r,n){return this._client.post(V`/evals/${s}`,{body:r,...n})}list(s={},r){return this._client.getAPIList("/evals",ze,{query:s,...r})}delete(s,r){return this._client.delete(V`/evals/${s}`,r)}}Ic.Runs=Pc;let tb=class extends fe{create(s,r){return this._client.post("/files",Ks({body:s,...r},this._client))}retrieve(s,r){return this._client.get(V`/files/${s}`,r)}list(s={},r){return this._client.getAPIList("/files",ze,{query:s,...r})}delete(s,r){return this._client.delete(V`/files/${s}`,r)}content(s,r){return this._client.get(V`/files/${s}/content`,{...r,headers:ie([{Accept:"application/binary"},r==null?void 0:r.headers]),__binaryResponse:!0})}async waitForProcessing(s,{pollInterval:r=5e3,maxWait:n=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),o=Date.now();let i=await this.retrieve(s);for(;!i.status||!a.has(i.status);)if(await Ln(r),i=await this.retrieve(s),Date.now()-o>n)throw new vc({message:`Giving up on waiting for file ${s} to finish processing after ${n} milliseconds.`});return i}};class sb extends fe{}let rb=class extends fe{run(s,r){return this._client.post("/fine_tuning/alpha/graders/run",{body:s,...r})}validate(s,r){return this._client.post("/fine_tuning/alpha/graders/validate",{body:s,...r})}};class Dc extends fe{constructor(){super(...arguments),this.graders=new rb(this._client)}}Dc.Graders=rb;class nb extends fe{create(s,r,n){return this._client.getAPIList(V`/fine_tuning/checkpoints/${s}/permissions`,$o,{body:r,method:"post",...n})}retrieve(s,r={},n){return this._client.get(V`/fine_tuning/checkpoints/${s}/permissions`,{query:r,...n})}delete(s,r,n){const{fine_tuned_model_checkpoint:a}=r;return this._client.delete(V`/fine_tuning/checkpoints/${a}/permissions/${s}`,n)}}let Oc=class extends fe{constructor(){super(...arguments),this.permissions=new nb(this._client)}};Oc.Permissions=nb;class ab extends fe{list(s,r={},n){return this._client.getAPIList(V`/fine_tuning/jobs/${s}/checkpoints`,ze,{query:r,...n})}}class Mc extends fe{constructor(){super(...arguments),this.checkpoints=new ab(this._client)}create(s,r){return this._client.post("/fine_tuning/jobs",{body:s,...r})}retrieve(s,r){return this._client.get(V`/fine_tuning/jobs/${s}`,r)}list(s={},r){return this._client.getAPIList("/fine_tuning/jobs",ze,{query:s,...r})}cancel(s,r){return this._client.post(V`/fine_tuning/jobs/${s}/cancel`,r)}listEvents(s,r={},n){return this._client.getAPIList(V`/fine_tuning/jobs/${s}/events`,ze,{query:r,...n})}pause(s,r){return this._client.post(V`/fine_tuning/jobs/${s}/pause`,r)}resume(s,r){return this._client.post(V`/fine_tuning/jobs/${s}/resume`,r)}}Mc.Checkpoints=ab;class Dr extends fe{constructor(){super(...arguments),this.methods=new sb(this._client),this.jobs=new Mc(this._client),this.checkpoints=new Oc(this._client),this.alpha=new Dc(this._client)}}Dr.Methods=sb;Dr.Jobs=Mc;Dr.Checkpoints=Oc;Dr.Alpha=Dc;class ob extends fe{}class Lc extends fe{constructor(){super(...arguments),this.graderModels=new ob(this._client)}}Lc.GraderModels=ob;class ib extends fe{createVariation(s,r){return this._client.post("/images/variations",Ks({body:s,...r},this._client))}edit(s,r){return this._client.post("/images/edits",Ks({body:s,...r,stream:s.stream??!1},this._client))}generate(s,r){return this._client.post("/images/generations",{body:s,...r,stream:s.stream??!1})}}class lb extends fe{retrieve(s,r){return this._client.get(V`/models/${s}`,r)}list(s){return this._client.getAPIList("/models",$o,s)}delete(s,r){return this._client.delete(V`/models/${s}`,r)}}class cb extends fe{create(s,r){return this._client.post("/moderations",{body:s,...r})}}function m_(t,s){return!s||!f_(s)?{...t,output_parsed:null,output:t.output.map(r=>r.type==="function_call"?{...r,parsed_arguments:null}:r.type==="message"?{...r,content:r.content.map(n=>({...n,parsed:null}))}:r)}:db(t,s)}function db(t,s){const r=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:g_(s,a)};if(a.type==="message"){const o=a.content.map(i=>i.type==="output_text"?{...i,parsed:h_(s,i.text)}:i);return{...a,content:o}}return a}),n=Object.assign({},t,{output:r});return Object.getOwnPropertyDescriptor(t,"output_text")||hl(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const a of n.output)if(a.type==="message"){for(const o of a.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),n}function h_(t,s){var r,n,a,o;return((n=(r=t.text)==null?void 0:r.format)==null?void 0:n.type)!=="json_schema"?null:"$parseRaw"in((a=t.text)==null?void 0:a.format)?((o=t.text)==null?void 0:o.format).$parseRaw(s):JSON.parse(s)}function f_(t){var s;return!!wc((s=t.text)==null?void 0:s.format)}function x_(t){return(t==null?void 0:t.$brand)==="auto-parseable-tool"}function p_(t,s){return t.find(r=>r.type==="function"&&r.name===s)}function g_(t,s){const r=p_(t.tools??[],s.name);return{...s,...s,parsed_arguments:x_(r)?r.$parseRaw(s.arguments):r!=null&&r.strict?JSON.parse(s.arguments):null}}function hl(t){const s=[];for(const r of t.output)if(r.type==="message")for(const n of r.content)n.type==="output_text"&&s.push(n.text);t.output_text=s.join("")}var ir,aa,bs,oa,Eu,Tu,Pu,Iu;class Fc extends Sc{constructor(s){super(),ir.add(this),aa.set(this,void 0),bs.set(this,void 0),oa.set(this,void 0),xe(this,aa,s)}static createResponse(s,r,n){const a=new Fc(r);return a._run(()=>a._createOrRetrieveResponse(s,r,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(s,r,n){var l;const a=n==null?void 0:n.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),_(this,ir,"m",Eu).call(this);let o,i=null;"response_id"in r?(o=await s.responses.retrieve(r.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),i=r.starting_after??null):o=await s.responses.create({...r,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const c of o)_(this,ir,"m",Tu).call(this,c,i);if((l=o.controller.signal)!=null&&l.aborted)throw new St;return _(this,ir,"m",Pu).call(this)}[(aa=new WeakMap,bs=new WeakMap,oa=new WeakMap,ir=new WeakSet,Eu=function(){this.ended||xe(this,bs,void 0)},Tu=function(r,n){if(this.ended)return;const a=(i,l)=>{(n==null||l.sequence_number>n)&&this._emit(i,l)},o=_(this,ir,"m",Iu).call(this,r);switch(a("event",r),r.type){case"response.output_text.delta":{const i=o.output[r.output_index];if(!i)throw new he(`missing output at index ${r.output_index}`);if(i.type==="message"){const l=i.content[r.content_index];if(!l)throw new he(`missing content at index ${r.content_index}`);if(l.type!=="output_text")throw new he(`expected content to be 'output_text', got ${l.type}`);a("response.output_text.delta",{...r,snapshot:l.text})}break}case"response.function_call_arguments.delta":{const i=o.output[r.output_index];if(!i)throw new he(`missing output at index ${r.output_index}`);i.type==="function_call"&&a("response.function_call_arguments.delta",{...r,snapshot:i.arguments});break}default:a(r.type,r);break}},Pu=function(){if(this.ended)throw new he("stream has ended, this shouldn't happen");const r=_(this,bs,"f");if(!r)throw new he("request ended without sending any events");xe(this,bs,void 0);const n=b_(r,_(this,aa,"f"));return xe(this,oa,n),n},Iu=function(r){let n=_(this,bs,"f");if(!n){if(r.type!=="response.created")throw new he(`When snapshot hasn't been set yet, expected 'response.created' event, got ${r.type}`);return n=xe(this,bs,r.response),n}switch(r.type){case"response.output_item.added":{n.output.push(r.item);break}case"response.content_part.added":{const a=n.output[r.output_index];if(!a)throw new he(`missing output at index ${r.output_index}`);a.type==="message"&&a.content.push(r.part);break}case"response.output_text.delta":{const a=n.output[r.output_index];if(!a)throw new he(`missing output at index ${r.output_index}`);if(a.type==="message"){const o=a.content[r.content_index];if(!o)throw new he(`missing content at index ${r.content_index}`);if(o.type!=="output_text")throw new he(`expected content to be 'output_text', got ${o.type}`);o.text+=r.delta}break}case"response.function_call_arguments.delta":{const a=n.output[r.output_index];if(!a)throw new he(`missing output at index ${r.output_index}`);a.type==="function_call"&&(a.arguments+=r.delta);break}case"response.completed":{xe(this,bs,r.response);break}}return n},Symbol.asyncIterator)](){const s=[],r=[];let n=!1;return this.on("event",a=>{const o=r.shift();o?o.resolve(a):s.push(a)}),this.on("end",()=>{n=!0;for(const a of r)a.resolve(void 0);r.length=0}),this.on("abort",a=>{n=!0;for(const o of r)o.reject(a);r.length=0}),this.on("error",a=>{n=!0;for(const o of r)o.reject(a);r.length=0}),{next:async()=>s.length?{value:s.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((o,i)=>r.push({resolve:o,reject:i})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const s=_(this,oa,"f");if(!s)throw new he("stream ended without producing a ChatCompletion");return s}}function b_(t,s){return m_(t,s)}class ub extends fe{list(s,r={},n){return this._client.getAPIList(V`/responses/${s}/input_items`,ze,{query:r,...n})}}class $c extends fe{constructor(){super(...arguments),this.inputItems=new ub(this._client)}create(s,r){return this._client.post("/responses",{body:s,...r,stream:s.stream??!1})._thenUnwrap(n=>("object"in n&&n.object==="response"&&hl(n),n))}retrieve(s,r={},n){return this._client.get(V`/responses/${s}`,{query:r,...n,stream:(r==null?void 0:r.stream)??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&hl(a),a))}delete(s,r){return this._client.delete(V`/responses/${s}`,{...r,headers:ie([{Accept:"*/*"},r==null?void 0:r.headers])})}parse(s,r){return this._client.responses.create(s,r)._thenUnwrap(n=>db(n,s))}stream(s,r){return Fc.createResponse(this._client,s,r)}cancel(s,r){return this._client.post(V`/responses/${s}/cancel`,r)}}$c.InputItems=ub;class mb extends fe{create(s,r,n){return this._client.post(V`/uploads/${s}/parts`,Ks({body:r,...n},this._client))}}class Bc extends fe{constructor(){super(...arguments),this.parts=new mb(this._client)}create(s,r){return this._client.post("/uploads",{body:s,...r})}cancel(s,r){return this._client.post(V`/uploads/${s}/cancel`,r)}complete(s,r,n){return this._client.post(V`/uploads/${s}/complete`,{body:r,...n})}}Bc.Parts=mb;const v_=async t=>{const s=await Promise.allSettled(t),r=s.filter(a=>a.status==="rejected");if(r.length){for(const a of r)console.error(a.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const a of s)a.status==="fulfilled"&&n.push(a.value);return n};class hb extends fe{create(s,r,n){return this._client.post(V`/vector_stores/${s}/file_batches`,{body:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(s,r,n){const{vector_store_id:a}=r;return this._client.get(V`/vector_stores/${a}/file_batches/${s}`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}cancel(s,r,n){const{vector_store_id:a}=r;return this._client.post(V`/vector_stores/${a}/file_batches/${s}/cancel`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(s,r,n){const a=await this.create(s,r);return await this.poll(s,a.id,n)}listFiles(s,r,n){const{vector_store_id:a,...o}=r;return this._client.getAPIList(V`/vector_stores/${a}/file_batches/${s}/files`,ze,{query:o,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async poll(s,r,n){var o;const a=ie([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=n==null?void 0:n.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const{data:i,response:l}=await this.retrieve(r,{vector_store_id:s},{...n,headers:a}).withResponse();switch(i.status){case"in_progress":let c=5e3;if(n!=null&&n.pollIntervalMs)c=n.pollIntervalMs;else{const d=l.headers.get("openai-poll-after-ms");if(d){const u=parseInt(d);isNaN(u)||(c=u)}}await Ln(c);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(s,{files:r,fileIds:n=[]},a){if(r==null||r.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=(a==null?void 0:a.maxConcurrency)??5,i=Math.min(o,r.length),l=this._client,c=r.values(),d=[...n];async function u(x){for(let f of x){const b=await l.files.create({file:f,purpose:"assistants"},a);d.push(b.id)}}const h=Array(i).fill(c).map(u);return await v_(h),await this.createAndPoll(s,{file_ids:d})}}class fb extends fe{create(s,r,n){return this._client.post(V`/vector_stores/${s}/files`,{body:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}retrieve(s,r,n){const{vector_store_id:a}=r;return this._client.get(V`/vector_stores/${a}/files/${s}`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}update(s,r,n){const{vector_store_id:a,...o}=r;return this._client.post(V`/vector_stores/${a}/files/${s}`,{body:o,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(s,r={},n){return this._client.getAPIList(V`/vector_stores/${s}/files`,ze,{query:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}delete(s,r,n){const{vector_store_id:a}=r;return this._client.delete(V`/vector_stores/${a}/files/${s}`,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}async createAndPoll(s,r,n){const a=await this.create(s,r,n);return await this.poll(s,a.id,n)}async poll(s,r,n){var o;const a=ie([n==null?void 0:n.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":((o=n==null?void 0:n.pollIntervalMs)==null?void 0:o.toString())??void 0}]);for(;;){const i=await this.retrieve(r,{vector_store_id:s},{...n,headers:a}).withResponse(),l=i.data;switch(l.status){case"in_progress":let c=5e3;if(n!=null&&n.pollIntervalMs)c=n.pollIntervalMs;else{const d=i.response.headers.get("openai-poll-after-ms");if(d){const u=parseInt(d);isNaN(u)||(c=u)}}await Ln(c);break;case"failed":case"completed":return l}}}async upload(s,r,n){const a=await this._client.files.create({file:r,purpose:"assistants"},n);return this.create(s,{file_id:a.id},n)}async uploadAndPoll(s,r,n){const a=await this.upload(s,r,n);return await this.poll(s,a.id,n)}content(s,r,n){const{vector_store_id:a}=r;return this._client.getAPIList(V`/vector_stores/${a}/files/${s}/content`,$o,{...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}class zo extends fe{constructor(){super(...arguments),this.files=new fb(this._client),this.fileBatches=new hb(this._client)}create(s,r){return this._client.post("/vector_stores",{body:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}retrieve(s,r){return this._client.get(V`/vector_stores/${s}`,{...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}update(s,r,n){return this._client.post(V`/vector_stores/${s}`,{body:r,...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}list(s={},r){return this._client.getAPIList("/vector_stores",ze,{query:s,...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}delete(s,r){return this._client.delete(V`/vector_stores/${s}`,{...r,headers:ie([{"OpenAI-Beta":"assistants=v2"},r==null?void 0:r.headers])})}search(s,r,n){return this._client.getAPIList(V`/vector_stores/${s}/search`,$o,{body:r,method:"post",...n,headers:ie([{"OpenAI-Beta":"assistants=v2"},n==null?void 0:n.headers])})}}zo.Files=fb;zo.FileBatches=hb;var dr,xb,Na;class pb extends fe{constructor(){super(...arguments),dr.add(this)}async unwrap(s,r,n=this._client.webhookSecret,a=300){return await this.verifySignature(s,r,n,a),JSON.parse(s)}async verifySignature(s,r,n=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");_(this,dr,"m",xb).call(this,n);const o=ie([r]).values,i=_(this,dr,"m",Na).call(this,o,"webhook-signature"),l=_(this,dr,"m",Na).call(this,o,"webhook-timestamp"),c=_(this,dr,"m",Na).call(this,o,"webhook-id"),d=parseInt(l,10);if(isNaN(d))throw new Hr("Invalid webhook timestamp format");const u=Math.floor(Date.now()/1e3);if(u-d>a)throw new Hr("Webhook timestamp is too old");if(d>u+a)throw new Hr("Webhook timestamp is too new");const h=i.split(" ").map(g=>g.startsWith("v1,")?g.substring(3):g),x=n.startsWith("whsec_")?Buffer.from(n.replace("whsec_",""),"base64"):Buffer.from(n,"utf-8"),f=c?`${c}.${l}.${s}`:`${l}.${s}`,b=await crypto.subtle.importKey("raw",x,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const g of h)try{const p=Buffer.from(g,"base64");if(await crypto.subtle.verify("HMAC",b,p,new TextEncoder().encode(f)))return}catch{continue}throw new Hr("The given webhook signature does not match the expected signature")}}dr=new WeakSet,xb=function(s){if(typeof s!="string"||s.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},Na=function(s,r){if(!s)throw new Error("Headers are required");const n=s.get(r);if(n==null)throw new Error(`Missing required header: ${r}`);return n};var fl,Uc,Sa,gb;class Se{constructor({baseURL:s=or("OPENAI_BASE_URL"),apiKey:r=or("OPENAI_API_KEY"),organization:n=or("OPENAI_ORG_ID")??null,project:a=or("OPENAI_PROJECT_ID")??null,webhookSecret:o=or("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(fl.add(this),Sa.set(this,void 0),this.completions=new Yg(this),this.chat=new Rc(this),this.embeddings=new Zg(this),this.files=new tb(this),this.images=new ib(this),this.audio=new $n(this),this.moderations=new cb(this),this.models=new lb(this),this.fineTuning=new Dr(this),this.graders=new Lc(this),this.vectorStores=new zo(this),this.webhooks=new pb(this),this.beta=new Bn(this),this.batches=new Hg(this),this.uploads=new Bc(this),this.responses=new $c(this),this.conversations=new Tc(this),this.evals=new Ic(this),this.containers=new Ec(this),r===void 0)throw new he("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const l={apiKey:r,organization:n,project:a,webhookSecret:o,...i,baseURL:s||"https://api.openai.com/v1"};if(!l.dangerouslyAllowBrowser&&vR())throw new he(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=l.baseURL,this.timeout=l.timeout??Uc.DEFAULT_TIMEOUT,this.logger=l.logger??console;const c="warn";this.logLevel=c,this.logLevel=gu(l.logLevel,"ClientOptions.logLevel",this)??gu(or("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??c,this.fetchOptions=l.fetchOptions,this.maxRetries=l.maxRetries??2,this.fetch=l.fetch??SR(),xe(this,Sa,CR),this._options=l,this.apiKey=r,this.organization=n,this.project=a,this.webhookSecret=o}withOptions(s){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...s})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:s,nulls:r}){}async authHeaders(s){return ie([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(s){return PR(s,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${lr}`}defaultIdempotencyKey(){return`stainless-node-retry-${Vp()}`}makeStatusError(s,r,n,a){return Ye.generate(s,r,n,a)}buildURL(s,r,n){const a=!_(this,fl,"m",gb).call(this)&&n||this.baseURL,o=fR(s)?new URL(s):new URL(a+(a.endsWith("/")&&s.startsWith("/")?s.slice(1):s)),i=this.defaultQuery();return xR(i)||(r={...i,...r}),typeof r=="object"&&r&&!Array.isArray(r)&&(o.search=this.stringifyQuery(r)),o.toString()}async prepareOptions(s){}async prepareRequest(s,{url:r,options:n}){}get(s,r){return this.methodRequest("get",s,r)}post(s,r){return this.methodRequest("post",s,r)}patch(s,r){return this.methodRequest("patch",s,r)}put(s,r){return this.methodRequest("put",s,r)}delete(s,r){return this.methodRequest("delete",s,r)}methodRequest(s,r,n){return this.request(Promise.resolve(n).then(a=>({method:s,path:r,...a})))}request(s,r=null){return new Fo(this,this.makeRequest(s,r,void 0))}async makeRequest(s,r,n){var y,v;const a=await s,o=a.maxRetries??this.maxRetries;r==null&&(r=o),await this.prepareOptions(a);const{req:i,url:l,timeout:c}=await this.buildRequest(a,{retryCount:o-r});await this.prepareRequest(i,{url:l,options:a});const d="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=n===void 0?"":`, retryOf: ${n}`,h=Date.now();if(Ge(this).debug(`[${d}] sending request`,Is({retryOfRequestLogID:n,method:a.method,url:l,options:a,headers:i.headers})),(y=a.signal)!=null&&y.aborted)throw new St;const x=new AbortController,f=await this.fetchWithTimeout(l,i,c,x).catch(rl),b=Date.now();if(f instanceof Error){const j=`retrying, ${r} attempts remaining`;if((v=a.signal)!=null&&v.aborted)throw new St;const w=sl(f)||/timed? ?out/i.test(String(f)+("cause"in f?String(f.cause):""));if(r)return Ge(this).info(`[${d}] connection ${w?"timed out":"failed"} - ${j}`),Ge(this).debug(`[${d}] connection ${w?"timed out":"failed"} (${j})`,Is({retryOfRequestLogID:n,url:l,durationMs:b-h,message:f.message})),this.retryRequest(a,r,n??d);throw Ge(this).info(`[${d}] connection ${w?"timed out":"failed"} - error; no more retries left`),Ge(this).debug(`[${d}] connection ${w?"timed out":"failed"} (error; no more retries left)`,Is({retryOfRequestLogID:n,url:l,durationMs:b-h,message:f.message})),w?new vc:new Mo({cause:f})}const g=[...f.headers.entries()].filter(([j])=>j==="x-request-id").map(([j,w])=>", "+j+": "+JSON.stringify(w)).join(""),p=`[${d}${u}${g}] ${i.method} ${l} ${f.ok?"succeeded":"failed"} with status ${f.status} in ${b-h}ms`;if(!f.ok){const j=await this.shouldRetry(f);if(r&&j){const M=`retrying, ${r} attempts remaining`;return await kR(f.body),Ge(this).info(`${p} - ${M}`),Ge(this).debug(`[${d}] response error (${M})`,Is({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:b-h})),this.retryRequest(a,r,n??d,f.headers)}const w=j?"error; no more retries left":"error; not retryable";Ge(this).info(`${p} - ${w}`);const k=await f.text().catch(M=>rl(M).message),R=bR(k),C=R?void 0:k;throw Ge(this).debug(`[${d}] response error (${w})`,Is({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,message:C,durationMs:Date.now()-h})),this.makeStatusError(f.status,R,C,f.headers)}return Ge(this).info(p),Ge(this).debug(`[${d}] response start`,Is({retryOfRequestLogID:n,url:f.url,status:f.status,headers:f.headers,durationMs:b-h})),{response:f,options:a,controller:x,requestLogID:d,retryOfRequestLogID:n,startTime:h}}getAPIList(s,r,n){return this.requestAPIList(r,{method:"get",path:s,...n})}requestAPIList(s,r){const n=this.makeRequest(r,null,void 0);return new UR(this,n,s)}async fetchWithTimeout(s,r,n,a){const{signal:o,method:i,...l}=r||{};o&&o.addEventListener("abort",()=>a.abort());const c=setTimeout(()=>a.abort(),n),d=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,u={signal:a.signal,...d?{duplex:"half"}:{},method:"GET",...l};i&&(u.method=i.toUpperCase());try{return await this.fetch.call(void 0,s,u)}finally{clearTimeout(c)}}async shouldRetry(s){const r=s.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:s.status===408||s.status===409||s.status===429||s.status>=500}async retryRequest(s,r,n,a){let o;const i=a==null?void 0:a.get("retry-after-ms");if(i){const c=parseFloat(i);Number.isNaN(c)||(o=c)}const l=a==null?void 0:a.get("retry-after");if(l&&!o){const c=parseFloat(l);Number.isNaN(c)?o=Date.parse(l)-Date.now():o=c*1e3}if(!(o&&0<=o&&o<60*1e3)){const c=s.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(r,c)}return await Ln(o),this.makeRequest(s,r-1,n)}calculateDefaultRetryTimeoutMillis(s,r){const o=r-s,i=Math.min(.5*Math.pow(2,o),8),l=1-Math.random()*.25;return i*l*1e3}async buildRequest(s,{retryCount:r=0}={}){const n={...s},{method:a,path:o,query:i,defaultBaseURL:l}=n,c=this.buildURL(o,i,l);"timeout"in n&&gR("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const{bodyHeaders:d,body:u}=this.buildBody({options:n}),h=await this.buildHeaders({options:s,method:a,bodyHeaders:d,retryCount:r});return{req:{method:a,headers:h,...n.signal&&{signal:n.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...n.fetchOptions??{}},url:c,timeout:n.timeout}}async buildHeaders({options:s,method:r,bodyHeaders:n,retryCount:a}){let o={};this.idempotencyHeader&&r!=="get"&&(s.idempotencyKey||(s.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=s.idempotencyKey);const i=ie([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...s.timeout?{"X-Stainless-Timeout":String(Math.trunc(s.timeout/1e3))}:{},...NR(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(s),this._options.defaultHeaders,n,s.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:s,headers:r}}){if(!s)return{bodyHeaders:void 0,body:void 0};const n=ie([r]);return ArrayBuffer.isView(s)||s instanceof ArrayBuffer||s instanceof DataView||typeof s=="string"&&n.values.has("content-type")||s instanceof Blob||s instanceof FormData||s instanceof URLSearchParams||globalThis.ReadableStream&&s instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:s}:typeof s=="object"&&(Symbol.asyncIterator in s||Symbol.iterator in s&&"next"in s&&typeof s.next=="function")?{bodyHeaders:void 0,body:og(s)}:_(this,Sa,"f").call(this,{body:s,headers:n})}}Uc=Se,Sa=new WeakMap,fl=new WeakSet,gb=function(){return this.baseURL!=="https://api.openai.com/v1"};Se.OpenAI=Uc;Se.DEFAULT_TIMEOUT=6e5;Se.OpenAIError=he;Se.APIError=Ye;Se.APIConnectionError=Mo;Se.APIConnectionTimeoutError=vc;Se.APIUserAbortError=St;Se.NotFoundError=Jp;Se.ConflictError=Qp;Se.RateLimitError=eg;Se.BadRequestError=Gp;Se.AuthenticationError=Xp;Se.InternalServerError=tg;Se.PermissionDeniedError=Yp;Se.UnprocessableEntityError=Zp;Se.InvalidWebhookSignatureError=Hr;Se.toFile=GR;Se.Completions=Yg;Se.Chat=Rc;Se.Embeddings=Zg;Se.Files=tb;Se.Images=ib;Se.Audio=$n;Se.Moderations=cb;Se.Models=lb;Se.FineTuning=Dr;Se.Graders=Lc;Se.VectorStores=zo;Se.Webhooks=pb;Se.Beta=Bn;Se.Batches=Hg;Se.Uploads=Bc;Se.Responses=$c;Se.Conversations=Tc;Se.Evals=Ic;Se.Containers=Ec;const y_=new Se({apiKey:"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",dangerouslyAllowBrowser:!0});class bb{static async generateInsights(s){var r,n;try{const a=this.buildPrompt(s),i=(n=(r=(await y_.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a business analytics expert specializing in WhatsApp bot performance and e-commerce metrics. Provide actionable insights in Indonesian language with a professional yet friendly tone."},{role:"user",content:a}],max_tokens:1e3,temperature:.7})).choices[0])==null?void 0:r.message)==null?void 0:n.content;if(!i)throw new Error("No response from OpenAI");return this.parseInsightsResponse(i,s)}catch(a){return console.error("Error generating AI insights:",a),this.getFallbackInsights(s)}}static buildPrompt(s){return`
    Analyze the following WhatsApp bot performance data and provide 4-5 actionable business insights:

    Current Day Performance:
    - Transaksi Hari Ini: ${s.transaksiHariIni}
    - Pendapatan Hari Ini: ${s.pendapatanHariIni}

    Overall Performance:
    - Total Transaksi: ${s.totalTransaksi}
    - Total Pendapatan: ${s.totalPendapatan}

    Please provide insights in the following format:
    1. Growth Opportunity () - Focus on expansion and scaling
    2. High Engagement () - Highlight strong performance areas
    3. Optimization Tip () - Suggest improvements
    4. Data Quality () - Comment on data completeness
    5. Additional insight if relevant

    Each insight should be:
    - Actionable and specific
    - Written in Indonesian
    - Include relevant metrics
    - Suggest next steps
    - Be concise but informative

    Also provide:
    - A brief summary of the overall performance
    - 2-3 specific next actions the business should take
    `}static parseInsightsResponse(s,r){return{insights:[{type:"growth",title:" Growth Opportunity",description:`Transaksi hari ini: ${r.transaksiHariIni} dengan pendapatan ${this.formatCurrency(r.pendapatanHariIni)}. ${s.includes("pertumbuhan")?"Pertimbangkan untuk memperluas layanan.":"Identifikasi pola yang berhasil dan replikasi strategi ini."}`,emoji:"",priority:"high",actionable:!0,recommendation:"Analisis pola transaksi yang berhasil dan replikasi strategi marketing"},{type:"engagement",title:" High Engagement",description:`Total transaksi: ${r.totalTransaksi} dengan total pendapatan ${this.formatCurrency(r.totalPendapatan)}. Ini menunjukkan engagement yang kuat dari pengguna.`,emoji:"",priority:"medium",actionable:!1},{type:"optimization",title:" Optimization Tip",description:s.includes("optimasi")?s:"Analisis data menunjukkan peluang untuk optimasi. Pertimbangkan untuk menganalisis pola waktu transaksi dan meningkatkan responsivitas bot.",emoji:"",priority:"medium",actionable:!0,recommendation:"Implementasi fitur auto-reply untuk waktu puncak transaksi"},{type:"opportunity",title:" Data Quality",description:`Data collection Anda komprehensif dengan ${r.totalTransaksi} total transaksi tercatat. Ini memberikan visibilitas yang sangat baik ke dalam pola perilaku pengguna.`,emoji:"",priority:"low",actionable:!1}],summary:`Performa WhatsApp bot menunjukkan ${r.transaksiHariIni>0?"pertumbuhan positif":"stabilitas"} dengan ${r.transaksiHariIni} transaksi hari ini.`,nextActions:["Analisis pola transaksi yang berhasil","Implementasi fitur auto-reply untuk waktu puncak","Review dan optimasi alur konversi"]}}static getFallbackInsights(s){return{insights:[{type:"growth",title:" Growth Opportunity",description:`Transaksi hari ini: ${s.transaksiHariIni} dengan pendapatan ${this.formatCurrency(s.pendapatanHariIni)}. Pertimbangkan untuk memperluas layanan untuk mempertahankan pertumbuhan ini.`,emoji:"",priority:"high",actionable:!0,recommendation:"Analisis pola transaksi yang berhasil dan replikasi strategi"},{type:"engagement",title:" High Engagement",description:`Total transaksi: ${s.totalTransaksi} dengan total pendapatan ${this.formatCurrency(s.totalPendapatan)}. Ini menunjukkan engagement yang kuat dari pengguna.`,emoji:"",priority:"medium",actionable:!1},{type:"optimization",title:" Optimization Tip",description:"Peak transaction times appear to be during certain hours. Consider automated messaging during these periods to maximize conversions.",emoji:"",priority:"medium",actionable:!0,recommendation:"Implementasi fitur auto-reply untuk waktu puncak"},{type:"opportunity",title:" Data Quality",description:`Data collection Anda komprehensif dengan ${s.totalTransaksi} total transaksi tercatat. Ini memberikan visibilitas yang sangat baik ke dalam pola perilaku pengguna.`,emoji:"",priority:"low",actionable:!1}],summary:`Performa WhatsApp bot stabil dengan ${s.transaksiHariIni} transaksi hari ini.`,nextActions:["Analisis pola transaksi yang berhasil","Implementasi fitur auto-reply untuk waktu puncak","Review dan optimasi alur konversi"]}}static formatCurrency(s){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s)}}function j_(t){return Ne({queryKey:["ai-insights",t],queryFn:()=>bb.generateInsights(t),enabled:!!t.transaksiHariIni&&!!t.totalTransaksi,staleTime:1e3*60*60*8,gcTime:1e3*60*60*24,retry:2,retryDelay:1e3})}function w_(t){const{data:s,isLoading:r,error:n,dataUpdatedAt:a}=j_(t),o=s||bb.getFallbackInsights(t),i=1e3*60*60*8,l=Date.now(),c=new Date(a||l),u=l-a>i?"stale":"fresh";return{insights:o,isLoading:r,error:n,hasAIInsights:!!s,lastUpdated:c,cacheStatus:u}}const N_={high:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",low:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"},S_={growth:$e,engagement:_a,optimization:ji,warning:dn,opportunity:ut},k_={growth:"border-l-primary text-primary",engagement:"border-l-success text-success",optimization:"border-l-purple-500 text-purple-600 dark:text-purple-400",warning:"border-l-destructive text-destructive",opportunity:"border-l-info text-info"};function C_({insights:t,isLoading:s,hasAIInsights:r,onRefresh:n,lastUpdated:a,cacheStatus:o}){return s?e.jsxs(N,{className:"shadow-card border-0 bg-card/50 backdrop-blur-sm",children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"}),e.jsx(F,{children:"AI-Powered Insights"})]}),e.jsx(X,{children:"Generating intelligent insights from your data..."})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(i=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full"})]},i))})})]}):e.jsxs(N,{className:"shadow-card border-0 bg-card/50 backdrop-blur-sm",children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Yc,{className:"h-5 w-5 text-primary"}),e.jsx(F,{children:"AI-Powered Insights"}),r&&e.jsx(re,{variant:"secondary",className:"text-xs",children:"AI Generated"})]}),n&&o==="stale"&&e.jsx(Z,{variant:"outline",size:"sm",onClick:n,className:"h-8 px-3",children:"Refresh AI Insights"})]}),e.jsxs(X,{children:[r?"Intelligent analysis powered by OpenAI":"Fallback insights based on your data",a&&e.jsxs("div",{className:"mt-2 text-xs text-muted-foreground",children:["Last updated: ",a.toLocaleString("id-ID"),o&&e.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${o==="fresh"?"bg-green-100 text-green-800":o==="stale"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:o==="fresh"?" Fresh":o==="stale"?" Stale":" Expired"})]})]})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-secondary rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:" Performance Summary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.summary})]}),e.jsx("div",{className:"space-y-4",children:t.insights.map((i,l)=>{const c=S_[i.type]||Yc;return e.jsxs("div",{className:`p-4 bg-gradient-secondary rounded-lg border-l-4 ${k_[i.type]}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{className:"h-4 w-4"}),e.jsx("h4",{className:"font-semibold",children:i.title})]}),e.jsx(re,{variant:"secondary",className:`text-xs ${N_[i.priority]}`,children:i.priority})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:i.description}),i.actionable&&i.recommendation&&e.jsxs("div",{className:"bg-accent/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-primary mb-1",children:" Recommendation:"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.recommendation})]})]},l)})}),e.jsxs("div",{className:"p-4 bg-gradient-secondary rounded-lg border-l-4 border-info",children:[e.jsx("h4",{className:"font-semibold text-info mb-3",children:" Next Actions"}),e.jsx("div",{className:"space-y-2",children:t.nextActions.map((i,l)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-info rounded-full"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i})]},l))})]}),r&&e.jsx("div",{className:"p-3 bg-muted/30 rounded-lg border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Cache Status:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full ${o==="fresh"?"bg-green-100 text-green-800":o==="stale"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:o==="fresh"?" Fresh":o==="stale"?" Stale":" Expired"}),e.jsx("span",{children:" Updates every 8 hours"})]})]})})]})})]})}function R_({hasAPIKey:t,isConnected:s,isLoading:r,onConfigure:n}){return r?e.jsx(N,{className:"border-dashed",children:e.jsx(L,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),e.jsx(F,{className:"text-sm",children:"Checking AI Status..."})]})})}):e.jsxs(N,{className:`border-dashed ${t&&s?"border-green-200":"border-orange-200"}`,children:[e.jsxs(L,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&s?e.jsx(_a,{className:"h-4 w-4 text-green-600"}):e.jsx(dn,{className:"h-4 w-4 text-orange-600"}),e.jsx(F,{className:"text-sm",children:"AI Integration Status"})]}),e.jsx(re,{variant:t&&s?"default":"secondary",className:t&&s?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:t&&s?"Connected":"Not Configured"})]}),e.jsx(X,{className:"text-xs",children:t&&s?"OpenAI API is connected and ready to generate insights":"Configure OpenAI API to enable AI-powered insights"})]}),e.jsx(S,{className:"pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(Zb,{className:"h-3 w-3"}),e.jsx("span",{children:"API Key"})]}),e.jsx(re,{variant:t?"default":"secondary",className:"text-xs",children:t?"Configured":"Missing"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(Vu,{className:"h-3 w-3"}),e.jsx("span",{children:"Connection"})]}),e.jsx(re,{variant:s?"default":"secondary",className:"text-xs",children:s?"Active":"Inactive"})]}),(!t||!s)&&n&&e.jsx(Z,{variant:"outline",size:"sm",onClick:n,className:"w-full mt-2",children:"Configure AI Integration"})]})})]})}function __(){var D,A,Q,ee;const{data:t,isLoading:s,error:r}=Ne({queryKey:["dashboard-overview"],queryFn:ue.getOverview,retry:1,retryDelay:1e3}),{data:n,isLoading:a,error:o}=Ne({queryKey:["user-activity"],queryFn:ue.getEnhancedUserActivity,retry:1,retryDelay:1e3}),{data:i,isLoading:l,error:c}=Ne({queryKey:["user-stats"],queryFn:ue.getUserStats,retry:1,retryDelay:1e3}),{insights:d,isLoading:u,hasAIInsights:h,lastUpdated:x,cacheStatus:f}=w_({transaksiHariIni:(t==null?void 0:t.transaksiHariIni)||0,pendapatanHariIni:(t==null?void 0:t.pendapatanHariIni)||0,totalTransaksi:(t==null?void 0:t.totalTransaksi)||0,totalPendapatan:(t==null?void 0:t.totalPendapatan)||0,userActivity:(D=n==null?void 0:n.activityTrends)==null?void 0:D.dailyActive,dailyRevenue:(A=t==null?void 0:t.chartData)==null?void 0:A.daily}),b=d||{insights:[],summary:"Loading insights...",nextActions:[]},g=()=>{window.location.reload()},[p,y]=m.useState(null);m.useEffect(()=>{const T=()=>{const H=new Date,ne=new Date(new Intl.DateTimeFormat("en-US",{timeZone:"Asia/Jakarta",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(H).replace(/(\d{2})\/(\d{2})\/(\d{4}), (\d{2}):(\d{2}):(\d{2})/,"$3-$1-$2T$4:$5:$6")),U=[6,18],le=[];for(const ae of U){const de=new Date(ne);de.setHours(ae,0,0,0),de<=ne&&de.setDate(de.getDate()+1),le.push(de)}const ce=le.sort((ae,de)=>ae.getTime()-de.getTime())[0].getTime()-ne.getTime();return new Date(H.getTime()+ce)},se=(()=>{const H=T();return y(H),setTimeout(()=>{g()},Math.max(1e3,H.getTime()-Date.now()))})();return()=>clearTimeout(se)},[]);const v=T=>T?new Intl.DateTimeFormat("id-ID",{timeZone:"Asia/Jakarta",weekday:"long",day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}).format(T):"",j=T=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(T),w=(Q=t==null?void 0:t.chartData)!=null&&Q.daily?t.chartData.daily.map(T=>({date:T.date,revenue:T.pendapatan,transactions:T.transaksi})):[],k=(ee=n==null?void 0:n.activityTrends)!=null&&ee.dailyActive?n.activityTrends.dailyActive.map((T,Y)=>({day:`Day ${Y+1}`,active:T})):[],R=t?[{name:"Total Transaksi",value:t.totalTransaksi||0,fill:"hsl(var(--primary))"},{name:"Transaksi Hari Ini",value:t.transaksiHariIni||0,fill:"hsl(var(--primary)/0.6)"}]:[],C=(t==null?void 0:t.totalPendapatan)||0,E=(t==null?void 0:t.pendapatanHariIni)||0,M=C>0?E/C*100:0,[B,q]=m.useState("30d"),I=m.useMemo(()=>{if(!(w!=null&&w.length))return[];if(B==="all")return w;const T=B==="7d"?7:B==="30d"?30:90;return w.slice(-T)},[w,B]),te=m.useMemo(()=>{if(!I.length)return 0;const T=I.length,Y=I.reduce((ae,de)=>ae+de.revenue,0),se=I.reduce((ae,de)=>ae+de.transactions,0),H=Y/T,ne=se/T,U=I.reduce((ae,de)=>ae+(de.revenue-H)*(de.transactions-ne),0),le=Math.sqrt(I.reduce((ae,de)=>ae+Math.pow(de.revenue-H,2),0)),je=Math.sqrt(I.reduce((ae,de)=>ae+Math.pow(de.transactions-ne,2),0)),ce=le*je||1;return U/ce},[I]),W=m.useMemo(()=>{if(!I.length)return[];const T=I.map(H=>H.revenue),Y=T.reduce((H,ne)=>H+ne,0)/T.length,se=Math.sqrt(T.reduce((H,ne)=>H+Math.pow(ne-Y,2),0)/T.length)||1;return I.map(H=>({...H,z:(H.revenue-Y)/se})).filter(H=>Math.abs(H.z)>=2).map(H=>({date:H.date,revenue:H.revenue,z:Number(H.z.toFixed(2))}))},[I]),z=m.useMemo(()=>Math.max(1,...R.map(T=>T.value)),[R]),K=m.useMemo(()=>R.some((T,Y)=>Y>0&&T.value>R[Y-1].value),[R]);return s||a||l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading analytics..."})]})}):r||o||c?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-destructive/5 rounded-2xl border border-destructive/20",children:[e.jsx("h3",{className:"text-lg font-bold text-destructive mb-2",children:"Failed to load analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:(r==null?void 0:r.message)||(o==null?void 0:o.message)||(c==null?void 0:c.message)||"Please check your API connection"}),e.jsx(Z,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})}):e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Advanced Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Deep insights into your WhatsApp bot performance and user behavior"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(re,{variant:"outline",className:"bg-background/50 backdrop-blur-sm",children:[e.jsx(ji,{className:"mr-1 h-3 w-3 text-yellow-500"}),"AI Powered"]}),e.jsxs(re,{variant:"outline",className:"bg-background/50 backdrop-blur-sm",children:["Next run: ",v(p)]})]})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-1",children:e.jsx(R_,{hasAPIKey:!0,isConnected:h,isLoading:u,onConfigure:()=>{alert("Please add VITE_OPENAI_API_KEY to your .env file")}})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transaksi Hari Ini"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(t==null?void 0:t.transaksiHariIni)||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Hari ini"})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:e.jsx($e,{className:"h-6 w-6 text-blue-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pendapatan Hari Ini"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:j((t==null?void 0:t.pendapatanHariIni)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Hari ini"})]}),e.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:e.jsx(ft,{className:"h-6 w-6 text-emerald-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Transaksi"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:(t==null?void 0:t.totalTransaksi)||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lifetime"})]}),e.jsx("div",{className:"p-3 bg-purple-500/10 rounded-xl",children:e.jsx(Ve,{className:"h-6 w-6 text-purple-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Pendapatan"}),e.jsx("h3",{className:"text-2xl font-bold mt-2 text-foreground",children:j((t==null?void 0:t.totalPendapatan)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lifetime"})]}),e.jsx("div",{className:"p-3 bg-orange-500/10 rounded-xl",children:e.jsx(Ss,{className:"h-6 w-6 text-orange-500"})})]})})})]}),e.jsxs(ds,{defaultValue:"performance",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Jt,{className:"bg-background/50 backdrop-blur-sm p-1 border border-border/50 rounded-xl",children:[e.jsxs(Ae,{value:"performance",className:"rounded-lg data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[e.jsx(ev,{className:"mr-2 h-4 w-4"}),"Performance"]}),e.jsxs(Ae,{value:"insights",className:"rounded-lg data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[e.jsx(ji,{className:"mr-2 h-4 w-4"}),"AI Insights"]}),e.jsxs(Ae,{value:"diagnostics",className:"rounded-lg data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[e.jsx(ft,{className:"mr-2 h-4 w-4"}),"Diagnostics"]})]}),e.jsx(ds,{value:B,onValueChange:T=>q(T),className:"hidden md:block",children:e.jsxs(Jt,{className:"bg-background/50 backdrop-blur-sm p-1 border border-border/50 rounded-xl",children:[e.jsx(Ae,{value:"7d",className:"rounded-lg",children:"7d"}),e.jsx(Ae,{value:"30d",className:"rounded-lg",children:"30d"}),e.jsx(Ae,{value:"90d",className:"rounded-lg",children:"90d"}),e.jsx(Ae,{value:"all",className:"rounded-lg",children:"All"})]})})]}),e.jsxs(Pe,{value:"performance",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Revenue Trend Analysis"}),e.jsx(X,{children:"Daily revenue patterns with trend line"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(jn,{data:I,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(Me,{axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:T=>new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(T)}),e.jsx(_e,{formatter:T=>[j(T),"Revenue"],contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx(is,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:3,fillOpacity:1,fill:"url(#revenueGradient)",activeDot:{r:6,strokeWidth:0}})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"User Activity Trends"}),e.jsx(X,{children:"Daily active user patterns"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(rn,{data:k.slice(-I.length||void 0),margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"day",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(Me,{axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(_e,{formatter:T=>[T.toLocaleString(),"Active Users"],contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx(as,{type:"monotone",dataKey:"active",stroke:"hsl(var(--chart-2))",strokeWidth:3,dot:{fill:"hsl(var(--chart-2))",strokeWidth:2,r:4},activeDot:{r:6,strokeWidth:0}})]})})})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(F,{children:"User Journey Funnel"}),e.jsx(X,{children:"Conversion funnel analysis"})]}),K&&e.jsx(re,{variant:"destructive",className:"animate-pulse",children:"Anomaly Detected"})]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-6",children:R.map((T,Y)=>{var se;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:T.name}),e.jsx("span",{className:"text-sm font-bold text-foreground",children:T.value.toLocaleString()})]}),e.jsx("div",{className:"w-full bg-muted/50 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full transition-all duration-500 ease-out",style:{width:`${T.value/z*100}%`,backgroundColor:T.fill}})}),Y>0&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1.5 flex items-center gap-1",children:[e.jsx(br,{className:"h-3 w-3"}),(T.value/(((se=R[Y-1])==null?void 0:se.value)||1)*100).toFixed(1),"% conversion rate"]})]},T.name)})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Revenue Overview"}),e.jsx(X,{children:"Comparison: Total vs Today"})]}),e.jsx(S,{children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Pendapatan"}),e.jsx("span",{className:"text-sm font-bold text-foreground",children:j(C)})]}),e.jsx("div",{className:"w-full bg-muted/50 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all duration-500",style:{width:"100%"}})})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Pendapatan Hari Ini"}),e.jsx("span",{className:"text-sm font-bold text-foreground",children:j(E)})]}),e.jsx("div",{className:"w-full bg-muted/50 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all duration-500",style:{width:`${Math.min(100,E/(C||1)*100)}%`}})}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-2 font-medium",children:[M.toFixed(1),"% of total"]})]})]})})]})]})]}),e.jsx(Pe,{value:"insights",className:"space-y-6",children:e.jsx(C_,{insights:b,isLoading:u,hasAIInsights:h,lastUpdated:x,cacheStatus:f,onRefresh:g})}),e.jsx(Pe,{value:"diagnostics",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Correlation Analysis"}),e.jsx(X,{children:"Revenue vs Transactions Relationship"})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-4xl font-bold text-primary",children:te.toFixed(2)}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Pearson Correlation Coefficient (r)"})]}),e.jsx("div",{className:"flex-1",children:e.jsx(re,{variant:te>.6?"default":te>.3?"secondary":"outline",className:"text-sm px-3 py-1",children:te>.6?"Strong Correlation":te>.3?"Moderate Correlation":"Weak Correlation"})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-4 leading-relaxed",children:["A higher correlation indicates that transaction volume is a strong predictor of revenue.",te>.6?" Currently, revenue closely follows transaction volume.":" Currently, there is some variance between transaction count and revenue."]})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Anomaly Detection"}),e.jsx(X,{children:"Outlier detection based on z-score (|z|  2)"})]}),e.jsx(S,{children:W.length>0?e.jsx("div",{className:"space-y-3",children:W.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-destructive/10 border border-destructive/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ht,{className:"h-4 w-4 text-destructive"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:T.date})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold text-foreground",children:j(T.revenue)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["z-score: ",T.z]})]})]},T.date))}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-500/10 flex items-center justify-center mb-3",children:e.jsx(jl,{className:"h-6 w-6 text-emerald-500"})}),e.jsx("p",{className:"text-foreground font-medium",children:"No Anomalies Detected"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Revenue patterns are within expected ranges."})]})})]})]})})]})]})}function A_(){var i,l,c;const{reffId:t}=xl(),s=yn(),{data:r,isLoading:n,error:a}=Ne({queryKey:["ref-detail",t],queryFn:()=>ue.searchTransaction(t||""),enabled:!!t});if(n)return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Memuat data reference ID..."})]})})});if(a||!r)return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsxs("div",{className:"p-6",children:[e.jsxs(Z,{variant:"ghost",className:"mb-4 text-gray-400 hover:bg-gray-700 hover:text-white",onClick:()=>s(-1),children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"})," Kembali"]}),e.jsx("p",{className:"text-red-400",children:"Gagal memuat detail reference ID."})]})});const o=r.reffId;return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Z,{variant:"ghost",size:"sm",onClick:()=>s(-1),className:"text-gray-400 hover:bg-gray-700 hover:text-white",children:[e.jsx(Ca,{className:"h-4 w-4 mr-2"})," Back"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-white",children:"Reference ID"}),e.jsx("p",{className:"text-gray-400",children:"Detail referensi transaksi"})]})]})})}),e.jsx("div",{className:"p-6 space-y-6",children:e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:o}),e.jsx(X,{className:"text-gray-400",children:"Informasi transaksi"})]}),e.jsxs(S,{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"User:"})," ",e.jsx("span",{className:"text-white",children:r.user})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Produk:"})," ",e.jsxs("span",{className:"text-white",children:[r.produk," (",r.idProduk,")"]})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Tanggal:"})," ",e.jsx("span",{className:"text-white",children:new Date(r.tanggal).toLocaleString()})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Metode:"})," ",e.jsx("span",{className:"text-white",children:r.metodeBayar||r.payment_method})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Harga:"})," ",e.jsx("span",{className:"text-white",children:(i=r.harga)==null?void 0:i.toLocaleString("id-ID")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Jumlah:"})," ",e.jsx("span",{className:"text-white",children:r.jumlah})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Total:"})," ",e.jsx("span",{className:"text-white",children:(l=r.totalBayar)==null?void 0:l.toLocaleString("id-ID")})]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-gray-400",children:"Profit:"})," ",e.jsx("span",{className:"text-white",children:(c=r.profit)==null?void 0:c.toLocaleString("id-ID")})]})]})]})]})})]})}const Du=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function E_(){const[t,s]=m.useState("30d"),{data:r,isLoading:n,error:a}=Ne({queryKey:["advanced-analytics",t],queryFn:ue.getAdvancedAnalytics,retry:1,retryDelay:1e3});if(n)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading advanced analytics..."})]})})});if(a||!r)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load advanced analytics"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:a instanceof Error?a.message:"Unknown error occurred"})]})})});const o=d=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(d),i=d=>new Intl.NumberFormat("id-ID").format(d),l=Object.entries(r.distributions.roles).map(([d,u])=>({name:d.charAt(0).toUpperCase()+d.slice(1),value:u,color:d==="gold"?"#FFD700":d==="silver"?"#C0C0C0":"#CD7F32"})),c=Object.entries(r.distributions.paymentMethods).map(([d,u])=>({name:d,value:u}));return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Advanced Analytics"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive business insights and advanced metrics"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:i(r.overview.totalUsers)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+12.5%"})]}),e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(Ve,{className:"h-6 w-6 text-blue-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:i(r.overview.totalTransactions)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+8.3%"})]}),e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(Qa,{className:"h-6 w-6 text-green-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:o(r.overview.totalRevenue)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+15.2%"})]}),e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-purple-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Profit"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:o(r.overview.totalProfit)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+6.7%"})]}),e.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-orange-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Avg LTV"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:o(r.overview.avgLTV)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+4.2%"})]}),e.jsx("div",{className:"p-3 bg-pink-500/20 rounded-lg",children:e.jsx(Ss,{className:"h-6 w-6 text-pink-400"})})]})})})]}),e.jsxs(ds,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Jt,{children:[e.jsx(Ae,{value:"overview",children:"Overview"}),e.jsx(Ae,{value:"trends",children:"Trends"}),e.jsx(Ae,{value:"distributions",children:"Distributions"}),e.jsx(Ae,{value:"products",children:"Top Products"})]}),e.jsx(Pe,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5"}),"User Metrics"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Customers"}),e.jsx("span",{className:"font-semibold",children:i(r.userMetrics.totalCustomers)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Average Order Value"}),e.jsx("span",{className:"font-semibold",children:o(r.userMetrics.averageOrderValue)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Repeat Customers"}),e.jsx("span",{className:"font-semibold",children:i(r.userMetrics.repeatCustomers)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Repeat Rate"}),e.jsxs(re,{variant:"secondary",children:[(r.userMetrics.repeatCustomers/r.userMetrics.totalCustomers*100).toFixed(1),"%"]})]})]})]}),e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(yl,{className:"h-5 w-5"}),"User Role Distribution"]})}),e.jsx(S,{children:e.jsx(Re,{width:"100%",height:200,children:e.jsxs(js,{children:[e.jsx(ws,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:({name:d,percent:u})=>`${d} ${(u*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:l.map((d,u)=>e.jsx(Ot,{fill:d.color},`cell-${u}`))}),e.jsx(_e,{})]})})})]})]})}),e.jsxs(Pe,{value:"trends",className:"space-y-4",children:[e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-5 w-5"}),"Monthly Revenue Trends"]}),e.jsx(X,{children:"Revenue and transaction trends over the last 12 months"})]}),e.jsx(S,{children:e.jsx(Re,{width:"100%",height:400,children:e.jsxs(jn,{data:r.trends.monthly,children:[e.jsx(De,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"month"}),e.jsx(Me,{yAxisId:"left"}),e.jsx(Me,{yAxisId:"right",orientation:"right"}),e.jsx(_e,{formatter:(d,u)=>[u==="revenue"?o(Number(d)):i(Number(d)),u==="revenue"?"Revenue":u==="transactions"?"Transactions":"Profit"]}),e.jsx($s,{}),e.jsx(is,{yAxisId:"left",type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(is,{yAxisId:"left",type:"monotone",dataKey:"profit",stackId:"2",stroke:"#82ca9d",fill:"#82ca9d",fillOpacity:.6}),e.jsx(as,{yAxisId:"right",type:"monotone",dataKey:"transactions",stroke:"#ff7300",strokeWidth:2})]})})})]}),e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-5 w-5"}),"Hourly Activity Pattern"]}),e.jsx(X,{children:"User activity distribution throughout the day"})]}),e.jsx(S,{children:e.jsx(Re,{width:"100%",height:300,children:e.jsxs(kt,{data:r.trends.hourlyActivity,children:[e.jsx(De,{strokeDasharray:"3 3"}),e.jsx(Oe,{dataKey:"hour"}),e.jsx(Me,{}),e.jsx(_e,{}),e.jsx(dt,{dataKey:"activity",fill:"#8884d8"})]})})})]})]}),e.jsx(Pe,{value:"distributions",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsx(L,{children:e.jsx(F,{children:"Payment Methods"})}),e.jsx(S,{children:e.jsx(Re,{width:"100%",height:250,children:e.jsxs(js,{children:[e.jsx(ws,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({name:d,percent:u})=>`${d} ${(u*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:c.map((d,u)=>e.jsx(Ot,{fill:Du[u%Du.length]},`cell-${u}`))}),e.jsx(_e,{})]})})})]}),e.jsxs(N,{children:[e.jsx(L,{children:e.jsx(F,{children:"User Roles Breakdown"})}),e.jsx(S,{className:"space-y-4",children:Object.entries(r.distributions.roles).map(([d,u])=>{const h=(u/r.overview.totalUsers*100).toFixed(1);return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"capitalize font-medium",children:d}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[i(u)," (",h,"%)"]})]}),e.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${d==="gold"?"bg-yellow-500":d==="silver"?"bg-gray-400":"bg-orange-600"}`,style:{width:`${h}%`}})})]},d)})})]})]})}),e.jsx(Pe,{value:"products",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Top Performing Products"}),e.jsx(X,{children:"Products ranked by revenue and sales volume"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:r.topProducts.map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold",children:u+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i(d.sold)," sold"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold",children:o(d.revenue)}),e.jsx(re,{variant:"outline",className:"text-xs",children:"Revenue"})]})]},d.id))})})]})})]})]})]})}function T_(){const[t,s]=m.useState("revenue"),[r,n]=m.useState("all"),{data:a,isLoading:o,error:i}=Ne({queryKey:["product-performance"],queryFn:ue.getProductPerformance,retry:1,retryDelay:1e3});if(o)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading product performance..."})]})})});if(i||!a)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load product performance"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:i instanceof Error?i.message:"Unknown error occurred"})]})})});const l=b=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(b),c=b=>new Intl.NumberFormat("id-ID").format(b),d=b=>b==null||isNaN(b)?"0.0%":`${b.toFixed(1)}%`,u=Array.from(new Set(a.products.map(b=>b.category))),h=a.products.filter(b=>r==="all"||b.category===r).sort((b,g)=>{switch(t){case"revenue":return g.sales.totalRevenue-b.sales.totalRevenue;case"profit":return g.sales.totalProfit-b.sales.totalProfit;case"sold":return g.sales.totalSold-b.sales.totalSold;case"margin":return g.metrics.profitMargin-b.metrics.profitMargin;default:return 0}}),x=h.slice(0,10).map(b=>({name:b.name.length>20?b.name.substring(0,20)+"...":b.name,revenue:b.sales.totalRevenue,profit:b.sales.totalProfit,sold:b.sales.totalSold})),f=h.slice(0,10).map(b=>({name:b.name.length>15?b.name.substring(0,15)+"...":b.name,margin:b.metrics.profitMargin,revenue:b.sales.totalRevenue}));return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Product Performance"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Detailed analysis of product sales, profitability, and performance metrics"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:c(a.summary.totalProducts)})]}),e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(Ns,{className:"h-6 w-6 text-blue-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l(a.summary.totalRevenue)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+12.5%"})]}),e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-green-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Profit"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l(a.summary.totalProfit)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+8.3%"})]}),e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-purple-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Avg Profit Margin"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:d(a.summary.avgProfitMargin)}),e.jsx("p",{className:"text-sm text-green-400 mt-1",children:"+2.1%"})]}),e.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:e.jsx(Ss,{className:"h-6 w-6 text-orange-400"})})]})})})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs($a,{value:r,onValueChange:n,children:[e.jsx(gn,{className:"w-48",children:e.jsx(Ba,{placeholder:"Filter by category"})}),e.jsxs(bn,{children:[e.jsx(lt,{value:"all",children:"All Categories"}),u.map(b=>e.jsx(lt,{value:b,children:b},b))]})]}),e.jsxs($a,{value:t,onValueChange:b=>s(b),children:[e.jsx(gn,{className:"w-48",children:e.jsx(Ba,{placeholder:"Sort by"})}),e.jsxs(bn,{children:[e.jsx(lt,{value:"revenue",children:"Revenue"}),e.jsx(lt,{value:"profit",children:"Profit"}),e.jsx(lt,{value:"sold",children:"Units Sold"}),e.jsx(lt,{value:"margin",children:"Profit Margin"})]})]})]}),e.jsxs(ds,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Jt,{children:[e.jsx(Ae,{value:"overview",children:"Overview"}),e.jsx(Ae,{value:"performance",children:"Performance"}),e.jsx(Ae,{value:"insights",children:"Insights"})]}),e.jsx(Pe,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-5 w-5"}),"Top Products by Revenue"]})}),e.jsx(S,{children:e.jsx(Re,{width:"100%",height:300,children:e.jsxs(kt,{data:x,children:[e.jsx(De,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(Oe,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),e.jsx(Me,{}),e.jsx(_e,{formatter:(b,g)=>[g==="revenue"||g==="profit"?l(Number(b)):c(Number(b)),g==="revenue"?"Revenue":g==="profit"?"Profit":"Units Sold"],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:8}}),e.jsx($s,{}),e.jsx(dt,{dataKey:"revenue",fill:"#8884d8",radius:[6,6,0,0]}),e.jsx(dt,{dataKey:"profit",fill:"#82ca9d",radius:[6,6,0,0]})]})})})]}),e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-5 w-5"}),"Profit Margin Analysis"]})}),e.jsx(S,{children:e.jsx(Re,{width:"100%",height:300,children:e.jsxs(Ub,{data:f,children:[e.jsx(De,{className:"opacity-30"}),e.jsx(Oe,{type:"number",dataKey:"revenue",name:"Revenue",tickFormatter:b=>l(b)}),e.jsx(Me,{type:"number",dataKey:"margin",name:"Profit Margin",tickFormatter:b=>`${b}%`}),e.jsx(_e,{formatter:(b,g)=>[g==="margin"?`${b}%`:l(Number(b)),g==="margin"?"Profit Margin":"Revenue"],contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:8},labelFormatter:b=>`Product: ${b}`}),e.jsx(zb,{dataKey:"margin",fill:"#8884d8"})]})})})]})]})}),e.jsx(Pe,{value:"performance",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Product Performance Table"}),e.jsx(X,{children:"Detailed performance metrics for all products"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:h.slice(0,20).map((b,g)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold",children:g+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:b.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(re,{variant:"outline",className:"text-xs",children:b.category}),e.jsxs(re,{variant:b.stock.status==="in_stock"?"default":"destructive",className:"text-xs",children:[b.stock.current," in stock"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-right",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revenue"}),e.jsx("p",{className:"font-semibold",children:l(b.sales.totalRevenue)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Profit"}),e.jsx("p",{className:"font-semibold",children:l(b.sales.totalProfit)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sold"}),e.jsx("p",{className:"font-semibold",children:c(b.sales.totalSold)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Margin"}),e.jsx("p",{className:"font-semibold",children:d(b.metrics.profitMargin)})]})]})]},b.id))})})]})}),e.jsx(Pe,{value:"insights",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(wi,{className:"h-5 w-5"}),"Top Performers"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By Revenue"}),e.jsx("div",{className:"space-y-2",children:a.insights.topByRevenue.slice(0,3).map((b,g)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:b.name}),e.jsx(re,{variant:"secondary",children:l(b.revenue)})]},g))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"By Profit"}),e.jsx("div",{className:"space-y-2",children:a.insights.topByProfit.slice(0,3).map((b,g)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:b.name}),e.jsx(re,{variant:"secondary",children:l(b.profit)})]},g))})]})]})]}),e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"h-5 w-5"}),"Attention Needed"]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Low Stock Items"}),e.jsx("div",{className:"space-y-2",children:a.insights.lowStock.slice(0,5).map((b,g)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:b.name}),e.jsxs(re,{variant:"destructive",children:[b.stock," left"]})]},g))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"High Conversion Rate"}),e.jsx("div",{className:"space-y-2",children:a.insights.topByConversion.slice(0,3).map((b,g)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:b.name}),e.jsx(re,{variant:"default",children:d(b.conversionRate)})]},g))})]})]})]})]})})]})]})]})}const ia={new:"#3B82F6",regular:"#10B981",loyal:"#F59E0B",vip:"#8B5CF6"};function P_(){m.useState("all");const{data:t,isLoading:s,error:r}=Ne({queryKey:["user-behavior"],queryFn:()=>ue.getUserBehaviorAnalytics(),retry:1,retryDelay:1e3});if(s)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading user behavior analytics..."})]})})});if(r||!t)return e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-2",children:"Failed to load user behavior analytics"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:r instanceof Error?r.message:"Unknown error occurred"})]})})});const n=c=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(c),a=c=>new Intl.NumberFormat("id-ID").format(c),o=c=>`${c.toFixed(1)}%`,i=Object.entries(t.segmentStats).map(([c,d])=>({name:c.charAt(0).toUpperCase()+c.slice(1),value:d.count,percentage:d.percentage,color:ia[c]||"#8884d8"})),l=Object.values(t.segmentStats).reduce((c,d)=>c+d.count,0);return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"User Behavior Analytics"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Discover user patterns, segments, and behavioral insights to drive growth"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Ve,{className:"h-6 w-6"})}),e.jsx(re,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"Total"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold",children:a(l)}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:"Total Users"})]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-green-500 to-green-600 p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(ka,{className:"h-6 w-6"})}),e.jsx(re,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"+5.2%"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold",children:a(t.churnAnalysis.recentlyActive)}),e.jsx("p",{className:"text-green-100 text-sm mt-1",children:"Recently Active"})]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-orange-500 to-red-500 p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(tv,{className:"h-6 w-6"})}),e.jsx(re,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"Risk"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold",children:a(t.churnAnalysis.churnedUsers)}),e.jsx("p",{className:"text-orange-100 text-sm mt-1",children:"Churned Users"})]})]})]}),e.jsxs("div",{className:"group relative overflow-hidden rounded-xl bg-gradient-to-br from-purple-500 to-purple-600 p-6 text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-lg backdrop-blur-sm",children:e.jsx(Jc,{className:"h-6 w-6"})}),e.jsx(re,{variant:"secondary",className:"bg-white/20 text-white border-white/30",children:"Rate"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold",children:o(t.churnAnalysis.churnRate)}),e.jsx("p",{className:"text-purple-100 text-sm mt-1",children:"Churn Rate"})]})]})]})]}),e.jsxs(ds,{defaultValue:"segments",className:"space-y-6",children:[e.jsxs(Jt,{className:"grid w-full grid-cols-3 bg-white/50 backdrop-blur-sm rounded-xl p-2 shadow-lg",children:[e.jsxs(Ae,{value:"segments",className:"rounded-lg data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-purple-600 data-[state=active]:text-white transition-all duration-300",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"User Segments"]}),e.jsxs(Ae,{value:"insights",className:"rounded-lg data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-teal-600 data-[state=active]:text-white transition-all duration-300",children:[e.jsx(wi,{className:"h-4 w-4 mr-2"}),"Behavioral Insights"]}),e.jsxs(Ae,{value:"churn",className:"rounded-lg data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-red-600 data-[state=active]:text-white transition-all duration-300",children:[e.jsx(Jc,{className:"h-4 w-4 mr-2"}),"Churn Analysis"]})]}),e.jsxs(Pe,{value:"segments",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{className:"relative overflow-hidden border-0 shadow-xl bg-gradient-to-br from-white/80 to-blue-50/80 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-purple-500/5"}),e.jsxs(L,{className:"relative z-10",children:[e.jsxs(F,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg text-white",children:e.jsx(Ve,{className:"h-5 w-5"})}),"User Segmentation"]}),e.jsx(X,{className:"text-base",children:"Distribution of users across different behavioral segments"})]}),e.jsx(S,{children:e.jsx(Re,{width:"100%",height:250,children:e.jsxs(js,{children:[e.jsx(ws,{data:i,cx:"50%",cy:"50%",labelLine:!1,label:({name:c,percentage:d})=>`${c} ${d.toFixed(1)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:i.map((c,d)=>e.jsx(Ot,{fill:c.color},`cell-${d}`))}),e.jsx(_e,{})]})})})]}),e.jsxs(N,{className:"relative overflow-hidden border-0 shadow-xl bg-gradient-to-br from-white/80 to-green-50/80 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/5 to-teal-500/5"}),e.jsx(L,{className:"relative z-10",children:e.jsxs(F,{className:"flex items-center gap-3 text-xl",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-green-500 to-teal-600 rounded-lg text-white",children:e.jsx(Qc,{className:"h-5 w-5"})}),"Segment Statistics"]})}),e.jsx(S,{className:"space-y-6 relative z-10",children:Object.entries(t.segmentStats).map(([c,d])=>e.jsxs("div",{className:"group p-4 rounded-xl bg-white/50 backdrop-blur-sm border border-white/20 hover:bg-white/70 transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg",style:{backgroundColor:ia[c]}}),e.jsxs("span",{className:"font-semibold capitalize text-lg",children:[c," Users"]})]}),e.jsx(re,{variant:"secondary",className:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 border-0",children:a(d.count)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Spent"}),e.jsx("div",{className:"font-bold text-lg text-blue-700",children:n(d.avgSpent)})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Avg Transactions"}),e.jsx("div",{className:"font-bold text-lg text-green-700",children:d.avgTransactions.toFixed(1)})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Segment Share"}),e.jsx("span",{className:"text-sm font-bold",style:{color:ia[c]},children:o(d.percentage)})]}),e.jsx(os,{value:d.percentage,className:"h-3 bg-gray-100/50",style:{"--progress-background":ia[c]}})]},c))})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-4",children:Object.entries(t.segments).map(([c,d])=>{var u,h;return e.jsxs(N,{children:[e.jsxs(L,{className:"pb-2",children:[e.jsxs(F,{className:"text-lg capitalize flex items-center gap-2",children:[c==="vip"&&e.jsx(Qc,{className:"h-4 w-4 text-purple-500"}),c==="loyal"&&e.jsx(wi,{className:"h-4 w-4 text-yellow-500"}),c==="regular"&&e.jsx(ka,{className:"h-4 w-4 text-green-500"}),c==="new"&&e.jsx(Ve,{className:"h-4 w-4 text-blue-500"}),c," Users"]}),e.jsxs(X,{children:[c==="new"&&"0-1 transactions",c==="regular"&&"2-5 transactions",c==="loyal"&&"6-10 transactions",c==="vip"&&"11+ transactions"]})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:a(((u=t.segmentStats[c])==null?void 0:u.count)||0)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Total Spent: ",n(((h=t.segmentStats[c])==null?void 0:h.totalSpent)||0)]})]})})]},c)})})]}),e.jsxs(Pe,{value:"insights",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-5 w-5"}),"Payment Preferences"]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(t.insights.paymentPreferences||{}).map(([c,d])=>{const u=Object.values(t.insights.paymentPreferences||{}).reduce((f,b)=>f+Number(b),0),h=Number(d),x=u>0?h/u*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:c}),e.jsxs(re,{variant:"outline",children:[a(d)," (",o(x),")"]})]}),e.jsx(os,{value:x,className:"h-2"})]},c)})})})]}),e.jsxs(N,{children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(nn,{className:"h-5 w-5"}),"Most Active Hour"]})}),e.jsx(S,{children:e.jsx("div",{className:"text-center",children:(()=>{const c=t.insights.mostActiveHour||{},d=Object.entries(c).reduce((u,[h,x])=>x>u.activity?{hour:h,activity:x}:u,{hour:"N/A",activity:0});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:d.hour!=="N/A"?`${d.hour}:00`:"N/A"}),e.jsxs("p",{className:"text-muted-foreground",children:["Peak activity with ",a(d.activity)," actions"]})]})})()})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Top Spenders"}),e.jsx(X,{children:"Users with highest total spending"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-3",children:t.insights.topSpenders.slice(0,5).map((c,d)=>{var u;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold",children:d+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.displayId||((u=c.userId)==null?void 0:u.replace("@s.whatsapp.net","").replace("@lid",""))||c.username}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a(c.transactionCount||0)," transactions  ",n(c.totalSpent||0)]})]})]}),e.jsx(re,{variant:"secondary",children:n(c.totalSpent||0)})]},d)})})})]}),e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Most Frequent Buyers"}),e.jsx(X,{children:"Users with highest transaction frequency"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-3",children:t.insights.mostFrequentBuyers.slice(0,5).map((c,d)=>{var u;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-secondary-foreground text-sm font-bold",children:d+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.displayId||((u=c.userId)==null?void 0:u.replace("@s.whatsapp.net","").replace("@lid",""))||c.username}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a(c.transactionCount||0)," transactions  ",n(c.totalSpent||0)]})]})]}),e.jsxs(re,{variant:"outline",children:[a(c.transactionCount||0)," orders"]})]},d)})})})]})]})]}),e.jsx(Pe,{value:"churn",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(N,{children:[e.jsx(L,{children:e.jsx(F,{children:"Churn Overview"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Churned Users"}),e.jsx("span",{className:"font-semibold text-red-600",children:a(t.churnAnalysis.churnedUsers)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Churn Rate"}),e.jsx(re,{variant:"destructive",children:o(t.churnAnalysis.churnRate)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Recently Active"}),e.jsx("span",{className:"font-semibold text-green-600",children:a(t.churnAnalysis.recentlyActive)})]})]})]}),e.jsxs(N,{children:[e.jsx(L,{children:e.jsx(F,{children:"Retention Rate"})}),e.jsx(S,{children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:o(100-t.churnAnalysis.churnRate)}),e.jsx("p",{className:"text-muted-foreground",children:"Users retained this period"}),e.jsx(os,{value:100-t.churnAnalysis.churnRate,className:"mt-4 h-3"})]})})]}),e.jsxs(N,{children:[e.jsx(L,{children:e.jsx(F,{children:"Activity Status"})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-600",children:" Active"}),e.jsx("span",{className:"font-semibold",children:a(t.churnAnalysis.recentlyActive)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-red-600",children:" Churned"}),e.jsx("span",{className:"font-semibold",children:a(t.churnAnalysis.churnedUsers)})]}),e.jsxs("div",{className:"flex justify-between items-center border-t pt-2",children:[e.jsx("span",{className:"font-medium",children:"Total"}),e.jsx("span",{className:"font-bold",children:a(t.churnAnalysis.recentlyActive+t.churnAnalysis.churnedUsers)})]})]})})]})]})})]})]})]})}function I_(){const[t,s]=m.useState("30d"),{data:r,isLoading:n,error:a}=Ne({queryKey:["financial-analytics",t],queryFn:ue.getFinancialAnalytics,retry:1,retryDelay:1e3});if(n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent animate-spin"})]}),e.jsx("p",{className:"text-muted-foreground font-medium animate-pulse",children:"Loading financial analytics..."})]})});if(a||!r)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md mx-auto p-6 bg-destructive/5 rounded-2xl border border-destructive/20",children:[e.jsx("div",{className:"w-12 h-12 bg-destructive/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(dn,{className:"h-6 w-6 text-destructive"})}),e.jsx("h3",{className:"text-lg font-bold text-destructive mb-2",children:"Failed to load financial analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a instanceof Error?a.message:"Unknown error occurred"}),e.jsx(Z,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})});const o=x=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(x),i=x=>new Intl.NumberFormat("id-ID").format(x),l=x=>`${x.toFixed(1)}%`,c=Object.entries(r.distributions.byPaymentMethod||{}).map(([x,f])=>({name:x,value:f})),d=Object.entries(r.distributions.byUserRole||{}).map(([x,f])=>({name:x.charAt(0).toUpperCase()+x.slice(1),value:f,color:x==="gold"?"#eab308":x==="silver"?"#94a3b8":"#d97706"})),u=x=>x>=80?"text-emerald-500":x>=60?"text-amber-500":"text-rose-500",h=x=>x>=80?"bg-emerald-500/10 text-emerald-500":x>=60?"bg-amber-500/10 text-amber-500":"bg-rose-500/10 text-rose-500";return e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Financial Analytics"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive financial analysis and business health insights"})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-background/50 backdrop-blur-sm p-1 rounded-lg border border-border/50",children:[e.jsx(Z,{variant:t==="7d"?"default":"ghost",size:"sm",onClick:()=>s("7d"),className:"rounded-md",children:"7 Days"}),e.jsx(Z,{variant:t==="30d"?"default":"ghost",size:"sm",onClick:()=>s("30d"),className:"rounded-md",children:"30 Days"}),e.jsx(Z,{variant:t==="90d"?"default":"ghost",size:"sm",onClick:()=>s("90d"),className:"rounded-md",children:"90 Days"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:[e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("h3",{className:"text-xl font-bold mt-2 text-foreground",children:o(r.overview.totalRevenue)}),e.jsxs("div",{className:O("flex items-center mt-1 text-xs font-medium",r.overview.revenueGrowthRate>0?"text-emerald-500":"text-rose-500"),children:[r.overview.revenueGrowthRate>0?e.jsx(Nt,{className:"h-3 w-3 mr-1"}):e.jsx(br,{className:"h-3 w-3 mr-1"}),Math.abs(r.overview.revenueGrowthRate),"%"]})]}),e.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:e.jsx(Ft,{className:"h-5 w-5 text-blue-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Profit"}),e.jsx("h3",{className:"text-xl font-bold mt-2 text-foreground",children:o(r.overview.totalProfit)}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"8.5%"]})]}),e.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg",children:e.jsx($e,{className:"h-5 w-5 text-emerald-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Profit Margin"}),e.jsx("h3",{className:"text-xl font-bold mt-2 text-foreground",children:l(r.overview.profitMargin)}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"2.1%"]})]}),e.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg",children:e.jsx(Ss,{className:"h-5 w-5 text-purple-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Order Value"}),e.jsx("h3",{className:"text-xl font-bold mt-2 text-foreground",children:o(r.overview.avgOrderValue)}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"5.3%"]})]}),e.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:e.jsx(qe,{className:"h-5 w-5 text-orange-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transactions"}),e.jsx("h3",{className:"text-xl font-bold mt-2 text-foreground",children:i(r.overview.totalTransactions)}),e.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-emerald-500",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),"12.8%"]})]}),e.jsx("div",{className:"p-2 bg-pink-500/10 rounded-lg",children:e.jsx(ut,{className:"h-5 w-5 text-pink-500"})})]})})}),e.jsx(N,{className:"card-premium border-none shadow-soft",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Revenue Growth"}),e.jsx("h3",{className:"text-xl font-bold mt-2 text-foreground",children:l(r.overview.revenueGrowthRate)}),e.jsxs("div",{className:O("flex items-center mt-1 text-xs font-medium",r.overview.revenueGrowthRate>0?"text-emerald-500":"text-rose-500"),children:[r.overview.revenueGrowthRate>0?e.jsx(Nt,{className:"h-3 w-3 mr-1"}):e.jsx(br,{className:"h-3 w-3 mr-1"}),Math.abs(r.overview.revenueGrowthRate),"%"]})]}),e.jsx("div",{className:"p-2 bg-cyan-500/10 rounded-lg",children:e.jsx(ft,{className:"h-5 w-5 text-cyan-500"})})]})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none"}),e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-5 w-5 text-primary"}),"Financial Health Score"]}),e.jsx(X,{children:"Overall business financial performance indicator"})]}),e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:O("text-6xl font-bold tracking-tighter",u(r.insights.healthScore)),children:r.insights.healthScore.toFixed(1)}),e.jsxs("div",{children:[e.jsx("div",{className:O("px-3 py-1 rounded-full text-sm font-medium w-fit mb-2",h(r.insights.healthScore)),children:r.insights.healthScore>=80?"Excellent":r.insights.healthScore>=60?"Good":"Needs Attention"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-[250px]",children:"Based on revenue consistency, profit margins, and growth metrics over the selected period."})]})]}),e.jsxs("div",{className:"w-full md:w-1/2 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Score Progress"}),e.jsxs("span",{className:"font-medium text-foreground",children:[r.insights.healthScore.toFixed(0),"/100"]})]}),e.jsx(os,{value:r.insights.healthScore,className:"h-3 bg-secondary"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground pt-1",children:[e.jsx("span",{children:"Critical (0-59)"}),e.jsx("span",{children:"Good (60-79)"}),e.jsx("span",{children:"Excellent (80-100)"})]})]})]})})]}),e.jsxs(ds,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Jt,{className:"bg-background/50 backdrop-blur-sm p-1 border border-border/50 rounded-xl w-full md:w-auto flex overflow-x-auto",children:[e.jsx(Ae,{value:"overview",className:"rounded-lg data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Financial Overview"}),e.jsx(Ae,{value:"distributions",className:"rounded-lg data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Revenue Distribution"}),e.jsx(Ae,{value:"trends",className:"rounded-lg data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Trends & Growth"}),e.jsx(Ae,{value:"insights",className:"rounded-lg data-[state=active]:bg-primary data-[state=active]:text-primary-foreground",children:"Insights & Recommendations"})]}),e.jsx(Pe,{value:"overview",className:"space-y-6 animate-in fade-in-50 duration-500 slide-in-from-bottom-2",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(on,{className:"h-5 w-5 text-primary"}),"User Financial Overview"]})}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-secondary/30 border border-border/50",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Total User Balance"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:o(r.userFinances.totalBalance)})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-secondary/30 border border-border/50",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Average Balance"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:o(r.userFinances.avgBalance)})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Balance Distribution"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r.userFinances.balanceDistribution||{}).map(([x,f])=>{const b=Object.values(r.userFinances.balanceDistribution||{}).reduce((p,y)=>p+y,0),g=b>0?f/b*100:0;return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:x}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground",children:i(f)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",l(g),")"]})]})]}),e.jsx(os,{value:g,className:"h-1.5"})]},x)})})]})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(yl,{className:"h-5 w-5 text-primary"}),"Revenue by User Role"]})}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(js,{children:[e.jsx(ws,{data:d,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:d.map((x,f)=>e.jsx(Ot,{fill:x.color,strokeWidth:0},`cell-${f}`))}),e.jsx(_e,{formatter:x=>o(Number(x)),contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx($s,{verticalAlign:"bottom",height:36,iconType:"circle"})]})})})})]})]})}),e.jsx(Pe,{value:"distributions",className:"space-y-6 animate-in fade-in-50 duration-500 slide-in-from-bottom-2",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Payment Method Distribution"}),e.jsx(X,{children:"Revenue breakdown by payment method"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(kt,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},dy:10}),e.jsx(Me,{tickFormatter:x=>o(x),axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(_e,{formatter:x=>o(Number(x)),cursor:{fill:"hsl(var(--muted)/0.2)"},contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx(dt,{dataKey:"value",fill:"hsl(var(--primary))",radius:[6,6,0,0],barSize:40})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Profit Distribution by Role"}),e.jsx(X,{children:"Profit contribution from different user tiers"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-6",children:Object.entries(r.distributions.profitByRole||{}).map(([x,f])=>{const b=Object.values(r.distributions.profitByRole||{}).reduce((p,y)=>p+y,0),g=b>0?f/b*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:O("w-2 h-2 rounded-full",x==="gold"?"bg-yellow-500":x==="silver"?"bg-slate-400":"bg-orange-600")}),e.jsx("span",{className:"font-medium capitalize text-foreground",children:x})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-semibold text-foreground",children:o(f)}),e.jsx(re,{variant:"secondary",className:"text-xs font-normal",children:l(g)})]})]}),e.jsx(os,{value:g,className:"h-2.5",indicatorClassName:x==="gold"?"bg-yellow-500":x==="silver"?"bg-slate-400":"bg-orange-600"})]},x)})})})]})]})}),e.jsxs(Pe,{value:"trends",className:"space-y-6 animate-in fade-in-50 duration-500 slide-in-from-bottom-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"h-5 w-5 text-primary"}),"Revenue & Profit Trends"]}),e.jsx(X,{children:"Daily revenue and profit performance over time"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[400px] w-full",children:e.jsx(Re,{width:"100%",height:"100%",children:e.jsxs(jn,{data:r.trends.daily,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"finRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"finProfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})]}),e.jsx(De,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border))",opacity:.4}),e.jsx(Oe,{dataKey:"date",axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},dy:10}),e.jsx(Me,{tickFormatter:x=>o(x),axisLine:!1,tickLine:!1,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),e.jsx(_e,{formatter:x=>o(Number(x)),contentStyle:{backgroundColor:"hsl(var(--card))",borderColor:"hsl(var(--border))",borderRadius:"0.75rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"hsl(var(--foreground))"}}),e.jsx($s,{verticalAlign:"top",height:36,iconType:"circle"}),e.jsx(is,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:3,fill:"url(#finRevenue)",activeDot:{r:6,strokeWidth:0}}),e.jsx(is,{type:"monotone",dataKey:"profit",stroke:"#10b981",strokeWidth:3,fill:"url(#finProfit)",activeDot:{r:6,strokeWidth:0}})]})})})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Monthly Performance"}),e.jsx(X,{children:"Monthly revenue and growth trends"})]}),e.jsx(S,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:Object.entries(r.trends.monthly||{}).map(([x,f])=>e.jsxs("div",{className:"text-center p-6 rounded-2xl bg-secondary/30 border border-border/50 hover:bg-secondary/50 transition-colors",children:[e.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:typeof f=="number"?x.includes("revenue")||x.includes("profit")?o(f):i(f):String(f)}),e.jsx("div",{className:"text-sm text-muted-foreground capitalize font-medium",children:x.replace(/([A-Z])/g," $1").trim()})]},x))})})]})]}),e.jsx(Pe,{value:"insights",className:"space-y-6 animate-in fade-in-50 duration-500 slide-in-from-bottom-2",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsx(L,{children:e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(dn,{className:"h-5 w-5 text-primary"}),"Key Insights"]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Revenue Growth"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Revenue is growing at ",e.jsx("span",{className:"font-semibold text-foreground",children:l(r.overview.revenueGrowthRate)})," rate compared to the previous period."]})]}),e.jsxs("div",{className:"p-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),e.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:"Profit Margin"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Maintaining healthy profit margin of ",e.jsx("span",{className:"font-semibold text-foreground",children:l(r.overview.profitMargin)}),"."]})]}),e.jsxs("div",{className:"p-4 bg-purple-500/10 border border-purple-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:"Order Value"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Average order value is ",e.jsx("span",{className:"font-semibold text-foreground",children:o(r.overview.avgOrderValue)})," per transaction."]})]})]})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsx(F,{children:"Recommendations"}),e.jsx(X,{children:"Actionable steps to improve financial health"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:r.insights.recommendations.map((x,f)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 border border-border/50 rounded-xl bg-card hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary text-sm font-bold mt-0.5 shrink-0",children:f+1}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:x})]},f))})})]})]})})]})]})}function D_(){return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sales Analytics"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive sales performance analysis"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Rp 10.410.048"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+20.1%"})," from last month"]})]})]}),e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Total Sales"}),e.jsx(Qa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"893"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+15.3%"})," from last month"]})]})]}),e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Active Customers"}),e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"354"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+8.2%"})," from last month"]})]})]}),e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Avg Order Value"}),e.jsx(ut,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"Rp 11.657"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-red-600",children:"-2.1%"})," from last month"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Sales Trends"}),e.jsx(X,{children:"Monthly sales performance over time"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ut,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Sales chart will be implemented here"})]})})})]}),e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Top Products"}),e.jsx(X,{children:"Best performing products by revenue"})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"NETFLIX 1 BULAN 1P2U"})]}),e.jsx("span",{className:"text-sm font-medium",children:"Rp 2.400.000"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"NETFLIX 1 BULAN 1P1U"})]}),e.jsx("span",{className:"text-sm font-medium",children:"Rp 1.800.000"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"CAPCUT 1 BULAN PRIVATE"})]}),e.jsx("span",{className:"text-sm font-medium",children:"Rp 1.200.000"})]})]})})]})]}),e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Sales Performance"}),e.jsx(X,{children:"Detailed sales metrics and insights"})]}),e.jsx(S,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:"+25%"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Growth Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"94%"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer Satisfaction"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"2.3x"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ROI"})]})]})})]})]})]})}function O_(){return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Inventory Analytics"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Comprehensive inventory management and analytics"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Total Products"}),e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"43"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+3"})," new this month"]})]})]}),e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Total Stock"}),e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"1,247"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+12%"})," from last month"]})]})]}),e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(Ht,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"7"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]}),e.jsxs(N,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(F,{className:"text-sm font-medium",children:"Stock Turnover"}),e.jsx($e,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2.4x"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+0.3x"})," from last month"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Stock Levels"}),e.jsx(X,{children:"Current inventory status by category"})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Streaming Services"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Good"}),e.jsx(_a,{className:"h-4 w-4 text-green-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Gaming"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Low"}),e.jsx(Ht,{className:"h-4 w-4 text-yellow-500"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Software"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Critical"}),e.jsx(Ht,{className:"h-4 w-4 text-red-500"})]})]})]})})]}),e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Inventory Trends"}),e.jsx(X,{children:"Stock movement patterns over time"})]}),e.jsx(S,{children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ut,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"Inventory trends chart will be implemented here"})]})})})]})]}),e.jsxs(N,{children:[e.jsxs(L,{children:[e.jsx(F,{children:"Stock Alerts"}),e.jsx(X,{children:"Items that need immediate attention"})]}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-red-50 border-red-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ht,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-900",children:"Adobe Creative Suite"}),e.jsx("p",{className:"text-sm text-red-700",children:"Only 2 items left in stock"})]})]}),e.jsx(re,{variant:"destructive",children:"Critical"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-yellow-50 border-yellow-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ht,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"Spotify Premium"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"5 items left - consider restocking"})]})]}),e.jsx(re,{variant:"outline",className:"text-yellow-600",children:"Warning"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50 border-green-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_a,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Netflix Premium"}),e.jsx("p",{className:"text-sm text-green-700",children:"Stock levels are healthy"})]})]}),e.jsx(re,{variant:"outline",className:"text-green-600",children:"Good"})]})]})})]})]})]})}function M_(){const{data:t,isLoading:s,error:r}=Ne({queryKey:["dashboard-overview"],queryFn:ue.getOverview}),{data:n}=Ne({queryKey:["recent-transactions"],queryFn:()=>ue.getRecentTransactions(10)}),a=(n==null?void 0:n.transactions.slice(0,6).map((o,i)=>({id:o.id||i,name:o.name,description:`WhatsApp Bot Transaction - ${o.name}`,revenue:o.totalBayar,transactions:1,users:1,status:o.status||"active",lastActivity:o.date})))||[];return s?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading projects..."})]})})}):r?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-2",children:"Failed to load projects"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please check your API connection"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Projects"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"WhatsApp Bot Transaction Projects"})]}),e.jsxs(Z,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(cn,{className:"mr-2 h-4 w-4"}),"New Project"]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Projects"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.length})]}),e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(Zc,{className:"h-6 w-6 text-blue-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke(a.reduce((o,i)=>o+i.revenue,0))})]}),e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-green-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.reduce((o,i)=>o+i.users,0)})]}),e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(Ve,{className:"h-6 w-6 text-purple-400"})})]})})})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:a.map(o=>e.jsxs(N,{className:"bg-gray-800 border-gray-700 hover:bg-gray-700/50 transition-colors",children:[e.jsx(L,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Zc,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx(F,{className:"text-white",children:o.name}),e.jsx(X,{className:"text-gray-400",children:o.description})]})]}),e.jsx(Z,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:e.jsx(vl,{className:"h-4 w-4"})})]})}),e.jsx(S,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Revenue"}),e.jsx("span",{className:"text-white font-semibold",children:ke(o.revenue)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Transactions"}),e.jsx("span",{className:"text-white",children:o.transactions})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Users"}),e.jsx("span",{className:"text-white",children:o.users})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(re,{variant:"secondary",className:"bg-green-500/20 text-green-400 border-green-500/30",children:o.status}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(o.lastActivity).toLocaleDateString()})]})]})})]},o.id))})]})]})}function L_(){const{data:t,isLoading:s,error:r}=Ne({queryKey:["recent-transactions"],queryFn:()=>ue.getRecentTransactions(20)}),n=(t==null?void 0:t.transactions.map((i,l)=>({id:i.id||l,title:i.name,priority:i.totalBayar>1e5?"high":i.totalBayar>5e4?"medium":"low",assignee:rs(i),dueDate:i.date,completed:i.status==="completed",amount:i.totalBayar,paymentMethod:ns(i),referenceId:Qe(i)})))||[],a=i=>{switch(i){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},o=i=>{switch(i){case"high":return"High";case"medium":return"Medium";case"low":return"Low";default:return"Unknown"}};return s?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading tasks..."})]})})}):r?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-2",children:"Failed to load tasks"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please check your API connection"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Tasks"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"WhatsApp Bot Transaction Tasks"})]}),e.jsxs(Z,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(cn,{className:"mr-2 h-4 w-4"}),"New Task"]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Tasks"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.length})]}),e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(Ko,{className:"h-6 w-6 text-blue-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.filter(i=>i.completed).length})]}),e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(Ko,{className:"h-6 w-6 text-green-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.filter(i=>!i.completed).length})]}),e.jsx("div",{className:"p-3 bg-yellow-500/20 rounded-lg",children:e.jsx(nn,{className:"h-6 w-6 text-yellow-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Value"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke(n.reduce((i,l)=>i+l.amount,0))})]}),e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(qe,{className:"h-6 w-6 text-purple-400"})})]})})})]}),e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Transaction Tasks"}),e.jsx(X,{className:"text-gray-400",children:"Manage your WhatsApp bot transaction tasks"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:n.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600 hover:bg-gray-700/80 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ko,{className:`h-5 w-5 ${i.completed?"text-green-400":"text-gray-400"}`}),e.jsx("span",{className:`text-white ${i.completed?"line-through text-gray-400":""}`,children:i.title})]}),e.jsx("div",{className:`w-2 h-2 rounded-full ${a(i.priority)}`}),e.jsx(re,{variant:"secondary",className:"bg-gray-600 text-white text-xs",children:o(i.priority)})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(wn,{className:"h-4 w-4"}),i.assignee]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(nn,{className:"h-4 w-4"}),Cm(i.dueDate,"short")]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:ke(i.amount)}),e.jsx("p",{className:"text-xs text-gray-400",children:i.paymentMethod})]}),e.jsx(Z,{variant:"ghost",size:"sm",className:"text-gray-400 hover:text-white",children:e.jsx(Nn,{className:"h-4 w-4"})})]})]},i.id))})})]})]})]})}function Ou(){var a,o,i;const{data:t,isLoading:s,error:r}=Ne({queryKey:["dashboard-overview"],queryFn:ue.getOverview}),{data:n}=Ne({queryKey:["recent-transactions"],queryFn:()=>ue.getRecentTransactions(10)});return s?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading reports..."})]})})}):r?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-2",children:"Failed to load reports"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please check your API connection"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Reports Overview"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"WhatsApp Bot Analytics and Insights"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke((t==null?void 0:t.totalPendapatan)||0)}),e.jsxs("p",{className:"text-sm text-green-400 flex items-center mt-1",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),(t==null?void 0:t.transaksiHariIni)||0," transaksi hari ini"]})]}),e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-green-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:(t==null?void 0:t.totalTransaksi)||0}),e.jsxs("p",{className:"text-sm text-blue-400 flex items-center mt-1",children:[e.jsx(ft,{className:"h-3 w-3 mr-1"}),(t==null?void 0:t.transaksiHariIni)||0," hari ini"]})]}),e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(qe,{className:"h-6 w-6 text-blue-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Today's Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke((t==null?void 0:t.pendapatanHariIni)||0)}),e.jsxs("p",{className:"text-sm text-purple-400 flex items-center mt-1",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"Daily performance"]})]}),e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(ut,{className:"h-6 w-6 text-purple-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:(n==null?void 0:n.transactions.length)||0}),e.jsxs("p",{className:"text-sm text-orange-400 flex items-center mt-1",children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Recent users"]})]}),e.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:e.jsx(Ve,{className:"h-6 w-6 text-orange-400"})})]})})})]}),e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Payment Methods Analysis"}),e.jsx(X,{className:"text-gray-400",children:"Breakdown by payment method"})]}),e.jsx(S,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium text-white",children:"QRIS"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:((a=t==null?void 0:t.metodeBayar)==null?void 0:a.qris)||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"transactions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-medium text-white",children:"Saldo"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:((o=t==null?void 0:t.metodeBayar)==null?void 0:o.saldo)||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"transactions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsx("span",{className:"font-medium text-white",children:"Lainnya"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:((i=t==null?void 0:t.metodeBayar)==null?void 0:i.unknown)||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"transactions"})]})]})]})})]}),e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Recent Transactions Summary"}),e.jsx(X,{className:"text-gray-400",children:"Latest transaction insights"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:n==null?void 0:n.transactions.slice(0,5).map((l,c)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-sm",children:l.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:l.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:[new Date(l.date).toLocaleDateString(),"  ",l.user_name||"Unknown User"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:ke(l.totalBayar)}),e.jsx("p",{className:"text-sm text-gray-400",children:l.metodeBayar||"Unknown"})]})]},c))})})]})]})]})}function F_(){const{data:t,isLoading:s,error:r}=Ne({queryKey:["recent-transactions"],queryFn:()=>ue.getRecentTransactions(50)}),n=(t==null?void 0:t.transactions.reduce((o,i)=>{const l=rs(i),c=o.find(d=>d.name===l);return c?(c.orders+=1,c.totalSpent+=i.totalBayar):o.push({id:i.id||Math.random(),name:l,email:`${l.toLowerCase().replace(/\s+/g,".")}@example.com`,phone:"+62 812 3456 7890",location:"Jakarta, Indonesia",orders:1,totalSpent:i.totalBayar,lastOrder:i.date}),o},[]))||[],a=n.sort((o,i)=>i.totalSpent-o.totalSpent).slice(0,10);return s?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading customer report..."})]})})}):r?e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-2",children:"Failed to load customer report"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please check your API connection"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Customer Report"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"WhatsApp Bot Customer Analytics"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n.length})]}),e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(Ve,{className:"h-6 w-6 text-blue-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke(n.reduce((o,i)=>o+i.totalSpent,0))})]}),e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(qe,{className:"h-6 w-6 text-green-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Avg. Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke(n.length>0?n.reduce((o,i)=>o+i.totalSpent,0)/n.length:0)})]}),e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx(Ve,{className:"h-6 w-6 text-purple-400"})})]})})})]}),e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Top Customers"}),e.jsx(X,{className:"text-gray-400",children:"Customers with highest spending"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:a.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold",children:o.name.split(" ").map(i=>i[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:o.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Gu,{className:"h-3 w-3"}),o.email]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ln,{className:"h-3 w-3"}),o.phone]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(sv,{className:"h-3 w-3"}),o.location]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:ke(o.totalSpent)}),e.jsxs("p",{className:"text-sm text-gray-400",children:[o.orders," orders"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Last: ",new Date(o.lastOrder).toLocaleDateString()]})]})]},o.id))})})]})]})]})}function $_(){var d,u,h;const{data:t,isLoading:s,error:r}=Ne({queryKey:["dashboard-overview"],queryFn:ue.getOverview}),{data:n}=Ne({queryKey:["recent-transactions"],queryFn:()=>ue.getRecentTransactions(100)}),a=(n==null?void 0:n.transactions.reduce((x,f)=>{const b=new Date(f.date),g=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}`;return x[g]||(x[g]={month:b.toLocaleDateString("en-US",{month:"short",year:"numeric"}),revenue:0,orders:0,products:1}),x[g].revenue+=f.totalBayar,x[g].orders+=1,x},{}))||{},o=Object.values(a).slice(-6);if(s)return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading sales report..."})]})})});if(r)return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-400 mb-2",children:"Failed to load sales report"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Please check your API connection"})]})})});const i=o.reduce((x,f)=>x+f.revenue,0),l=o.reduce((x,f)=>x+f.orders,0),c=l>0?i/l:0;return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sales Report"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"WhatsApp Bot Sales Performance"})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke(i)}),e.jsxs("p",{className:"text-sm text-green-400 flex items-center mt-1",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"Last 6 months"]})]}),e.jsx("div",{className:"p-3 bg-green-500/20 rounded-lg",children:e.jsx(Ft,{className:"h-6 w-6 text-green-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l}),e.jsxs("p",{className:"text-sm text-blue-400 flex items-center mt-1",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"Last 6 months"]})]}),e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-lg",children:e.jsx(Qa,{className:"h-6 w-6 text-blue-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Avg. Order Value"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke(c)}),e.jsxs("p",{className:"text-sm text-purple-400 flex items-center mt-1",children:[e.jsx($e,{className:"h-3 w-3 mr-1"}),"Per transaction"]})]}),e.jsx("div",{className:"p-3 bg-purple-500/20 rounded-lg",children:e.jsx($e,{className:"h-6 w-6 text-purple-400"})})]})})}),e.jsx(N,{className:"bg-gray-800 border-gray-700",children:e.jsx(S,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Today's Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:ke((t==null?void 0:t.pendapatanHariIni)||0)}),e.jsxs("p",{className:"text-sm text-orange-400 flex items-center mt-1",children:[e.jsx(vr,{className:"h-3 w-3 mr-1"}),"Today"]})]}),e.jsx("div",{className:"p-3 bg-orange-500/20 rounded-lg",children:e.jsx(Ns,{className:"h-6 w-6 text-orange-400"})})]})})})]}),e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Monthly Sales Breakdown"}),e.jsx(X,{className:"text-gray-400",children:"Sales performance by month"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:o.map((x,f)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:x.month.split(" ")[0]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-white",children:x.month}),e.jsx("p",{className:"text-sm text-gray-400",children:"Monthly performance"})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-white",children:ke(x.revenue)}),e.jsx("p",{className:"text-sm text-gray-400",children:"Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-white",children:x.orders}),e.jsx("p",{className:"text-sm text-gray-400",children:"Orders"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold text-white",children:ke(x.revenue/x.orders)}),e.jsx("p",{className:"text-sm text-gray-400",children:"Avg. Value"})]})]})]},f))})})]}),e.jsxs(N,{className:"bg-gray-800 border-gray-700",children:[e.jsxs(L,{children:[e.jsx(F,{className:"text-white",children:"Payment Methods Performance"}),e.jsx(X,{className:"text-gray-400",children:"Sales breakdown by payment method"})]}),e.jsx(S,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium text-white",children:"QRIS"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:((d=t==null?void 0:t.metodeBayar)==null?void 0:d.qris)||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"transactions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-medium text-white",children:"Saldo"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:((u=t==null?void 0:t.metodeBayar)==null?void 0:u.saldo)||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"transactions"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-700/50 border border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsx("span",{className:"font-medium text-white",children:"Lainnya"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-white",children:((h=t==null?void 0:t.metodeBayar)==null?void 0:h.unknown)||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"transactions"})]})]})]})})]})]})]})}var Wo="Switch",[B_,vA]=at(Wo),[U_,z_]=B_(Wo),vb=m.forwardRef((t,s)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=t,[x,f]=m.useState(null),b=Ce(s,j=>f(j)),g=m.useRef(!1),p=x?u||!!x.closest("form"):!0,[y,v]=Xt({prop:a,defaultProp:o??!1,onChange:d,caller:Wo});return e.jsxs(U_,{scope:r,checked:y,disabled:l,children:[e.jsx(oe.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Nb(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:b,onClick:J(t.onClick,j=>{v(w=>!w),p&&(g.current=j.isPropagationStopped(),g.current||j.stopPropagation())})}),p&&e.jsx(wb,{control:x,bubbles:!g.current,name:n,value:c,checked:y,required:i,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});vb.displayName=Wo;var yb="SwitchThumb",jb=m.forwardRef((t,s)=>{const{__scopeSwitch:r,...n}=t,a=z_(yb,r);return e.jsx(oe.span,{"data-state":Nb(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:s})});jb.displayName=yb;var W_="SwitchBubbleInput",wb=m.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:n=!0,...a},o)=>{const i=m.useRef(null),l=Ce(i,o),c=fc(r),d=Dl(s);return m.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&f){const b=new Event("click",{bubbles:n});f.call(u,r),u.dispatchEvent(b)}},[c,r,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});wb.displayName=W_;function Nb(t){return t?"checked":"unchecked"}var Sb=vb,H_=jb;const wt=m.forwardRef(({className:t,...s},r)=>e.jsx(Sb,{className:O("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(H_,{className:O("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));wt.displayName=Sb.displayName;function q_(){return e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage your WhatsApp Bot preferences and system configurations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{variant:"outline",className:"bg-background/50 backdrop-blur-sm",children:[e.jsx(ed,{className:"mr-2 h-4 w-4"}),"Reset Defaults"]}),e.jsxs(Z,{className:"bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg shadow-primary/20",children:[e.jsx(rv,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]}),e.jsxs(ds,{defaultValue:"bot",className:"space-y-6",children:[e.jsxs(Jt,{className:"bg-background/50 backdrop-blur-sm p-1 border border-border/50 rounded-xl",children:[e.jsx(Ae,{value:"bot",className:"rounded-lg data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:"Bot Config"}),e.jsx(Ae,{value:"notifications",className:"rounded-lg data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:"Notifications"}),e.jsx(Ae,{value:"system",className:"rounded-lg data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:"System"})]}),e.jsx(Pe,{value:"bot",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(Xu,{className:"h-5 w-5 text-blue-500"}),"Bot Configuration"]}),e.jsx(X,{children:"Configure your WhatsApp bot behavior"})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Auto Reply"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable automatic responses to incoming messages"})]}),e.jsx(wt,{defaultChecked:!0})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Welcome Message"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Send a greeting to new users"})]}),e.jsx(wt,{defaultChecked:!0})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Payment Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Notify users about payment status updates"})]}),e.jsx(wt,{defaultChecked:!0})]})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(nv,{className:"h-5 w-5 text-emerald-500"}),"Message Settings"]}),e.jsx(X,{children:"Configure message handling and protection"})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Message Logging"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Log all bot conversations for auditing"})]}),e.jsx(wt,{defaultChecked:!0})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Spam Protection"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically block spam messages"})]}),e.jsx(wt,{defaultChecked:!0})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Rate Limiting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Limit message frequency per user"})]}),e.jsx(wt,{})]})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft md:col-span-2",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-5 w-5 text-purple-500"}),"WhatsApp Integration"]}),e.jsx(X,{children:"WhatsApp API connection settings"})]}),e.jsx(S,{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ee,{children:"Webhook URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(st,{defaultValue:"https://api.example.com/webhook",className:"bg-muted/30"}),e.jsx(Z,{variant:"outline",children:"Test"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ee,{children:"Phone Number ID"}),e.jsx(st,{defaultValue:"109238475610239",className:"bg-muted/30"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(Ee,{children:"API Token"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(st,{type:"password",value:"********************************",className:"bg-muted/30 font-mono",readOnly:!0}),e.jsx(Z,{variant:"outline",children:"Regenerate"})]})]})]})})]})]})}),e.jsx(Pe,{value:"notifications",className:"space-y-6",children:e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(zu,{className:"h-5 w-5 text-amber-500"}),"Notification Preferences"]}),e.jsx(X,{children:"Manage how and when you receive alerts"})]}),e.jsxs(S,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"New Transaction Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications for every new transaction"})]}),e.jsx(wt,{defaultChecked:!0})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Error Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get alerted immediately when bot errors occur"})]}),e.jsx(wt,{defaultChecked:!0})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Daily Reports"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a daily summary of bot performance"})]}),e.jsx(wt,{})]})]})]})}),e.jsx(Pe,{value:"system",className:"space-y-6",children:e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(av,{className:"h-5 w-5 text-rose-500"}),"System Settings"]}),e.jsx(X,{children:"Advanced system configuration and maintenance"})]}),e.jsx(S,{className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Data Backup"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically backup transaction data daily"})]}),e.jsx(wt,{defaultChecked:!0})]}),e.jsx(ss,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(Ee,{className:"text-base",children:"Debug Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable verbose logging for troubleshooting"})]}),e.jsx(wt,{})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 space-y-4",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(jl,{className:"h-4 w-4 text-primary"}),"Maintenance Actions"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{variant:"outline",className:"w-full justify-start hover:bg-muted",children:[e.jsx(hr,{className:"mr-2 h-4 w-4"}),"Export All Data"]}),e.jsxs(Z,{variant:"outline",className:"w-full justify-start hover:bg-muted",children:[e.jsx(ed,{className:"mr-2 h-4 w-4"}),"Clear System Cache"]}),e.jsxs(Z,{variant:"outline",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/20",children:[e.jsx(Ra,{className:"mr-2 h-4 w-4"}),"Purge Old Logs"]})]})]})})]})})]})})]})]})}function K_(){const t=[{title:"Getting Started",description:"Learn how to set up your WhatsApp bot",icon:td,color:"text-blue-500",bg:"bg-blue-500/10"},{title:"Bot Configuration",description:"Configure bot behavior and responses",icon:Xu,color:"text-purple-500",bg:"bg-purple-500/10"},{title:"Transaction Management",description:"Manage payments and transactions",icon:qe,color:"text-emerald-500",bg:"bg-emerald-500/10"},{title:"WhatsApp Integration",description:"Connect your bot to WhatsApp",icon:rd,color:"text-green-500",bg:"bg-green-500/10"},{title:"Settings & Preferences",description:"Customize bot settings",icon:Vu,color:"text-orange-500",bg:"bg-orange-500/10"},{title:"Troubleshooting",description:"Common issues and solutions",icon:sd,color:"text-red-500",bg:"bg-red-500/10"}],s=[{title:"Email Support",description:"Get help via email",icon:Gu,action:"mailto:support@whatsappbot.com",color:"text-blue-500",bg:"bg-blue-500/10"},{title:"Live Chat",description:"Chat with our support team",icon:rd,action:"#",color:"text-green-500",bg:"bg-green-500/10"},{title:"Phone Support",description:"Call us for immediate help",icon:ln,action:"tel:+6281234567890",color:"text-purple-500",bg:"bg-purple-500/10"}];return e.jsxs("div",{className:"min-h-screen bg-muted/30 p-4 md:p-8 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Find answers and get help with your WhatsApp Bot"})]}),e.jsxs("div",{className:"relative w-full md:w-96",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(st,{placeholder:"Search for help articles...",className:"pl-10 bg-background/50 border-border/50 focus:bg-background transition-all"})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(td,{className:"h-5 w-5 text-primary"}),"Knowledge Base"]}),e.jsx(X,{children:"Browse topics to find what you need"})]}),e.jsx(S,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:t.map((r,n)=>e.jsxs("div",{className:"group p-4 rounded-xl bg-muted/30 border border-border/50 hover:bg-muted/50 hover:border-primary/20 transition-all cursor-pointer flex items-start gap-4",children:[e.jsx("div",{className:O("p-3 rounded-xl transition-colors group-hover:scale-110 duration-300",r.bg),children:e.jsx(r.icon,{className:O("h-6 w-6",r.color)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:r.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:r.description})]}),e.jsx(Bu,{className:"h-5 w-5 text-muted-foreground/50 group-hover:text-primary group-hover:translate-x-1 transition-all"})]},n))})})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(sd,{className:"h-5 w-5 text-orange-500"}),"Frequently Asked Questions"]}),e.jsx(X,{children:"Common questions about WhatsApp Bot"})]}),e.jsx(S,{children:e.jsx("div",{className:"space-y-4",children:[{q:"How do I connect my WhatsApp bot?",a:"Go to Settings > WhatsApp Integration and follow the setup wizard to connect your bot to WhatsApp Business API."},{q:"How do I configure auto-replies?",a:"Navigate to Settings > Bot Configuration and enable Auto Reply. You can customize the response messages in the message settings."},{q:"How do I track transactions?",a:"All transactions are automatically tracked in the Dashboard. You can view detailed reports in the Reports section."},{q:"How do I set up payment notifications?",a:"Enable Payment Notifications in Settings > Bot Configuration. Users will receive automatic updates about their payment status."},{q:"How do I export transaction data?",a:"Go to Settings > System Settings and click Export to download your transaction data in CSV format."},{q:"How do I troubleshoot bot issues?",a:"Check the bot status in Settings > WhatsApp Integration. Enable Debug Mode for detailed logging and contact support if issues persist."}].map((r,n)=>e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 hover:bg-muted/50 transition-colors",children:[e.jsxs("h3",{className:"font-semibold text-foreground mb-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-primary/10 text-primary flex items-center justify-center text-xs font-bold",children:"Q"}),r.q]}),e.jsx("p",{className:"text-sm text-muted-foreground pl-8",children:r.a})]},n))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{className:"card-premium border-none shadow-soft bg-gradient-to-br from-slate-900 to-slate-800 text-white",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"text-white flex items-center gap-2",children:[e.jsx(V_,{className:"h-5 w-5 text-emerald-400"}),"System Status"]}),e.jsx(X,{className:"text-slate-400",children:"Current bot health check"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full"}),e.jsx("div",{className:"absolute inset-0 bg-emerald-500 rounded-full animate-ping opacity-75"})]}),e.jsx("span",{className:"font-medium text-sm",children:"Bot Core"})]}),e.jsx(re,{variant:"outline",className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Operational"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium text-sm",children:"WhatsApp API"})]}),e.jsx(re,{variant:"outline",className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2.5 h-2.5 bg-purple-500 rounded-full"}),e.jsx("span",{className:"font-medium text-sm",children:"Webhook"})]}),e.jsx(re,{variant:"outline",className:"bg-purple-500/20 text-purple-400 border-purple-500/30",children:"Active"})]})]})]}),e.jsxs(N,{className:"card-premium border-none shadow-soft",children:[e.jsxs(L,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(ln,{className:"h-5 w-5 text-primary"}),"Contact Support"]}),e.jsx(X,{children:"Need personal assistance?"})]}),e.jsx(S,{className:"space-y-4",children:s.map((r,n)=>e.jsxs("div",{className:"p-4 rounded-xl bg-muted/30 border border-border/50 hover:bg-muted/50 transition-colors text-center group",children:[e.jsx("div",{className:O("w-12 h-12 mx-auto rounded-full flex items-center justify-center mb-3 transition-transform group-hover:scale-110",r.bg),children:e.jsx(r.icon,{className:O("h-6 w-6",r.color)})}),e.jsx("h3",{className:"font-semibold text-foreground mb-1",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:r.description}),e.jsxs(Z,{variant:"outline",size:"sm",className:"w-full border-primary/20 hover:bg-primary/5 hover:text-primary",onClick:()=>window.open(r.action,"_blank"),children:["Connect",e.jsx(ov,{className:"ml-2 h-3 w-3"})]})]},n))})]})]})]})]})}function V_({className:t}){return e.jsx("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})})}const G_=new Ob({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*10}}}),X_=()=>e.jsx(Mb,{client:G_,children:e.jsxs(lh,{children:[e.jsx($0,{}),e.jsx(gy,{}),e.jsx(Fb,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Wh,{children:e.jsxs("div",{className:"flex min-h-screen w-full bg-background font-sans antialiased selection:bg-primary/10 selection:text-primary",children:[e.jsx(HN,{}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen transition-all duration-300 ease-in-out",children:[e.jsx(x1,{}),e.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-muted/30 p-4 md:p-6 lg:p-8",children:e.jsx("div",{className:"mx-auto max-w-7xl space-y-8 animate-in fade-in-50 duration-500 slide-in-from-bottom-4",children:e.jsxs($b,{children:[e.jsx(Fe,{path:"/",element:e.jsx(rC,{})}),e.jsx(Fe,{path:"/projects",element:e.jsx(M_,{})}),e.jsx(Fe,{path:"/tasks",element:e.jsx(L_,{})}),e.jsx(Fe,{path:"/reports",element:e.jsx(Ou,{})}),e.jsx(Fe,{path:"/reports/overview",element:e.jsx(Ou,{})}),e.jsx(Fe,{path:"/reports/customer",element:e.jsx(F_,{})}),e.jsx(Fe,{path:"/reports/sales",element:e.jsx($_,{})}),e.jsx(Fe,{path:"/settings",element:e.jsx(q_,{})}),e.jsx(Fe,{path:"/help",element:e.jsx(K_,{})}),e.jsx(Fe,{path:"/charts",element:e.jsx(nC,{})}),e.jsx(Fe,{path:"/users",element:e.jsx(LC,{})}),e.jsx(Fe,{path:"/users/:userId",element:e.jsx(BC,{})}),e.jsx(Fe,{path:"/transactions",element:e.jsx(UC,{})}),e.jsx(Fe,{path:"/products",element:e.jsx(JC,{})}),e.jsx(Fe,{path:"/products-stock",element:e.jsx(QC,{})}),e.jsx(Fe,{path:"/products/:productId",element:e.jsx(mR,{})}),e.jsx(Fe,{path:"/analytics",element:e.jsx(__,{})}),e.jsx(Fe,{path:"/ref/:refId",element:e.jsx(A_,{})}),e.jsx(Fe,{path:"/advanced-analytics",element:e.jsx(E_,{})}),e.jsx(Fe,{path:"/product-performance",element:e.jsx(T_,{})}),e.jsx(Fe,{path:"/user-behavior",element:e.jsx(P_,{})}),e.jsx(Fe,{path:"/financial-analytics",element:e.jsx(I_,{})}),e.jsx(Fe,{path:"/sales-analytics",element:e.jsx(D_,{})}),e.jsx(Fe,{path:"/inventory-analytics",element:e.jsx(O_,{})})]})})})]})]})})})]})});Yu(document.getElementById("root")).render(e.jsx(X_,{}));
